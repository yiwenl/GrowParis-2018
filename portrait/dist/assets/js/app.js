!function(modules){function hotDisposeChunk(chunkId){delete installedChunks[chunkId]}function hotDownloadUpdateChunk(chunkId){var head=document.getElementsByTagName("head")[0],script=document.createElement("script");script.type="text/javascript",script.charset="utf-8",script.src=__webpack_require__.p+""+chunkId+"."+hotCurrentHash+".hot-update.js",head.appendChild(script)}function hotDownloadManifest(requestTimeout){return requestTimeout=requestTimeout||1e4,new Promise(function(resolve,reject){if("undefined"==typeof XMLHttpRequest)return reject(new Error("No browser support"));try{var request=new XMLHttpRequest,requestPath=__webpack_require__.p+""+hotCurrentHash+".hot-update.json";request.open("GET",requestPath,!0),request.timeout=requestTimeout,request.send(null)}catch(err){return reject(err)}request.onreadystatechange=function(){if(4===request.readyState)if(0===request.status)reject(new Error("Manifest request to "+requestPath+" timed out."));else if(404===request.status)resolve();else if(200!==request.status&&304!==request.status)reject(new Error("Manifest request to "+requestPath+" failed."));else{try{var update=JSON.parse(request.responseText)}catch(e){return void reject(e)}resolve(update)}}})}function hotCreateRequire(moduleId){var me=installedModules[moduleId];if(!me)return __webpack_require__;var fn=function(request){return me.hot.active?(installedModules[request]?installedModules[request].parents.indexOf(moduleId)<0&&installedModules[request].parents.push(moduleId):(hotCurrentParents=[moduleId],hotCurrentChildModule=request),me.children.indexOf(request)<0&&me.children.push(request)):hotCurrentParents=[],__webpack_require__(request)};for(var name in __webpack_require__)Object.prototype.hasOwnProperty.call(__webpack_require__,name)&&"e"!==name&&Object.defineProperty(fn,name,function(name){return{configurable:!0,enumerable:!0,get:function(){return __webpack_require__[name]},set:function(value){__webpack_require__[name]=value}}}(name));return fn.e=function(chunkId){function finishChunkLoading(){hotChunksLoading--,"prepare"===hotStatus&&(hotWaitingFilesMap[chunkId]||hotEnsureUpdateChunk(chunkId),0===hotChunksLoading&&0===hotWaitingFiles&&hotUpdateDownloaded())}return"ready"===hotStatus&&hotSetStatus("prepare"),hotChunksLoading++,__webpack_require__.e(chunkId).then(finishChunkLoading,function(err){throw finishChunkLoading(),err})},fn}function hotCreateModule(moduleId){var hot={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:hotCurrentChildModule!==moduleId,active:!0,accept:function(dep,callback){if(void 0===dep)hot._selfAccepted=!0;else if("function"==typeof dep)hot._selfAccepted=dep;else if("object"==typeof dep)for(var i=0;i<dep.length;i++)hot._acceptedDependencies[dep[i]]=callback||function(){};else hot._acceptedDependencies[dep]=callback||function(){}},decline:function(dep){if(void 0===dep)hot._selfDeclined=!0;else if("object"==typeof dep)for(var i=0;i<dep.length;i++)hot._declinedDependencies[dep[i]]=!0;else hot._declinedDependencies[dep]=!0},dispose:function(callback){hot._disposeHandlers.push(callback)},addDisposeHandler:function(callback){hot._disposeHandlers.push(callback)},removeDisposeHandler:function(callback){var idx=hot._disposeHandlers.indexOf(callback);idx>=0&&hot._disposeHandlers.splice(idx,1)},check:hotCheck,apply:hotApply,status:function(l){if(!l)return hotStatus;hotStatusHandlers.push(l)},addStatusHandler:function(l){hotStatusHandlers.push(l)},removeStatusHandler:function(l){var idx=hotStatusHandlers.indexOf(l);idx>=0&&hotStatusHandlers.splice(idx,1)},data:hotCurrentModuleData[moduleId]};return hotCurrentChildModule=void 0,hot}function hotSetStatus(newStatus){hotStatus=newStatus;for(var i=0;i<hotStatusHandlers.length;i++)hotStatusHandlers[i].call(null,newStatus)}function toModuleId(id){return+id+""===id?+id:id}function hotCheck(apply){if("idle"!==hotStatus)throw new Error("check() is only allowed in idle status");return hotApplyOnUpdate=apply,hotSetStatus("check"),hotDownloadManifest(hotRequestTimeout).then(function(update){if(!update)return hotSetStatus("idle"),null;hotRequestedFilesMap={},hotWaitingFilesMap={},hotAvailableFilesMap=update.c,hotUpdateNewHash=update.h,hotSetStatus("prepare");var promise=new Promise(function(resolve,reject){hotDeferred={resolve:resolve,reject:reject}});hotUpdate={};return hotEnsureUpdateChunk(0),"prepare"===hotStatus&&0===hotChunksLoading&&0===hotWaitingFiles&&hotUpdateDownloaded(),promise})}function hotAddUpdateChunk(chunkId,moreModules){if(hotAvailableFilesMap[chunkId]&&hotRequestedFilesMap[chunkId]){hotRequestedFilesMap[chunkId]=!1;for(var moduleId in moreModules)Object.prototype.hasOwnProperty.call(moreModules,moduleId)&&(hotUpdate[moduleId]=moreModules[moduleId]);0==--hotWaitingFiles&&0===hotChunksLoading&&hotUpdateDownloaded()}}function hotEnsureUpdateChunk(chunkId){hotAvailableFilesMap[chunkId]?(hotRequestedFilesMap[chunkId]=!0,hotWaitingFiles++,hotDownloadUpdateChunk(chunkId)):hotWaitingFilesMap[chunkId]=!0}function hotUpdateDownloaded(){hotSetStatus("ready");var deferred=hotDeferred;if(hotDeferred=null,deferred)if(hotApplyOnUpdate)Promise.resolve().then(function(){return hotApply(hotApplyOnUpdate)}).then(function(result){deferred.resolve(result)},function(err){deferred.reject(err)});else{var outdatedModules=[];for(var id in hotUpdate)Object.prototype.hasOwnProperty.call(hotUpdate,id)&&outdatedModules.push(toModuleId(id));deferred.resolve(outdatedModules)}}function hotApply(options){function addAllToSet(a,b){for(var i=0;i<b.length;i++){var item=b[i];a.indexOf(item)<0&&a.push(item)}}if("ready"!==hotStatus)throw new Error("apply() is only allowed in ready status");options=options||{};var cb,i,j,module,moduleId,outdatedDependencies={},outdatedModules=[],appliedUpdate={},warnUnexpectedRequire=function(){};for(var id in hotUpdate)if(Object.prototype.hasOwnProperty.call(hotUpdate,id)){moduleId=toModuleId(id);var result;result=hotUpdate[id]?function(updateModuleId){for(var outdatedModules=[updateModuleId],outdatedDependencies={},queue=outdatedModules.slice().map(function(id){return{chain:[id],id:id}});queue.length>0;){var queueItem=queue.pop(),moduleId=queueItem.id,chain=queueItem.chain;if((module=installedModules[moduleId])&&!module.hot._selfAccepted){if(module.hot._selfDeclined)return{type:"self-declined",chain:chain,moduleId:moduleId};if(module.hot._main)return{type:"unaccepted",chain:chain,moduleId:moduleId};for(var i=0;i<module.parents.length;i++){var parentId=module.parents[i],parent=installedModules[parentId];if(parent){if(parent.hot._declinedDependencies[moduleId])return{type:"declined",chain:chain.concat([parentId]),moduleId:moduleId,parentId:parentId};outdatedModules.indexOf(parentId)>=0||(parent.hot._acceptedDependencies[moduleId]?(outdatedDependencies[parentId]||(outdatedDependencies[parentId]=[]),addAllToSet(outdatedDependencies[parentId],[moduleId])):(delete outdatedDependencies[parentId],outdatedModules.push(parentId),queue.push({chain:chain.concat([parentId]),id:parentId})))}}}}return{type:"accepted",moduleId:updateModuleId,outdatedModules:outdatedModules,outdatedDependencies:outdatedDependencies}}(moduleId):{type:"disposed",moduleId:id};var abortError=!1,doApply=!1,doDispose=!1,chainInfo="";switch(result.chain&&(chainInfo="\nUpdate propagation: "+result.chain.join(" -> ")),result.type){case"self-declined":options.onDeclined&&options.onDeclined(result),options.ignoreDeclined||(abortError=new Error("Aborted because of self decline: "+result.moduleId+chainInfo));break;case"declined":options.onDeclined&&options.onDeclined(result),options.ignoreDeclined||(abortError=new Error("Aborted because of declined dependency: "+result.moduleId+" in "+result.parentId+chainInfo));break;case"unaccepted":options.onUnaccepted&&options.onUnaccepted(result),options.ignoreUnaccepted||(abortError=new Error("Aborted because "+moduleId+" is not accepted"+chainInfo));break;case"accepted":options.onAccepted&&options.onAccepted(result),doApply=!0;break;case"disposed":options.onDisposed&&options.onDisposed(result),doDispose=!0;break;default:throw new Error("Unexception type "+result.type)}if(abortError)return hotSetStatus("abort"),Promise.reject(abortError);if(doApply){appliedUpdate[moduleId]=hotUpdate[moduleId],addAllToSet(outdatedModules,result.outdatedModules);for(moduleId in result.outdatedDependencies)Object.prototype.hasOwnProperty.call(result.outdatedDependencies,moduleId)&&(outdatedDependencies[moduleId]||(outdatedDependencies[moduleId]=[]),addAllToSet(outdatedDependencies[moduleId],result.outdatedDependencies[moduleId]))}doDispose&&(addAllToSet(outdatedModules,[result.moduleId]),appliedUpdate[moduleId]=warnUnexpectedRequire)}var outdatedSelfAcceptedModules=[];for(i=0;i<outdatedModules.length;i++)moduleId=outdatedModules[i],installedModules[moduleId]&&installedModules[moduleId].hot._selfAccepted&&outdatedSelfAcceptedModules.push({module:moduleId,errorHandler:installedModules[moduleId].hot._selfAccepted});hotSetStatus("dispose"),Object.keys(hotAvailableFilesMap).forEach(function(chunkId){!1===hotAvailableFilesMap[chunkId]&&hotDisposeChunk(chunkId)});for(var idx,queue=outdatedModules.slice();queue.length>0;)if(moduleId=queue.pop(),module=installedModules[moduleId]){var data={},disposeHandlers=module.hot._disposeHandlers;for(j=0;j<disposeHandlers.length;j++)(cb=disposeHandlers[j])(data);for(hotCurrentModuleData[moduleId]=data,module.hot.active=!1,delete installedModules[moduleId],j=0;j<module.children.length;j++){var child=installedModules[module.children[j]];child&&((idx=child.parents.indexOf(moduleId))>=0&&child.parents.splice(idx,1))}}var dependency,moduleOutdatedDependencies;for(moduleId in outdatedDependencies)if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId)&&(module=installedModules[moduleId]))for(moduleOutdatedDependencies=outdatedDependencies[moduleId],j=0;j<moduleOutdatedDependencies.length;j++)dependency=moduleOutdatedDependencies[j],(idx=module.children.indexOf(dependency))>=0&&module.children.splice(idx,1);hotSetStatus("apply"),hotCurrentHash=hotUpdateNewHash;for(moduleId in appliedUpdate)Object.prototype.hasOwnProperty.call(appliedUpdate,moduleId)&&(modules[moduleId]=appliedUpdate[moduleId]);var error=null;for(moduleId in outdatedDependencies)if(Object.prototype.hasOwnProperty.call(outdatedDependencies,moduleId)){module=installedModules[moduleId],moduleOutdatedDependencies=outdatedDependencies[moduleId];var callbacks=[];for(i=0;i<moduleOutdatedDependencies.length;i++)dependency=moduleOutdatedDependencies[i],cb=module.hot._acceptedDependencies[dependency],callbacks.indexOf(cb)>=0||callbacks.push(cb);for(i=0;i<callbacks.length;i++){cb=callbacks[i];try{cb(moduleOutdatedDependencies)}catch(err){options.onErrored&&options.onErrored({type:"accept-errored",moduleId:moduleId,dependencyId:moduleOutdatedDependencies[i],error:err}),options.ignoreErrored||error||(error=err)}}}for(i=0;i<outdatedSelfAcceptedModules.length;i++){var item=outdatedSelfAcceptedModules[i];moduleId=item.module,hotCurrentParents=[moduleId];try{__webpack_require__(moduleId)}catch(err){if("function"==typeof item.errorHandler)try{item.errorHandler(err)}catch(err2){options.onErrored&&options.onErrored({type:"self-accept-error-handler-errored",moduleId:moduleId,error:err2,orginalError:err}),options.ignoreErrored||error||(error=err2),error||(error=err)}else options.onErrored&&options.onErrored({type:"self-accept-errored",moduleId:moduleId,error:err}),options.ignoreErrored||error||(error=err)}}return error?(hotSetStatus("fail"),Promise.reject(error)):(hotSetStatus("idle"),new Promise(function(resolve){resolve(outdatedModules)}))}function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{},hot:hotCreateModule(moduleId),parents:(hotCurrentParentsTemp=hotCurrentParents,hotCurrentParents=[],hotCurrentParentsTemp),children:[]};return modules[moduleId].call(module.exports,module,module.exports,hotCreateRequire(moduleId)),module.l=!0,module.exports}var parentHotUpdateCallback=this.webpackHotUpdate;this.webpackHotUpdate=function(chunkId,moreModules){hotAddUpdateChunk(chunkId,moreModules),parentHotUpdateCallback&&parentHotUpdateCallback(chunkId,moreModules)};var hotCurrentChildModule,hotDeferred,hotUpdate,hotUpdateNewHash,hotApplyOnUpdate=!0,hotCurrentHash="f1e87b49a1f2dcc375cd",hotRequestTimeout=1e4,hotCurrentModuleData={},hotCurrentParents=[],hotCurrentParentsTemp=[],hotStatusHandlers=[],hotStatus="idle",hotWaitingFiles=0,hotChunksLoading=0,hotWaitingFilesMap={},hotRequestedFilesMap={},hotAvailableFilesMap={},installedModules={};__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__.h=function(){return hotCurrentHash},hotCreateRequire(5)(__webpack_require__.s=5)}([function(module,exports,__webpack_require__){!function(t,e){module.exports=e()}(0,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return t[n].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){t.exports=r(86)},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,r){"use strict";e.__esModule=!0;var a=r(118),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}()},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=r(114),h=n(f),c=r(113),d=n(c),v=r(115),_=n(v),m=r(116),p=n(m),M=r(66),x=(n(M),r(109)),g=n(x),E=void 0,b=function(){function t(){(0,i.default)(this,t),this.canvas,this._viewport=[0,0,0,0],this._enabledVertexAttribute=[],this.identityMatrix=l.default.mat4.create(),this._normalMatrix=l.default.mat3.create(),this._inverseModelViewMatrix=l.default.mat3.create(),this._modelMatrix=l.default.mat4.create(),this._matrix=l.default.mat4.create(),this._lastMesh=null,this._useWebGL2=!1,this._hasArrayInstance,this._extArrayInstance,this._hasCheckedExt=!1,l.default.mat4.identity(this.identityMatrix,this.identityMatrix),this.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this.isMobile=!0)}return(0,o.default)(t,[{key:"init",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(null!==t&&void 0!==t){void 0!==this.canvas&&null!==this.canvas&&this.destroy(),this.canvas=t,this.setSize(window.innerWidth,window.innerHeight);var r=void 0;e.ignoreWebgl2?r=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e):(r=this.canvas.getContext("experimental-webgl2",e)||this.canvas.getContext("webgl2",e),r?this._useWebGL2=!0:r=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e)),this.initWithGL(r)}}},{key:"initWithGL",value:function(t){this.canvas||(this.canvas=t.canvas),E=this.gl=t,this.extensions={};for(var e=0;e<g.default.length;e++)this.extensions[g.default[e]]=E.getExtension(g.default[e]);(0,d.default)(),(0,h.default)(E,"OES_vertex_array_object"),(0,h.default)(E,"ANGLE_instanced_arrays"),(0,h.default)(E,"WEBGL_draw_buffers"),this.enable(this.DEPTH_TEST),this.enable(this.CULL_FACE),this.enable(this.BLEND),this.enableAlphaBlending()}},{key:"setViewport",value:function(t,e,r,n){var a=!1;t!==this._viewport[0]&&(a=!0),e!==this._viewport[1]&&(a=!0),r!==this._viewport[2]&&(a=!0),n!==this._viewport[3]&&(a=!0),a&&(E.viewport(t,e,r,n),this._viewport=[t,e,r,n])}},{key:"scissor",value:function(t,e,r,n){E.scissor(t,e,r,n)}},{key:"clear",value:function(t,e,r,n){E.clearColor(t,e,r,n),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT)}},{key:"setMatrices",value:function(t){this.camera=t,this.rotate(this.identityMatrix)}},{key:"useShader",value:function(t){this.shader=t,this.shaderProgram=this.shader.shaderProgram}},{key:"rotate",value:function(t){l.default.mat4.copy(this._modelMatrix,t),l.default.mat4.multiply(this._matrix,this.camera.matrix,this._modelMatrix),l.default.mat3.fromMat4(this._normalMatrix,this._matrix),l.default.mat3.invert(this._normalMatrix,this._normalMatrix),l.default.mat3.transpose(this._normalMatrix,this._normalMatrix),l.default.mat3.fromMat4(this._inverseModelViewMatrix,this._matrix),l.default.mat3.invert(this._inverseModelViewMatrix,this._inverseModelViewMatrix)}},{key:"draw",value:function(t,e){if(t.length)for(var r=0;r<t.length;r++)this.draw(t[r]);else{t.bind(this.shaderProgram),void 0!==this.camera&&(this.shader.uniform("uProjectionMatrix","mat4",this.camera.projection),this.shader.uniform("uViewMatrix","mat4",this.camera.matrix)),this.shader.uniform("uModelMatrix","mat4",this._modelMatrix),this.shader.uniform("uNormalMatrix","mat3",this._normalMatrix),this.shader.uniform("uModelViewMatrixInverse","mat3",this._inverseModelViewMatrix);var n=t.drawType;void 0!==e&&(n=e),t.isInstanced?E.drawElementsInstanced(t.drawType,t.iBuffer.numItems,E.UNSIGNED_SHORT,0,t.numInstance):n===E.POINTS?E.drawArrays(n,0,t.vertexSize):E.drawElements(n,t.iBuffer.numItems,E.UNSIGNED_SHORT,0),t.unbind()}}},{key:"drawTransformFeedback",value:function(t){var e=t.meshSource,r=t.meshDestination,n=t.numPoints,a=t.transformFeedback;e.bind(this.shaderProgram),r.generateBuffers(this.shaderProgram),E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,a),r.attributes.forEach(function(t,e){E.bindBufferBase(E.TRANSFORM_FEEDBACK_BUFFER,e,t.buffer)}),E.enable(E.RASTERIZER_DISCARD),E.beginTransformFeedback(E.POINTS),E.drawArrays(E.POINTS,0,n),E.endTransformFeedback(),E.disable(E.RASTERIZER_DISCARD),E.useProgram(null),E.bindBuffer(E.ARRAY_BUFFER,null),r.attributes.forEach(function(t,e){E.bindBufferBase(E.TRANSFORM_FEEDBACK_BUFFER,e,null)}),E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,null),e.unbind()}},{key:"setSize",value:function(t,e){this._width=t,this._height=e,this.canvas.width=this._width,this.canvas.height=this._height,this._aspectRatio=this._width/this._height,E&&this.viewport(0,0,this._width,this._height)}},{key:"showExtensions",value:function(){for(var t in this.extensions)this.extensions[t]}},{key:"checkExtension",value:function(t){return!!this.extensions[t]}},{key:"getExtension",value:function(t){return this.extensions[t]}},{key:"enableAlphaBlending",value:function(){E.blendFunc(E.SRC_ALPHA,E.ONE_MINUS_SRC_ALPHA)}},{key:"enableAdditiveBlending",value:function(){E.blendFunc(E.ONE,E.ONE)}},{key:"enable",value:function(t){E.enable(t)}},{key:"disable",value:function(t){E.disable(t)}},{key:"viewport",value:function(t,e,r,n){this.setViewport(t,e,r,n)}},{key:"destroy",value:function(){if(this.canvas.parentNode)try{this.canvas.parentNode.removeChild(this.canvas)}catch(t){}this.canvas=null}},{key:"FLOAT",get:function(){return(0,_.default)()}},{key:"HALF_FLOAT",get:function(){return(0,p.default)()}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"aspectRatio",get:function(){return this._aspectRatio}},{key:"webgl2",get:function(){return this._useWebGL2}}]),t}(),y=new b;e.default=y,t.exports=e.default},function(t,e,r){t.exports={default:r(128),__esModule:!0}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=r(120),i=n(a),u=r(117),o=n(u),s=r(38),l=n(s);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,l.default)(e)));t.prototype=(0,o.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(i.default?(0,i.default)(t,e):t.__proto__=e)}},function(t,e,r){"use strict";e.__esModule=!0;var a=r(38),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(38),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(3),h=n(f),c=(r(166),function(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}),v=function(t){return t.slice?t.slice(0):new Float32Array(t)},_=void 0,m=r(53),p=r(170),M={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},x=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?m:arguments[0],r=arguments.length<=1||void 0===arguments[1]?p:arguments[1],n=arguments[2];(0,o.default)(this,t),_=h.default.gl,this.parameters=[],this.uniformTextures=[],this._varyings=n,e||(e=m),r||(r=m);var a=this._createShaderProgram(e,!0),i=this._createShaderProgram(r,!1);this._attachShaderProgram(a,i)}return(0,l.default)(t,[{key:"bind",value:function(){h.default.shader!==this&&(_.useProgram(this.shaderProgram),h.default.useShader(this),this.uniformTextures=[])}},{key:"uniform",value:function(t,e,r){if("object"===(void 0===t?"undefined":(0,i.default)(t)))return void this.uniformObject(t);for(var n=M[e]||e,a=!1,u=void 0,o=-1,s=0;s<this.parameters.length;s++)if(u=this.parameters[s],u.name===t){a=!0,o=s;break}var l=!1;if(a?(this.shaderProgram[t]=u.uniformLoc,l=u.isNumber):(l="uniform1i"===n||"uniform1f"===n,this.shaderProgram[t]=_.getUniformLocation(this.shaderProgram,t),l?this.parameters.push({name:t,type:n,value:r,uniformLoc:this.shaderProgram[t],isNumber:l}):this.parameters.push({name:t,type:n,value:v(r),uniformLoc:this.shaderProgram[t],isNumber:l}),o=this.parameters.length-1),this.parameters[o].uniformLoc)if(-1===n.indexOf("Matrix"))if(l){var f=this.parameters[o].value!==r||!a;f&&(_[n](this.shaderProgram[t],r),this.parameters[o].value=r)}else c(this.parameters[o].value,r)&&a||(_[n](this.shaderProgram[t],r),this.parameters[o].value=v(r));else c(this.parameters[o].value,r)&&a||(_[n](this.shaderProgram[t],!1,r),this.parameters[o].value=v(r))}},{key:"uniformObject",value:function(e){for(var r in e){var n=e[r],a=t.getUniformType(n);if(n.concat&&n[0].concat){for(var i=[],u=0;u<n.length;u++)i=i.concat(n[u]);n=i}this.uniform(r,a,n)}}},{key:"_createShaderProgram",value:function(t,e){var r=e?h.default.VERTEX_SHADER:h.default.FRAGMENT_SHADER,n=_.createShader(r);return _.shaderSource(n,t),_.compileShader(n),_.getShaderParameter(n,_.COMPILE_STATUS)?n:null}},{key:"_attachShaderProgram",value:function(t,e){this.shaderProgram=_.createProgram(),_.attachShader(this.shaderProgram,t),_.attachShader(this.shaderProgram,e),_.deleteShader(t),_.deleteShader(e),this._varyings&&_.transformFeedbackVaryings(this.shaderProgram,this._varyings,_.SEPARATE_ATTRIBS),_.linkProgram(this.shaderProgram)}}]),t}();x.getUniformType=function(t){var e=!!t.concat;return e?function(t){return 9===t.length?"uniformMatrix3fv":16===t.length?"uniformMatrix4fv":"vec"+t.length}(t[0].concat?t[0]:t):"float"},e.default=x,t.exports=e.default},function(t,e,r){e.glMatrix=r(11),e.mat2=r(161),e.mat2d=r(162),e.mat3=r(79),e.mat4=r(163),e.quat=r(164),e.vec2=r(165),e.vec3=r(80),e.vec4=r(81)},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=function(){function t(e,r){(0,i.default)(this,t),this._mesh=e,this._shader=r}return(0,o.default)(t,[{key:"draw",value:function(){this._shader.bind(),l.default.draw(this.mesh)}},{key:"mesh",get:function(){return this._mesh}},{key:"shader",get:function(){return this._shader}}]),t}();e.default=f,t.exports=e.default},function(t,e){var r=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(t,e){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},r.equals=function(t,e){return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=r},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=r(8),h=r(66),c=n(h),d=void 0,v=35044,_=function(t){var e=void 0;return void 0!==t.buffer?e=t.buffer:(e=d.createBuffer(),t.buffer=e),e},m=function(t,e){for(var r=[],n=0;n<t.length;n+=e){for(var a=[],i=0;e>i;i++)a.push(t[n+i]);r.push(a)}return r},p=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?4:arguments[0],r=arguments.length<=1||void 0===arguments[1]||arguments[1];(0,i.default)(this,t),d=l.default.gl,this.drawType=e,this._attributes=[],this._numInstance=-1,this._enabledVertexAttribute=[],this._indices=[],this._faces=[],this._bufferChanged=[],this._hasIndexBufferChanged=!1,this._hasVAO=!1,this._isInstanced=!1,this._extVAO=!!l.default.gl.createVertexArray,this._useVAO=!!this._extVAO&&r}return(0,o.default)(t,[{key:"bufferVertex",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?v:arguments[1];return this.bufferData(t,"aVertexPosition",3,e),this.normals.length<this.vertices.length&&this.bufferNormal(t,e),this}},{key:"bufferTexCoord",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?v:arguments[1];return this.bufferData(t,"aTextureCoord",2,e),this}},{key:"bufferNormal",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?v:arguments[1];return this.bufferData(t,"aNormal",3,e),this}},{key:"bufferIndex",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return this._drawType=e?d.DYNAMIC_DRAW:d.STATIC_DRAW,this._indices=new Uint16Array(t),this._numItems=this._indices.length,this}},{key:"bufferFlattenData",value:function(t,e,r){var i=(arguments.length<=3||void 0===arguments[3]||arguments[3],!(arguments.length<=4||void 0===arguments[4])&&arguments[4],m(t,r));return this.bufferData(i,e,r,v,!1),this}},{key:"bufferData",value:function(t,r,n){var a=arguments.length<=3||void 0===arguments[3]?v:arguments[3],i=!(arguments.length<=4||void 0===arguments[4])&&arguments[4],u=0,o=a,e=[];for(n||(n=t[0].length),this._isInstanced=i||this._isInstanced,u=0;u<t.length;u++)for(var s=0;s<t[u].length;s++)e.push(t[u][s]);var l=new Float32Array(e),f=this.getAttribute(r);return f?(f.itemSize=n,f.dataArray=l,f.source=t):this._attributes.push({name:r,source:t,itemSize:n,drawType:o,dataArray:l,isInstanced:i}),this._bufferChanged.push(r),this}},{key:"bufferInstance",value:function(t,e){if(l.default.gl.vertexAttribDivisor){var r=t[0].length;this._numInstance=t.length,this.bufferData(t,e,r,v,!0)}}},{key:"bind",value:function(t){this.generateBuffers(t),this.hasVAO?d.bindVertexArray(this.vao):(this.attributes.forEach(function(t){d.bindBuffer(d.ARRAY_BUFFER,t.buffer);var e=t.attrPosition;d.vertexAttribPointer(e,t.itemSize,d.FLOAT,!1,0,0),t.isInstanced&&d.vertexAttribDivisor(e,1)}),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.iBuffer))}},{key:"generateBuffers",value:function(t){var e=this;0!=this._bufferChanged.length&&(this._useVAO?(this._vao||(this._vao=d.createVertexArray()),d.bindVertexArray(this._vao),this._attributes.forEach(function(r){if(-1!==e._bufferChanged.indexOf(r.name)){var n=_(r);d.bindBuffer(d.ARRAY_BUFFER,n),d.bufferData(d.ARRAY_BUFFER,r.dataArray,r.drawType);var a=(0,c.default)(d,t,r.name);d.enableVertexAttribArray(a),d.vertexAttribPointer(a,r.itemSize,d.FLOAT,!1,0,0),r.attrPosition=a,r.isInstanced&&d.vertexAttribDivisor(a,1)}}),this._updateIndexBuffer(),d.bindVertexArray(null),this._hasVAO=!0):(this._attributes.forEach(function(r){if(-1!==e._bufferChanged.indexOf(r.name)){var n=_(r);d.bindBuffer(d.ARRAY_BUFFER,n),d.bufferData(d.ARRAY_BUFFER,r.dataArray,r.drawType);var a=(0,c.default)(d,t,r.name);d.enableVertexAttribArray(a),d.vertexAttribPointer(a,r.itemSize,d.FLOAT,!1,0,0),r.attrPosition=a,r.isInstanced&&d.vertexAttribDivisor(a,1)}}),this._updateIndexBuffer()),this._hasIndexBufferChanged=!1,this._bufferChanged=[])}},{key:"unbind",value:function(){this._useVAO&&d.bindVertexArray(null),this._attributes.forEach(function(t){t.isInstanced&&d.vertexAttribDivisor(t.attrPosition,0)})}},{key:"_updateIndexBuffer",value:function(){this._hasIndexBufferChanged||(this.iBuffer||(this.iBuffer=d.createBuffer()),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.iBuffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,this._indices,this._drawType),this.iBuffer.itemSize=1,this.iBuffer.numItems=this._numItems)}},{key:"computeNormals",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];this.generateFaces(),t?this._computeFaceNormals():this._computeVertexNormals()}},{key:"_computeFaceNormals",value:function(){for(var t=void 0,e=void 0,r=[],n=0;n<this._indices.length;n+=3){t=n/3,e=this._faces[t];var a=e.normal;r[e.indices[0]]=a,r[e.indices[1]]=a,r[e.indices[2]]=a}this.bufferNormal(r)}},{key:"_computeVertexNormals",value:function(){for(var t=void 0,e=f.vec3.create(),r=[],n=this.vertices,a=0;a<n.length;a++){f.vec3.set(e,0,0,0);for(var i=0;i<this._faces.length;i++)t=this._faces[i],t.indices.indexOf(a)>=0&&(e[0]+=t.normal[0],e[1]+=t.normal[1],e[2]+=t.normal[2]);f.vec3.normalize(e,e),r.push([e[0],e[1],e[2]])}this.bufferNormal(r)}},{key:"generateFaces",value:function(){for(var t=void 0,e=void 0,r=void 0,n=void 0,a=void 0,i=void 0,u=(f.vec3.create(),f.vec3.create(),f.vec3.create(),this.vertices),o=0;o<this._indices.length;o+=3){t=this._indices[o],e=this._indices[o+1],r=this._indices[o+2],n=u[t],a=u[e],i=u[r];var s={indices:[t,e,r],vertices:[n,a,i]};this._faces.push(s)}}},{key:"getAttribute",value:function(t){return this._attributes.find(function(e){return e.name===t})}},{key:"getSource",value:function(t){var e=this.getAttribute(t);return e?e.source:[]}},{key:"vertices",get:function(){return this.getSource("aVertexPosition")}},{key:"normals",get:function(){return this.getSource("aNormal")}},{key:"coords",get:function(){return this.getSource("aTextureCoord")}},{key:"indices",get:function(){return this._indices}},{key:"vertexSize",get:function(){return this.vertices.length}},{key:"faces",get:function(){return this._faces}},{key:"attributes",get:function(){return this._attributes}},{key:"hasVAO",get:function(){return this._hasVAO}},{key:"vao",get:function(){return this._vao}},{key:"numInstance",get:function(){return this._numInstance}},{key:"isInstanced",get:function(){return this._isInstanced}}]),t}();e.default=p,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=r(4),i=n(a),u=r(119),o=n(u);e.default=function s(t,e,r){null===t&&(t=Function.prototype);var n=(0,o.default)(t,e);if(void 0===n){var a=(0,i.default)(t);return null===a?void 0:s(a,e,r)}if("value"in n)return n.value;var u=n.get;return void 0!==u?u.call(r):void 0}},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e,r){var n=r(137),a=r(39);t.exports=function(t){return n(a(t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(12),i=function(t){return t&&t.__esModule?t:{default:t}}(a),u={},o=void 0;u.plane=function(t,e,r){for(var n=arguments.length<=3||void 0===arguments[3]?"xy":arguments[3],a=arguments.length<=4||void 0===arguments[4]?4:arguments[4],u=[],o=[],s=[],l=[],f=t/r,h=e/r,c=1/r,d=.5*-t,v=.5*-e,_=0,m=0;r>m;m++)for(var p=0;r>p;p++){var M=f*m+d,x=h*p+v,g=m/r,E=p/r;"xz"===n?(u.push([M,0,x+h]),u.push([M+f,0,x+h]),u.push([M+f,0,x]),u.push([M,0,x]),o.push([g,1-(E+c)]),o.push([g+c,1-(E+c)]),o.push([g+c,1-E]),o.push([g,1-E]),l.push([0,1,0]),l.push([0,1,0]),l.push([0,1,0]),l.push([0,1,0])):"yz"===n?(u.push([0,x,M]),u.push([0,x,M+f]),u.push([0,x+h,M+f]),u.push([0,x+h,M]),o.push([g,E]),o.push([g+c,E]),o.push([g+c,E+c]),o.push([g,E+c]),l.push([1,0,0]),l.push([1,0,0]),l.push([1,0,0]),l.push([1,0,0])):(u.push([M,x,0]),u.push([M+f,x,0]),u.push([M+f,x+h,0]),u.push([M,x+h,0]),o.push([g,E]),o.push([g+c,E]),o.push([g+c,E+c]),o.push([g,E+c]),l.push([0,0,1]),l.push([0,0,1]),l.push([0,0,1]),l.push([0,0,1])),s.push(4*_+0),s.push(4*_+1),s.push(4*_+2),s.push(4*_+0),s.push(4*_+2),s.push(4*_+3),_++}var b=new i.default(a);return b.bufferVertex(u),b.bufferTexCoord(o),b.bufferIndex(s),b.bufferNormal(l),b},u.sphere=function(t,e){function r(r,n){var a=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],i=r/e*Math.PI-.5*Math.PI,u=n/e*Math.PI*2,o=a?1:t,s=[];s[1]=Math.sin(i)*o;var l=Math.cos(i)*o;s[0]=Math.cos(u)*l,s[2]=Math.sin(u)*l;var f=1e4;return s[0]=Math.floor(s[0]*f)/f,s[1]=Math.floor(s[1]*f)/f,s[2]=Math.floor(s[2]*f)/f,s}for(var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],a=arguments.length<=3||void 0===arguments[3]?4:arguments[3],u=[],o=[],s=[],l=[],f=1/e,h=0,c=0;e>c;c++)for(var d=0;e>d;d++){u.push(r(c,d)),u.push(r(c+1,d)),u.push(r(c+1,d+1)),u.push(r(c,d+1)),l.push(r(c,d,!0)),l.push(r(c+1,d,!0)),l.push(r(c+1,d+1,!0)),l.push(r(c,d+1,!0));var v=d/e,_=c/e;o.push([1-v,_]),o.push([1-v,_+f]),o.push([1-v-f,_+f]),o.push([1-v-f,_]),s.push(4*h+0),s.push(4*h+1),s.push(4*h+2),s.push(4*h+0),s.push(4*h+2),s.push(4*h+3),h++}n&&s.reverse();var m=new i.default(a);return m.bufferVertex(u),m.bufferTexCoord(o),m.bufferIndex(s),m.bufferNormal(l),m},u.cube=function(t,e,r){var n=arguments.length<=3||void 0===arguments[3]?4:arguments[3];e=e||t,r=r||t;var a=t/2,u=e/2,o=r/2,s=[],l=[],f=[],h=[],c=0;s.push([-a,u,-o]),s.push([a,u,-o]),s.push([a,-u,-o]),s.push([-a,-u,-o]),h.push([0,0,-1]),h.push([0,0,-1]),h.push([0,0,-1]),h.push([0,0,-1]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([a,u,-o]),s.push([a,u,o]),s.push([a,-u,o]),s.push([a,-u,-o]),h.push([1,0,0]),h.push([1,0,0]),h.push([1,0,0]),h.push([1,0,0]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([a,u,o]),s.push([-a,u,o]),s.push([-a,-u,o]),s.push([a,-u,o]),h.push([0,0,1]),h.push([0,0,1]),h.push([0,0,1]),h.push([0,0,1]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([-a,u,o]),s.push([-a,u,-o]),s.push([-a,-u,-o]),s.push([-a,-u,o]),h.push([-1,0,0]),h.push([-1,0,0]),h.push([-1,0,0]),h.push([-1,0,0]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([a,u,-o]),s.push([-a,u,-o]),s.push([-a,u,o]),s.push([a,u,o]),h.push([0,1,0]),h.push([0,1,0]),h.push([0,1,0]),h.push([0,1,0]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++,s.push([a,-u,o]),s.push([-a,-u,o]),s.push([-a,-u,-o]),s.push([a,-u,-o]),h.push([0,-1,0]),h.push([0,-1,0]),h.push([0,-1,0]),h.push([0,-1,0]),l.push([0,0]),l.push([1,0]),l.push([1,1]),l.push([0,1]),f.push(4*c+0),f.push(4*c+1),f.push(4*c+2),f.push(4*c+0),f.push(4*c+2),f.push(4*c+3),c++;var d=new i.default(n);return d.bufferVertex(s),d.bufferTexCoord(l),d.bufferIndex(f),d.bufferNormal(h),d},u.skybox=function(t){var e=arguments.length<=1||void 0===arguments[1]?4:arguments[1],r=[],n=[],a=[],u=[],o=0;r.push([t,t,-t]),r.push([-t,t,-t]),r.push([-t,-t,-t]),r.push([t,-t,-t]),u.push([0,0,-1]),u.push([0,0,-1]),u.push([0,0,-1]),u.push([0,0,-1]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([t,-t,-t]),r.push([t,-t,t]),r.push([t,t,t]),r.push([t,t,-t]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([-t,t,t]),r.push([t,t,t]),r.push([t,-t,t]),r.push([-t,-t,t]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([-t,-t,t]),r.push([-t,-t,-t]),r.push([-t,t,-t]),r.push([-t,t,t]),u.push([-1,0,0]),u.push([-1,0,0]),u.push([-1,0,0]),u.push([-1,0,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([t,t,t]),r.push([-t,t,t]),r.push([-t,t,-t]),r.push([t,t,-t]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3),o++,r.push([t,-t,-t]),r.push([-t,-t,-t]),r.push([-t,-t,t]),r.push([t,-t,t]),u.push([0,-1,0]),u.push([0,-1,0]),u.push([0,-1,0]),u.push([0,-1,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),a.push(4*o+0),a.push(4*o+1),a.push(4*o+2),a.push(4*o+0),a.push(4*o+2),a.push(4*o+3);var s=new i.default(e);return s.bufferVertex(r),s.bufferTexCoord(n),s.bufferIndex(a),s.bufferNormal(u),s},u.bigTriangle=function(){if(!o){var t=[2,1,0],e=[[-1,-1],[-1,4],[4,-1]];o=new i.default,o.bufferData(e,"aPosition",2),o.bufferIndex(t)}return o},e.default=u,t.exports=e.default},function(t,e,r){t.exports=!r(25)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(24),a=r(70),i=r(50),u=Object.defineProperty;e.f=r(17)?Object.defineProperty:function(t,e,r){if(n(t),e=i(e,!0),n(r),a)try{return u(t,e,r)}catch(o){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(14),a=r(10),i=r(68),u=r(21),o="prototype",s=function(t,e,r){var l,f,h,c=t&s.F,d=t&s.G,v=t&s.S,_=t&s.P,m=t&s.B,p=t&s.W,M=d?a:a[e]||(a[e]={}),x=M[o],g=d?n:v?n[e]:(n[e]||{})[o];d&&(r=e);for(l in r)(f=!c&&g&&void 0!==g[l])&&l in M||(h=f?g[l]:r[l],M[l]=d&&"function"!=typeof g[l]?r[l]:m&&f?i(h,n):p&&g[l]==h?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e[o]=t[o],e}(h):_&&"function"==typeof h?i(Function.call,h):h,_&&((M.virtual||(M.virtual={}))[l]=h,t&s.R&&x&&!x[l]&&u(x,l,h)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,r){var n=r(19),a=r(29);t.exports=r(17)?function(t,e,r){return n.f(t,e,a(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(48)("wks"),a=r(30),i=r(14).Symbol,u="function"==typeof i;(t.exports=function(t){return n[t]||(n[t]=u&&i[t]||(u?i:a)("Symbol."+t))}).store=n},function(t,e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=function(){function t(){r(this,t),this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,this._loop()}return n(t,[{key:"addEF",value:function(t,e){e=e||[];var r=this._idTable;return this._enterframeTasks[r]={func:t,params:e},this._idTable++,r}},{key:"removeEF",value:function(t){return void 0!==this._enterframeTasks[t]&&(this._enterframeTasks[t]=null),-1}},{key:"delay",value:function(t,e,r){var n=(new Date).getTime(),a={func:t,params:e,delay:r,time:n};this._delayTasks.push(a)}},{key:"defer",value:function(t,e){var r={func:t,params:e};this._deferTasks.push(r)}},{key:"next",value:function(t,e){var r={func:t,params:e};this._nextTasks.push(r)}},{key:"usurp",value:function(t,e){var r={func:t,params:e};this._usurpTask.push(r)}},{key:"_process",value:function(){var t=0,e=void 0,r=void 0,n=void 0;for(t=0;t<this._enterframeTasks.length;t++)null!==(e=this._enterframeTasks[t])&&void 0!==e&&e.func(e.params);for(;this._highTasks.length>0;)e=this._highTasks.pop(),e.func(e.params);var i=(new Date).getTime();for(t=0;t<this._delayTasks.length;t++)e=this._delayTasks[t],i-e.time>e.delay&&(e.func(e.params),this._delayTasks.splice(t,1));for(i=(new Date).getTime(),r=1e3/60;this._deferTasks.length>0;){if(e=this._deferTasks.shift(),n=(new Date).getTime(),!(r>n-i)){this._deferTasks.unshift(e);break}e.func(e.params)}for(i=(new Date).getTime(),r=1e3/60;this._usurpTask.length>0;)e=this._usurpTask.shift(),n=(new Date).getTime(),r>n-i&&e.func(e.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[]}},{key:"_loop",value:function(){var t=this;this._process(),window.requestAnimationFrame(function(){return t._loop()})}}]),t}(),u=new i;e.default=u},function(t,e,r){var n=r(26);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(7),l=n(s),f=r(32),h=n(f),c=r(65),d=n(c),v=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?0:arguments[1],n=arguments.length<=2||void 0===arguments[2]?0:arguments[2];arguments.length<=3||void 0===arguments[3]||arguments[3],(0,i.default)(this,t),this.shader=new l.default(d.default.bigTriangleVert,e),this._width=r,this._height=n,this._uniforms={},this._hasOwnFbo=this._width>0&&this._width>0,this._uniforms={},this._hasOwnFbo&&(this._fbo=new h.default(this._width,this.height,mParmas))}return(0,o.default)(t,[{key:"uniform",value:function(t,e){this._uniforms[t]=e}},{key:"render",value:function(t){this.shader.bind(),this.shader.uniform("texture","uniform1i",0),t.bind(0),this.shader.uniform(this._uniforms)}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"fbo",get:function(){return this._fbo}},{key:"hasFbo",get:function(){return this._hasOwnFbo}}]),t}();e.default=v,t.exports=e.default},function(t,e,r){var n=r(75),a=r(40);t.exports=Object.keys||function(t){return n(t,a)}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports="// simpleColor.frag\n\n#define SHADER_NAME SIMPLE_COLOR\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(color, opacity);\n}"},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t){return 0!==t&&!(t&t-1)}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),u=n(i),o=r(2),s=n(o),l=r(3),f=n(l),h=r(33),c=n(h),d=void 0,v=void 0,_=!1,m=void 0,p=function(){return!!f.default.webgl2||!!(m=f.default.getExtension("WEBGL_draw_buffers"))},M=function(){function t(e,r){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];(0,u.default)(this,t),d=f.default.gl,v=f.default.checkExtension("WEBGL_depth_texture"),this.width=e,this.height=r,this._multipleTargets=i,this.magFilter=n.magFilter||d.LINEAR,this.minFilter=n.minFilter||d.LINEAR_MIPMAP_NEAREST,this.wrapS=n.wrapS||d.CLAMP_TO_EDGE,this.wrapT=n.wrapT||d.CLAMP_TO_EDGE,this.useDepth=n.useDepth||!0,this.useStencil=n.useStencil||!1,this.texelType=n.type,a(this.width)&&a(this.height)||(this.wrapS=this.wrapT=d.CLAMP_TO_EDGE,this.minFilter===d.LINEAR_MIPMAP_NEAREST&&(this.minFilter=d.LINEAR)),_||p(),this._init()}return(0,s.default)(t,[{key:"_init",value:function(){var t=d.UNSIGNED_BYTE;if(this.texelType&&(t=this.texelType),this.texelType=t,this._textures=[],this._initTextures(),this.frameBuffer=d.createFramebuffer(),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer),f.default.webgl2){for(var e=[],r=0;r<this._textures.length;r++)d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.COLOR_ATTACHMENT0+r,d.TEXTURE_2D,this._textures[r].texture,0),e.push(d["COLOR_ATTACHMENT"+r]);d.drawBuffers(e),d.framebufferTexture2D(d.DRAW_FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,this.glDepthTexture.texture,0)}else{for(var n=0;n<this._textures.length;n++)d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0+n,d.TEXTURE_2D,this._textures[n].texture,0);this._multipleTargets&&m.drawBuffersWEBGL([m.COLOR_ATTACHMENT0_WEBGL,m.COLOR_ATTACHMENT1_WEBGL,m.COLOR_ATTACHMENT2_WEBGL,m.COLOR_ATTACHMENT3_WEBGL]),v&&d.framebufferTexture2D(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.TEXTURE_2D,this.glDepthTexture.texture,0)}if(this.minFilter===d.LINEAR_MIPMAP_NEAREST)for(var a=0;a<this._textures.length;a++)d.bindTexture(d.TEXTURE_2D,this._textures[a].texture),d.generateMipmap(d.TEXTURE_2D);d.checkFramebufferStatus(d.FRAMEBUFFER);d.FRAMEBUFFER_COMPLETE,d.bindTexture(d.TEXTURE_2D,null),d.bindRenderbuffer(d.RENDERBUFFER,null),d.bindFramebuffer(d.FRAMEBUFFER,null),this.clear()}},{key:"_initTextures",value:function(){for(var t=(this._multipleTargets,0);4>t;t++){var e=this._createTexture();this._textures.push(e)}f.default.webgl2?this.glDepthTexture=this._createTexture(d.DEPTH_COMPONENT16,d.UNSIGNED_SHORT,d.DEPTH_COMPONENT,!0):this.glDepthTexture=this._createTexture(d.DEPTH_COMPONENT,d.UNSIGNED_SHORT)}},{key:"_createTexture",value:function(t,e,r){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===t&&(t=d.RGBA),void 0===e&&(e=this.texelType),r||(r=t);var a=d.createTexture(),i=new c.default(a,!0),u=n?f.default.NEAREST:this.magFilter,o=n?f.default.NEAREST:this.minFilter;return d.bindTexture(d.TEXTURE_2D,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,u),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,o),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,this.wrapS),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,this.wrapT),d.texImage2D(d.TEXTURE_2D,0,t,this.width,this.height,0,r,e,null),d.bindTexture(d.TEXTURE_2D,null),i}},{key:"bind",value:function(){(arguments.length<=0||void 0===arguments[0]||arguments[0])&&f.default.viewport(0,0,this.width,this.height),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer)}},{key:"unbind",value:function(){(arguments.length<=0||void 0===arguments[0]||arguments[0])&&f.default.viewport(0,0,f.default.width,f.default.height),d.bindFramebuffer(d.FRAMEBUFFER,null)}},{key:"clear",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0],e=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=arguments.length<=3||void 0===arguments[3]?0:arguments[3];this.bind(),f.default.clear(t,e,r,n),this.unbind()}},{key:"getTexture",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return this._textures[t]}},{key:"getDepthTexture",value:function(){return this.glDepthTexture}},{key:"minFilter",value:function(t){return t!==d.LINEAR&&t!==d.NEAREST&&t!==d.LINEAR_MIPMAP_NEAREST?this:(this.minFilter=t,this)}},{key:"magFilter",value:function(t){return t!==d.LINEAR&&t!==d.NEAREST&&t!==d.LINEAR_MIPMAP_NEAREST?this:(this.magFilter=t,this)}},{key:"wrapS",value:function(t){return t!==d.CLAMP_TO_EDGE&&t!==d.REPEAT&&t!==d.MIRRORED_REPEAT?this:(this.wrapS=t,this)}},{key:"wrapT",value:function(t){return t!==d.CLAMP_TO_EDGE&&t!==d.REPEAT&&t!==d.MIRRORED_REPEAT?this:(this.wrapT=t,this)}}]),t}();e.default=M,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t){return 0!==t&&!(t&t-1)}function i(t){var e=t.width||t.videoWidth,r=t.height||t.videoHeight;return!(!e||!r)&&(a(e)&&a(r))}Object.defineProperty(e,"__esModule",{value:!0});var u=r(1),o=n(u),s=r(2),l=n(s),f=r(3),h=n(f),c=void 0,d=function(){function t(e){var r=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if((0,o.default)(this,t),c=h.default.gl,r)this._texture=e;else{this._mSource=e,this._texture=c.createTexture(),this._isVideo="VIDEO"===e.tagName,this._premultiplyAlpha=!0,this._magFilter=n.magFilter||c.LINEAR,this._minFilter=n.minFilter||c.NEAREST_MIPMAP_LINEAR,this._wrapS=n.wrapS||c.MIRRORED_REPEAT,this._wrapT=n.wrapT||c.MIRRORED_REPEAT;e.width||e.videoWidth?i(e)||(this._wrapS=this._wrapT=c.CLAMP_TO_EDGE,this._minFilter===c.NEAREST_MIPMAP_LINEAR&&(this._minFilter=c.LINEAR)):(this._wrapS=this._wrapT=c.CLAMP_TO_EDGE,this._minFilter===c.NEAREST_MIPMAP_LINEAR&&(this._minFilter=c.LINEAR)),c.bindTexture(c.TEXTURE_2D,this._texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),e.exposure?c.texImage2D(c.TEXTURE_2D,0,c.RGBA,e.shape[0],e.shape[1],0,c.RGBA,c.FLOAT,e.data):c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this._magFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this._minFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT);var u=h.default.getExtension("EXT_texture_filter_anisotropic");if(u){var s=c.getParameter(u.MAX_TEXTURE_MAX_ANISOTROPY_EXT);c.texParameterf(c.TEXTURE_2D,u.TEXTURE_MAX_ANISOTROPY_EXT,s)}this._canGenerateMipmap()&&c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null)}}return(0,l.default)(t,[{key:"generateMipmap",value:function(){this._canGenerateMipmap()&&(c.bindTexture(c.TEXTURE_2D,this._texture),c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null))}},{key:"updateTexture",value:function(t){t&&(this._mSource=t),c.bindTexture(c.TEXTURE_2D,this._texture),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!0),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,this._mSource),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this._magFilter),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this._minFilter),this._canGenerateMipmap()&&c.generateMipmap(c.TEXTURE_2D),c.bindTexture(c.TEXTURE_2D,null)}},{key:"bind",value:function(t){void 0===t&&(t=0),h.default.shader&&(c.activeTexture(c.TEXTURE0+t),c.bindTexture(c.TEXTURE_2D,this._texture),this._bindIndex=t)}},{key:"_canGenerateMipmap",value:function(){return this._minFilter===c.LINEAR_MIPMAP_NEAREST||this._minFilter===c.NEAREST_MIPMAP_LINEAR||this._minFilter===c.LINEAR_MIPMAP_LINEAR||this._minFilter===c.NEAREST_MIPMAP_NEAREST}},{key:"minFilter",set:function(t){return t!==c.LINEAR&&t!==c.NEAREST&&t!==c.NEAREST_MIPMAP_LINEAR&&t!==c.NEAREST_MIPMAP_LINEAR&&t!==c.LINEAR_MIPMAP_LINEAR&&t!==c.NEAREST_MIPMAP_NEAREST?this:(this._minFilter=t,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,this._minFilter),void c.bindTexture(c.TEXTURE_2D,null))},get:function(){return this._minFilter}},{key:"magFilter",set:function(t){return t!==c.LINEAR&&t!==c.NEAREST?this:(this._magFilter=t,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,this._magFilter),void c.bindTexture(c.TEXTURE_2D,null))},get:function(){return this._magFilter}},{key:"wrapS",set:function(t){return t!==c.CLAMP_TO_EDGE&&t!==c.REPEAT&&t!==c.MIRRORED_REPEAT?this:(this._wrapS=t,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,this._wrapS),void c.bindTexture(c.TEXTURE_2D,null))},get:function(){return this._wrapS}},{key:"wrapT",set:function(t){return t!==c.CLAMP_TO_EDGE&&t!==c.REPEAT&&t!==c.MIRRORED_REPEAT?this:(this._wrapT=t,c.bindTexture(c.TEXTURE_2D,this._texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,this._wrapT),void c.bindTexture(c.TEXTURE_2D,null))},get:function(){return this._wrapT}},{key:"premultiplyAlpha",set:function(t){this._premultiplyAlpha=t,c.bindTexture(c.TEXTURE_2D,this._texture),c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),c.bindTexture(c.TEXTURE_2D,null)},get:function(){return this._premultiplyAlpha}},{key:"texture",get:function(){return this._texture}}]),t}(),v=void 0,_=void 0,m=void 0;d.whiteTexture=function(){if(void 0===v){var t=document.createElement("canvas");t.width=t.height=4;var e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,4,4),v=new d(t)}return v},d.greyTexture=function(){if(void 0===_){var t=document.createElement("canvas");t.width=t.height=4;var e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),_=new d(t)}return _},d.blackTexture=function(){if(void 0===m){var t=document.createElement("canvas");t.width=t.height=4;var e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),m=new d(t)}return m},e.default=d,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=function(){function t(){(0,i.default)(this,t),this._matrix=l.default.mat4.create(),this._quat=l.default.quat.create(),this._orientation=l.default.mat4.create(),this._projection=l.default.mat4.create(),this.position=l.default.vec3.create()}return(0,o.default)(t,[{key:"lookAt",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?[0,1,0]:arguments[2];this._eye=vec3.clone(t),this._center=vec3.clone(e),l.default.vec3.copy(this.position,t),l.default.mat4.identity(this._matrix),l.default.mat4.lookAt(this._matrix,t,e,r)}},{key:"setFromOrientation",value:function(t,e,r,n){l.default.quat.set(this._quat,t,e,r,n),l.default.mat4.fromQuat(this._orientation,this._quat),l.default.mat4.translate(this._matrix,this._orientation,this.positionOffset)}},{key:"setProjection",value:function(t){this._projection=l.default.mat4.clone(t)}},{key:"setView",value:function(t){this._matrix=l.default.mat4.clone(t)}},{key:"setFromViewProj",value:function(t,e){this.setView(t),this.setProjection(e)}},{key:"matrix",get:function(){return this._matrix}},{key:"viewMatrix",get:function(){return this._matrix}},{key:"projection",get:function(){return this._projection}},{key:"projectionMatrix",get:function(){return this._projection}},{key:"eye",get:function(){return this._eye}},{key:"center",get:function(){return this._center}}]),t}();e.default=f,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),v=r(34),_=n(v),m=r(58),p=n(m),M=r(8),x=n(M),g=x.default.mat4,E=x.default.vec3,b=g.create(),y=E.create(),S=function(t){function e(){return(0,o.default)(this,e),(0,h.default)(this,(0,i.default)(e).apply(this,arguments))}return(0,d.default)(e,t),(0,l.default)(e,[{key:"setPerspective",value:function(t,e,r,n){this._fov=t,this._near=r,this._far=n,this._aspectRatio=e,x.default.mat4.perspective(this._projection,t,e,r,n)}},{key:"setAspectRatio",value:function(t){this._aspectRatio=t,x.default.mat4.perspective(this.projection,this._fov,t,this._near,this._far)}},{key:"generateRay",value:function(t,e){var r=this.projectionMatrix,n=this.viewMatrix;return g.multiply(b,r,n),g.invert(b,b),E.transformMat4(y,t,b),E.sub(y,y,this.position),E.normalize(y,y),e?(e.origin=this.position,e.direction=y):e=new p.default(this.position,y),e}}]),e}(_.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=function(){function t(){var e=this,r=!(arguments.length<=0||void 0===arguments[0])&&arguments[0];(0,i.default)(this,t),this._req=new XMLHttpRequest,this._req.addEventListener("load",function(t){return e._onLoaded(t)}),this._req.addEventListener("progress",function(t){return e._onProgress(t)}),r&&(this._req.responseType="arraybuffer")}return(0,o.default)(t,[{key:"load",value:function(t,e){this._callback=e,this._req.open("GET",t),this._req.send()}},{key:"_onLoaded",value:function(){this._callback(this._req.response)}},{key:"_onProgress",value:function(){}}]),t}();e.default=s,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(23),l=n(s),f=function(){function t(e){var r=this,n=arguments.length<=1||void 0===arguments[1]?.1:arguments[1];(0,i.default)(this,t),this.easing=n,this._value=e,this._targetValue=e,this._efIndex=l.default.addEF(function(){return r._update()})}return(0,o.default)(t,[{key:"_update",value:function(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue)}},{key:"setTo",value:function(t){this._targetValue=this._value=t}},{key:"add",value:function(t){this._targetValue+=t}},{key:"limit",value:function(t,e){return t>e?void this.limit(e,t):(this._min=t,this._max=e,void this._checkLimit())}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){l.default.removeEF(this._efIndex)}},{key:"value",set:function(t){this._targetValue=t},get:function(){return this._value}},{key:"targetValue",get:function(){return this._targetValue}}]),t}();e.default=f,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=r(122),i=n(a),u=r(121),o=n(u),s="function"==typeof o.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default?"symbol":typeof t};e.default="function"==typeof o.default&&"symbol"===s(i.default)?function(t){return void 0===t?"undefined":s(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default?"symbol":void 0===t?"undefined":s(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports={}},function(t,e){t.exports=!0},function(t,e,r){var n=r(24),a=r(143),i=r(40),u=r(47)("IE_PROTO"),o=function(){},s="prototype",l=function(){var t,e=r(69)("iframe"),n=i.length;for(e.style.display="none",r(136).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l[s][i[n]];return l()};t.exports=Object.create||function(t,e){var r;return null!==t?(o[s]=n(t),r=new o,o[s]=null,r[u]=t):r=l(),void 0===e?r:a(r,e)}},function(t,e,r){var n=r(45),a=r(29),i=r(15),u=r(50),o=r(18),s=r(70),l=Object.getOwnPropertyDescriptor;e.f=r(17)?l:function(t,e){if(t=i(t),e=u(e,!0),s)try{return l(t,e)}catch(r){}return o(t,e)?a(!n.f.call(t,e),t[e]):void 0}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(19).f,a=r(18),i=r(22)("toStringTag");t.exports=function(t,e,r){t&&!a(t=r?t:t.prototype,i)&&n(t,i,{configurable:!0,value:e})}},function(t,e,r){var n=r(48)("keys"),a=r(30);t.exports=function(t){return n[t]||(n[t]=a(t))}},function(t,e,r){var n=r(14),a="__core-js_shared__",i=n[a]||(n[a]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(26);t.exports=function(t,e){if(!n(t))return t;var r,a;if(e&&"function"==typeof(r=t.toString)&&!n(a=r.call(t)))return a;if("function"==typeof(r=t.valueOf)&&!n(a=r.call(t)))return a;if(!e&&"function"==typeof(r=t.toString)&&!n(a=r.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(14),a=r(10),i=r(42),u=r(52),o=r(19).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=i?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:u.f(t)})}},function(t,e,r){e.f=r(22)},function(t,e){t.exports="// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}"},function(t,e){t.exports="// bigTriangle.vert\n\n#define SHADER_NAME BIG_TRIANGLE_VERTEX\n\nprecision mediump float;\n#define GLSLIFY 1\nattribute vec2 aPosition;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTextureCoord = aPosition * .5 + .5;\n}"},function(t,e){t.exports="// copy.frag\n\n#define SHADER_NAME COPY_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}"},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=r(167),h=n(f),c=void 0,m=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if((0,i.default)(this,t),c=l.default.gl,n)return void(this.texture=e);var a=e.length>6;e[0].mipmapCount&&(a=e[0].mipmapCount>1),this.texture=c.createTexture(),this.magFilter=r.magFilter||c.LINEAR,this.minFilter=r.minFilter||c.LINEAR_MIPMAP_LINEAR,this.wrapS=r.wrapS||c.CLAMP_TO_EDGE,this.wrapT=r.wrapT||c.CLAMP_TO_EDGE,a||this.minFilter!=c.LINEAR_MIPMAP_LINEAR||(this.minFilter=c.LINEAR),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture);var u=[c.TEXTURE_CUBE_MAP_POSITIVE_X,c.TEXTURE_CUBE_MAP_NEGATIVE_X,c.TEXTURE_CUBE_MAP_POSITIVE_Y,c.TEXTURE_CUBE_MAP_NEGATIVE_Y,c.TEXTURE_CUBE_MAP_POSITIVE_Z,c.TEXTURE_CUBE_MAP_NEGATIVE_Z],o=1,s=0;if(o=e.length/6,this.numLevels=o,a)for(var f=0;6>f;f++)for(var h=0;o>h;h++)c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),s=f*o+h,e[s].shape?c.texImage2D(u[f],h,c.RGBA,e[s].shape[0],e[s].shape[1],0,c.RGBA,c.FLOAT,e[s].data):c.texImage2D(u[f],h,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e[s]),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter);else{for(var d=0,v=0;6>v;v++)d=v*o,c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),e[d].shape?c.texImage2D(u[v],0,c.RGBA,e[d].shape[0],e[d].shape[1],0,c.RGBA,c.FLOAT,e[d].data):c.texImage2D(u[v],0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,e[d]),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter);c.generateMipmap(c.TEXTURE_CUBE_MAP)}c.bindTexture(c.TEXTURE_CUBE_MAP,null)}return(0,o.default)(t,[{key:"bind",value:function(){var t=arguments.length<=0||void 0===arguments[0]?0:arguments[0];l.default.shader&&(c.activeTexture(c.TEXTURE0+t),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture),c.uniform1i(l.default.shader.uniformTextures[t],t),this._bindIndex=t)}},{key:"unbind",value:function(){c.bindTexture(c.TEXTURE_CUBE_MAP,null)}}]),t}();m.parseDDS=function(t){var e=(0,h.default)(t),r=e.flags,n=new Int32Array(t,0,31),a=1;131072&r&&(a=Math.max(1,n[7]));var i=e.images.map(function(e){return{data:new Float32Array(t.slice(e.offset,e.offset+e.length)),shape:e.shape,mipmapCount:a}});return new m(i)},e.default=m,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),v=r(34),_=n(v),m=r(8),p=n(m),M=function(t){function e(){(0,o.default)(this,e);var t=(0,h.default)(this,(0,i.default)(e).call(this)),r=p.default.vec3.clone([0,0,15]),n=p.default.vec3.create(),a=p.default.vec3.clone([0,-1,0]);return t.lookAt(r,n,a),t.ortho(1,-1,1,-1),t}return(0,d.default)(e,t),(0,l.default)(e,[{key:"setBoundary",value:function(t,e,r,n){var a=arguments.length<=4||void 0===arguments[4]?.1:arguments[4],i=arguments.length<=5||void 0===arguments[5]?100:arguments[5];this.ortho(t,e,r,n,a,i)}},{key:"ortho",value:function(t,e,r,n){var a=arguments.length<=4||void 0===arguments[4]?.1:arguments[4],i=arguments.length<=5||void 0===arguments[5]?100:arguments[5];this.left=t,this.right=e,this.top=r,this.bottom=n,p.default.mat4.ortho(this._projection,t,e,r,n,a,i)}}]),e}(_.default);e.default=M,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=(l.default.mat4,l.default.vec3),h=f.create(),c=f.create(),d=f.create(),v=f.create(),_=f.create(),m=f.create(),p=f.create(),M=f.create(),x=function(){function t(e,r){(0,i.default)(this,t),this.origin=f.clone(e),this.direction=f.clone(r)}return(0,o.default)(t,[{key:"at",value:function(t){return f.copy(v,this.direction),f.scale(v,v,t),f.add(v,v,this.origin),v}},{key:"lookAt",value:function(t){f.sub(this.direction,t,this.origin),f.normalize(this.origin,this.origin)}},{key:"closestPointToPoint",value:function(t){var e=f.create();f.sub(t,this.origin);var r=f.dot(e,this.direction);return 0>r?f.clone(this.origin):(f.copy(e,this.direction),f.scale(e,e,r),f.add(e,e,this.origin),e)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=f.create();f.sub(e,t,this.origin);var r=f.dot(e,this.direction);return 0>r?f.squaredDistance(this.origin,t):(f.copy(e,this.direction),f.scale(e,e,r),f.add(e,e,this.origin),f.squaredDistance(e,t))}},{key:"intersectsSphere",value:function(t,e){return this.distanceToPoint(t)<=e}},{key:"intersectSphere",value:function(t,e){var r=f.create();f.sub(r,t,this.origin);var n=f.dot(r,this.direction),a=f.dot(r,r)-n*n,i=e*e;if(a>i)return null;var u=Math.sqrt(i-a),o=n-u,s=n+u;return 0>o&&0>s?null:0>o?this.at(s):this.at(o)}},{key:"distanceToPlane",value:function(t,e){f.dot(e,this.direction)}},{key:"intersectTriangle",value:function(t,e,r){var n=arguments.length<=3||void 0===arguments[3]||arguments[3];f.copy(h,t),f.copy(c,e),f.copy(d,r),f.sub(_,c,h),f.sub(m,d,h),f.cross(p,_,m);var a=f.dot(this.direction,p),i=void 0;if(a>0){if(n)return null;i=1}else{if(!(0>a))return null;i=-1,a=-a}f.sub(M,this.origin,h),f.cross(m,M,m);var u=i*f.dot(this.direction,m);if(0>u)return null;f.cross(_,_,M);var o=i*f.dot(this.direction,_);if(0>o)return null;if(u+o>a)return null;var s=-i*f.dot(M,p);return 0>s?null:this.at(s/a)}}]),t}();e.default=x,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=function(){function t(){(0,i.default)(this,t),this._needUpdate=!0,this._x=0,this._y=0,this._z=0,this._sx=1,this._sy=1,this._sz=1,this._rx=0,this._ry=0,this._rz=0,this._position=s.vec3.create(),this._scale=s.vec3.fromValues(1,1,1),this._rotation=s.vec3.create(),this._matrix=s.mat4.create(),this._matrixRotation=s.mat4.create(),this._matrixScale=s.mat4.create(),this._matrixTranslation=s.mat4.create(),this._matrixQuaternion=s.mat4.create(),this._quat=s.quat.create()}return(0,o.default)(t,[{key:"_update",value:function(){s.vec3.set(this._scale,this._sx,this._sy,this._sz),s.vec3.set(this._rotation,this._rx,this._ry,this._rz),s.vec3.set(this._position,this._x,this._y,this._z),s.mat4.identity(this._matrixTranslation,this._matrixTranslation),s.mat4.identity(this._matrixScale,this._matrixScale),s.mat4.identity(this._matrixRotation,this._matrixRotation),s.mat4.rotateX(this._matrixRotation,this._matrixRotation,this._rx),s.mat4.rotateY(this._matrixRotation,this._matrixRotation,this._ry),s.mat4.rotateZ(this._matrixRotation,this._matrixRotation,this._rz),s.mat4.fromQuat(this._matrixQuaternion,this._quat),s.mat4.mul(this._matrixRotation,this._matrixQuaternion,this._matrixRotation),s.mat4.scale(this._matrixScale,this._matrixScale,this._scale),s.mat4.translate(this._matrixTranslation,this._matrixTranslation,this._position),s.mat4.mul(this._matrix,this._matrixTranslation,this._matrixRotation),s.mat4.mul(this._matrix,this._matrix,this._matrixScale),this._needUpdate=!1}},{key:"setRotationFromQuaternion",value:function(t){s.quat.copy(this._quat,t),this._needUpdate=!0}},{key:"matrix",get:function(){return this._needUpdate&&this._update(),this._matrix}},{key:"x",get:function(){return this._x},set:function(t){this._needUpdate=!0,this._x=t}},{key:"y",get:function(){return this._y},set:function(t){this._needUpdate=!0,this._y=t}},{key:"z",get:function(){return this._z},set:function(t){this._needUpdate=!0,this._z=t}},{key:"scaleX",get:function(){return this._sx},set:function(t){this._needUpdate=!0,this._sx=t}},{key:"scaleY",get:function(){return this._sy},set:function(t){this._needUpdate=!0,this._sy=t}},{key:"scaleZ",get:function(){return this._sz},set:function(t){this._needUpdate=!0,this._sz=t}},{key:"rotationX",get:function(){return this._rx},set:function(t){this._needUpdate=!0,this._rx=t}},{key:"rotationY",get:function(){return this._ry},set:function(t){this._needUpdate=!0,this._ry=t}},{key:"rotationZ",get:function(){return this._rz},set:function(t){this._needUpdate=!0,this._rz=t}}]),t}();e.default=l,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(6),l=n(s),f=r(5),h=n(f),c=r(3),d=n(c),v=r(27),_=n(v),m=r(172),p=r(173),M=r(171),x=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?9:arguments[0],r=arguments[1],n=arguments[2],a=arguments[3],u=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];(0,o.default)(this,e);var s=void 0;switch(t){case 5:default:s=m;break;case 9:s=p;break;case 13:s=M}var f=(0,l.default)(this,(0,i.default)(e).call(this,s,n,a,u));return f.uniform("uDirection",r),f.uniform("uResolution",[d.default.width,d.default.height]),f}return(0,h.default)(e,t),e}(_.default);e.default=x,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(6),l=n(s),f=r(5),h=n(f),c=r(60),d=n(c),v=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?9:arguments[0],r=arguments[1],n=arguments[2],a=arguments[3];return(0,o.default)(this,e),(0,l.default)(this,(0,i.default)(e).call(this,t,[1,0],r,n,a))}return(0,h.default)(e,t),e}(d.default);e.default=v,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=function(){function t(){(0,i.default)(this,t),this._passes=[]}return(0,o.default)(t,[{key:"addPass",value:function(t){this._passes.push(t)}},{key:"passes",get:function(){return this._passes}}]),t}();e.default=s,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(6),l=n(s),f=r(5),h=n(f),c=r(60),d=n(c),v=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?9:arguments[0],r=arguments[1],n=arguments[2],a=arguments[3];return(0,o.default)(this,e),(0,l.default)(this,(0,i.default)(e).call(this,t,[0,1],r,n,a))}return(0,h.default)(e,t),e}(d.default);e.default=v,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(37),l=n(s),f=r(23),h=n(f),c=r(8),d=n(c),v=function(t,e){var r=e||{};return t.touches?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):(r.x=t.clientX,r.y=t.clientY),r},_=function(){function t(e){var r=this,n=arguments.length<=1||void 0===arguments[1]?window:arguments[1],a=arguments.length<=2||void 0===arguments[2]?500:arguments[2];(0,i.default)(this,t),this._target=e,this._listenerTarget=n,this._mouse={},this._preMouse={},this.center=d.default.vec3.create(),this._up=d.default.vec3.fromValues(0,1,0),this.radius=new l.default(a),this.position=d.default.vec3.fromValues(0,0,this.radius.value),this.positionOffset=d.default.vec3.create(),this._rx=new l.default(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new l.default(0),this._preRX=0,this._preRY=0,this._isLockZoom=!1,this._isLockRotation=!1,this._isInvert=!1,this.sensitivity=1,this._listenerTarget.addEventListener("mousewheel",function(t){return r._onWheel(t)}),this._listenerTarget.addEventListener("DOMMouseScroll",function(t){return r._onWheel(t)}),this._listenerTarget.addEventListener("mousedown",function(t){return r._onDown(t)}),this._listenerTarget.addEventListener("touchstart",function(t){return r._onDown(t)}),this._listenerTarget.addEventListener("mousemove",function(t){return r._onMove(t)}),this._listenerTarget.addEventListener("touchmove",function(t){return r._onMove(t)}),window.addEventListener("touchend",function(){return r._onUp()}),window.addEventListener("mouseup",function(){return r._onUp()}),h.default.addEF(function(){return r._loop()})}return(0,o.default)(t,[{key:"lock",value:function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];this._isLockZoom=t,this._isLockRotation=t}},{key:"lockZoom",value:function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];this._isLockZoom=t}},{key:"lockRotation",value:function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];this._isLockRotation=t}},{key:"inverseControl",value:function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];this._isInvert=t}},{key:"_onDown",value:function(t){this._isLockRotation||(this._isMouseDown=!0,v(t,this._mouse),v(t,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)}},{key:"_onMove",value:function(t){if(!this._isLockRotation&&(v(t,this._mouse),t.touches&&t.preventDefault(),this._isMouseDown)){var e=-(this._mouse.x-this._preMouse.x);this._isInvert&&(e*=-1),this._ry.value=this._preRY-.01*e*this.sensitivity;var r=-(this._mouse.y-this._preMouse.y);this._isInvert&&(r*=-1),this._rx.value=this._preRX-.01*r*this.sensitivity}}},{key:"_onUp",value:function(){this._isLockRotation||(this._isMouseDown=!1)}},{key:"_onWheel",value:function(t){if(!this._isLockZoom){var e=t.wheelDelta,r=t.detail,n=0;n=r?e?e/r/40*r>0?1:-1:-r/3:e/120,this.radius.add(2*-n)}}},{key:"_loop",value:function(){this._updatePosition(),this._target&&this._updateCamera()}},{key:"_updatePosition",value:function(){this.position[1]=Math.sin(this._rx.value)*this.radius.value;var t=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*t,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*t,d.default.vec3.add(this.position,this.position,this.positionOffset)}},{key:"_updateCamera",value:function(){this._target.lookAt(this.position,this.center,this._up)}},{key:"rx",get:function(){return this._rx}},{key:"ry",get:function(){return this._ry}}]),t}();e.default=_,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(31),i=n(a),u=r(54),o=n(u),s=r(83),l=n(s),f=r(55),h=n(f),c=r(53),d=n(c),v=r(85),_=n(v),m=r(84),p=n(m),M={simpleColorFrag:i.default,bigTriangleVert:o.default,generalVert:l.default,copyFrag:h.default,basicVert:d.default,skyboxVert:_.default,skyboxFrag:p.default};e.default=M,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){return void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[r]&&(e.cacheAttribLoc[r]=t.getAttribLocation(e,r)),e.cacheAttribLoc[r]},t.exports=e.default},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e,r){var n=r(132);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,a){return t.call(e,r,n,a)}}return function(){return t.apply(e,arguments)}}},function(t,e,r){var n=r(26),a=r(14).document,i=n(a)&&n(a.createElement);t.exports=function(t){return i?a.createElement(t):{}}},function(t,e,r){t.exports=!r(17)&&!r(25)(function(){return 7!=Object.defineProperty(r(69)("div"),"a",{get:function(){return 7}}).a})},function(t,e,r){"use strict";var n=r(42),a=r(20),i=r(77),u=r(21),o=r(18),s=r(41),l=r(139),f=r(46),h=r(74),c=r(22)("iterator"),d=!([].keys&&"next"in[].keys()),_="keys",m="values",p=function(){return this};t.exports=function(t,e,r,M,x,g,E){l(r,e,M);var b,y,S,T=function(t){if(!d&&t in D)return D[t];switch(t){case _:case m:return function(){return new r(this,t)}}return function(){return new r(this,t)}},I=e+" Iterator",A=x==m,F=!1,D=t.prototype,R=D[c]||D["@@iterator"]||x&&D[x],w=R||T(x),P=x?A?T("entries"):w:void 0,N="Array"==e?D.entries||R:R;if(N&&(S=h(N.call(new t)))!==Object.prototype&&(f(S,I,!0),n||o(S,c)||u(S,c,p)),A&&R&&R.name!==m&&(F=!0,w=function(){return R.call(this)}),n&&!E||!d&&!F&&D[c]||u(D,c,w),s[e]=w,s[I]=p,x)if(b={values:A?w:T(m),keys:g?w:T(_),entries:P},E)for(y in b)y in D||i(D,y,b[y]);else a(a.P+a.F*(d||F),e,b);return b}},function(t,e,r){var n=r(75),a=r(40).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,a)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(18),a=r(78),i=r(47)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),n(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,r){var n=r(18),a=r(15),i=r(134)(!1),u=r(47)("IE_PROTO");t.exports=function(t,e){var r,o=a(t),s=0,l=[];for(r in o)r!=u&&n(o,r)&&l.push(r);for(;e.length>s;)n(o,r=e[s++])&&(~i(l,r)||l.push(r));return l}},function(t,e,r){var n=r(20),a=r(10),i=r(25);t.exports=function(t,e){var r=(a.Object||{})[t]||Object[t],u={};u[t]=e(r),n(n.S+n.F*i(function(){r(1)}),"Object",u)}},function(t,e,r){t.exports=r(21)},function(t,e,r){var n=r(39);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},a.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromValues=function(t,e,r,a,i,u,o,s,l){var f=new n.ARRAY_TYPE(9);return f[0]=t,f[1]=e,f[2]=r,f[3]=a,f[4]=i,f[5]=u,f[6]=o,f[7]=s,f[8]=l,f},a.set=function(t,e,r,n,a,i,u,o,s,l){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t[8]=l,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8],h=f*u-o*l,c=-f*i+o*s,d=l*i-u*s,v=r*h+n*c+a*d;return v?(v=1/v,t[0]=h*v,t[1]=(-f*n+a*l)*v,t[2]=(o*n-a*u)*v,t[3]=c*v,t[4]=(f*r-a*s)*v,t[5]=(-o*r+a*i)*v,t[6]=d*v,t[7]=(-l*r+n*s)*v,t[8]=(u*r-n*i)*v,t):null},a.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8];return t[0]=u*f-o*l,t[1]=a*l-n*f,t[2]=n*o-a*u,t[3]=o*s-i*f,t[4]=r*f-a*s,t[5]=a*i-r*o,t[6]=i*l-u*s,t[7]=n*s-r*l,t[8]=r*u-n*i,t},a.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],u=t[5],o=t[6],s=t[7],l=t[8];return e*(l*i-u*s)+r*(-l*a+u*o)+n*(s*a-i*o)},a.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=r[0],d=r[1],v=r[2],_=r[3],m=r[4],p=r[5],M=r[6],x=r[7],g=r[8];return t[0]=c*n+d*u+v*l,t[1]=c*a+d*o+v*f,t[2]=c*i+d*s+v*h,t[3]=_*n+m*u+p*l,t[4]=_*a+m*o+p*f,t[5]=_*i+m*s+p*h,t[6]=M*n+x*u+g*l,t[7]=M*a+x*o+g*f,t[8]=M*i+x*s+g*h,t},a.mul=a.multiply,a.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=r[0],d=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=u,t[4]=o,t[5]=s,t[6]=c*n+d*u+l,t[7]=c*a+d*o+f,t[8]=c*i+d*s+h,t},a.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=Math.sin(r),d=Math.cos(r);return t[0]=d*n+c*u,t[1]=d*a+c*o,t[2]=d*i+c*s,t[3]=d*u-c*n,t[4]=d*o-c*a,t[5]=d*s-c*i,t[6]=l,t[7]=f,t[8]=h,t},a.scale=function(t,e,r){var n=r[0],a=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},a.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r+r,o=n+n,s=a+a,l=r*u,f=n*u,h=n*o,c=a*u,d=a*o,v=a*s,_=i*u,m=i*o,p=i*s;return t[0]=1-h-v,t[3]=f-p,t[6]=c+m,t[1]=f+p,t[4]=1-l-v,t[7]=d-_,t[2]=c-m,t[5]=d+_,t[8]=1-l-h,t},a.normalFromMat4=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8],h=e[9],c=e[10],d=e[11],v=e[12],_=e[13],m=e[14],p=e[15],M=r*o-n*u,x=r*s-a*u,g=r*l-i*u,E=n*s-a*o,b=n*l-i*o,y=a*l-i*s,S=f*_-h*v,T=f*m-c*v,I=f*p-d*v,A=h*m-c*_,F=h*p-d*_,D=c*p-d*m,R=M*D-x*F+g*A+E*I-b*T+y*S;return R?(R=1/R,t[0]=(o*D-s*F+l*A)*R,t[1]=(s*I-u*D-l*T)*R,t[2]=(u*F-o*I+l*S)*R,t[3]=(a*F-n*D-i*A)*R,t[4]=(r*D-a*I+i*T)*R,t[5]=(n*I-r*F-i*S)*R,t[6]=(_*y-m*b+p*E)*R,t[7]=(m*g-v*y-p*x)*R,t[8]=(v*b-_*g+p*M)*R,t):null},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],l=t[6],f=t[7],h=t[8],c=e[0],d=e[1],v=e[2],_=e[3],m=e[4],p=e[5],M=t[6],x=e[7],g=e[8];return Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-d)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-v)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-_)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(o-m)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-p)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(l-M)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(f-x)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))&&Math.abs(h-g)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(g))},t.exports=a},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,r){var a=new n.ARRAY_TYPE(3);return a[0]=t,a[1]=e,a[2]=r,a},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=e[2],i=r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=r[0],o=r[1],s=r[2];return t[0]=a*s-i*o,t[1]=i*u-n*s,t[2]=n*o-a*u,t},a.lerp=function(t,e,r,n){var a=e[0],i=e[1],u=e[2];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=u+n*(r[2]-u),t},a.hermite=function(t,e,r,n,a,i){var u=i*i,o=u*(2*i-3)+1,s=u*(i-2)+i,l=u*(i-1),f=u*(3-2*i);return t[0]=e[0]*o+r[0]*s+n[0]*l+a[0]*f,t[1]=e[1]*o+r[1]*s+n[1]*l+a[1]*f,t[2]=e[2]*o+r[2]*s+n[2]*l+a[2]*f,t},a.bezier=function(t,e,r,n,a,i){var u=1-i,o=u*u,s=i*i,l=o*u,f=3*i*o,h=3*s*u,c=s*i;return t[0]=e[0]*l+r[0]*f+n[0]*h+a[0]*c,t[1]=e[1]*l+r[1]*f+n[1]*h+a[1]*c,t[2]=e[2]*l+r[2]*f+n[2]*h+a[2]*c,t},a.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,a=2*n.RANDOM()-1,i=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=a*e,t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=r[3]*n+r[7]*a+r[11]*i+r[15];return u=u||1,t[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/u,t[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/u,t[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/u,t},a.transformMat3=function(t,e,r){var n=e[0],a=e[1],i=e[2];return t[0]=n*r[0]+a*r[3]+i*r[6],t[1]=n*r[1]+a*r[4]+i*r[7],t[2]=n*r[2]+a*r[5]+i*r[8],t},a.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=r[0],o=r[1],s=r[2],l=r[3],f=l*n+o*i-s*a,h=l*a+s*n-u*i,c=l*i+u*a-o*n,d=-u*n-o*a-s*i;return t[0]=f*l+d*-u+h*-s-c*-o,t[1]=h*l+d*-o+c*-u-f*-s,t[2]=c*l+d*-s+f*-o-h*-u,t},a.rotateX=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},a.rotateY=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},a.rotateZ=function(t,e,r,n){var a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,i,u){var o,s;for(r||(r=3),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,o=n;s>o;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],i(t,t,u),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}(),a.angle=function(t,e){var r=a.fromValues(t[0],t[1],t[2]),n=a.fromValues(e[0],e[1],e[2]);a.normalize(r,r),a.normalize(n,n);var i=a.dot(r,n);return i>1?0:Math.acos(i)},a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=e[0],o=e[1],s=e[2];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-o)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(i-s)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))},t.exports=a},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,r,a){var i=new n.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=a,i},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(r*r+n*n+a*a+i*i)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return r*r+n*n+a*a+i*i},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r*r+n*n+a*a+i*i;return u>0&&(u=1/Math.sqrt(u),t[0]=r*u,t[1]=n*u,t[2]=a*u,t[3]=i*u),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,r,n){var a=e[0],i=e[1],u=e[2],o=e[3];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=u+n*(r[2]-u),t[3]=o+n*(r[3]-o),t},a.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),a.normalize(t,t),a.scale(t,t,e),t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3];return t[0]=r[0]*n+r[4]*a+r[8]*i+r[12]*u,t[1]=r[1]*n+r[5]*a+r[9]*i+r[13]*u,t[2]=r[2]*n+r[6]*a+r[10]*i+r[14]*u,t[3]=r[3]*n+r[7]*a+r[11]*i+r[15]*u,t},a.transformQuat=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=r[0],o=r[1],s=r[2],l=r[3],f=l*n+o*i-s*a,h=l*a+s*n-u*i,c=l*i+u*a-o*n,d=-u*n-o*a-s*i;return t[0]=f*l+d*-u+h*-s-c*-o,t[1]=h*l+d*-o+c*-u-f*-s,t[2]=c*l+d*-s+f*-o-h*-u,t[3]=e[3],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,i,u){var o,s;for(r||(r=4),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,o=n;s>o;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],i(t,t,u),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=e[0],s=e[1],l=e[2],f=e[3];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-l)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(u-f)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(f))},t.exports=a},function(t,e){t.exports="// fxaa.frag\n\n#define SHADER_NAME FXAA\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform vec2 uResolution;\n\n\nfloat FXAA_SUBPIX_SHIFT = 1.0/4.0;\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#define FXAA_SPAN_MAX     8.0\n\n\nvec4 applyFXAA(sampler2D tex) {\n    vec4 color;\n    vec2 fragCoord = gl_FragCoord.xy;\n    vec3 rgbNW = texture2D(tex, (fragCoord + vec2(-1.0, -1.0)) * uResolution).xyz;\n    vec3 rgbNE = texture2D(tex, (fragCoord + vec2(1.0, -1.0)) * uResolution).xyz;\n    vec3 rgbSW = texture2D(tex, (fragCoord + vec2(-1.0, 1.0)) * uResolution).xyz;\n    vec3 rgbSE = texture2D(tex, (fragCoord + vec2(1.0, 1.0)) * uResolution).xyz;\n    vec3 rgbM  = texture2D(tex, fragCoord  * uResolution).xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * uResolution;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * uResolution + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * uResolution + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * uResolution + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * uResolution + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, 1.0);\n    else\n        color = vec4(rgbB, 1.0);\n    return color;\n}\n\nvoid main(void) {\n \tvec4 color = applyFXAA(texture);\n    gl_FragColor = color;\n}"},function(t,e){t.exports="// generalWithNormal.vert\n\n#define SHADER_NAME GENERAL_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec3 position;\nuniform vec3 scale;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tvec3 pos      = aVertexPosition * scale;\n\tpos           += position;\n\tgl_Position   = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n\t\n\tvTextureCoord = aTextureCoord;\n\tvNormal       = normalize(uNormalMatrix * aNormal);\n}"},function(t,e){t.exports="// basic.frag\n\n#define SHADER_NAME SKYBOX_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\nuniform samplerCube texture;\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\n\nvoid main(void) {\n    gl_FragColor = textureCube(texture, vVertex);\n}"},function(t,e){t.exports="// basic.vert\n\n#define SHADER_NAME SKYBOX_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n\tgl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n\tvTextureCoord = aTextureCoord;\n\t\n\tvVertex = aVertexPosition;\n\tvNormal = aNormal;\n}"},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=r(3),h=n(f),c=r(7),d=n(c),v=r(33),_=n(v),m=r(56),p=n(m),M=r(12),x=n(M),g=r(16),E=n(g),b=r(9),y=n(b),S=r(32),T=n(S),I=r(87),A=n(I),F=r(88),D=n(F),R=r(89),w=n(R),P=r(23),N=n(P),O=r(108),L=n(O),k=r(37),C=n(k),U=r(112),B=n(U),X=r(64),q=n(X),V=r(111),z=n(V),j=r(34),G=n(j),Y=r(57),W=n(Y),H=r(35),Z=n(H),Q=r(90),K=n(Q),J=r(58),$=n(J),tt=r(59),et=n(tt),rt=r(36),nt=n(rt),at=r(104),it=n(at),ut=r(103),ot=n(ut),st=r(102),lt=n(st),ft=r(105),ht=n(ft),ct=r(27),dt=n(ct),vt=r(62),_t=n(vt),mt=r(106),pt=n(mt),Mt=r(63),xt=n(Mt),gt=r(61),Et=n(gt),bt=r(107),yt=n(bt),St=r(93),Tt=n(St),It=r(91),At=n(It),Ft=r(92),Dt=n(Ft),Rt=r(94),wt=n(Rt),Pt=r(96),Nt=n(Pt),Ot=r(98),Lt=n(Ot),kt=r(97),Ct=n(kt),Ut=r(95),Bt=n(Ut),Xt=r(99),qt=n(Xt),Vt=r(100),zt=n(Vt),jt=r(101),Gt=n(jt),Yt=r(65),Wt=n(Yt),Zt=function(){function t(){(0,i.default)(this,t),this.glm=l.default,this.GL=h.default,this.GLTool=h.default,this.GLShader=d.default,this.GLTexture=_.default,this.GLCubeTexture=p.default,this.Mesh=x.default,this.Geom=E.default,this.Batch=y.default,this.FrameBuffer=T.default,this.CubeFrameBuffer=A.default,this.Scheduler=N.default,this.EventDispatcher=L.default,this.EaseNumber=C.default,this.TweenNumber=B.default,this.Camera=G.default,this.CameraOrtho=W.default,this.CameraPerspective=Z.default,this.Ray=$.default,this.CameraCube=K.default,this.OrbitalControl=q.default,this.QuatRotation=z.default,this.BinaryLoader=nt.default,this.ObjLoader=it.default,this.ColladaParser=lt.default,this.HDRLoader=ot.default,this.BatchCopy=Tt.default,this.BatchAxis=At.default,this.BatchBall=Dt.default,this.BatchBall=Dt.default,this.BatchLine=Nt.default,this.BatchSkybox=Lt.default,this.BatchSky=Ct.default,this.BatchFXAA=Bt.default,this.BatchDotsPlane=wt.default,this.Scene=qt.default,this.View=zt.default,this.View3D=Gt.default,this.Object3D=et.default,this.ShaderLibs=Wt.default,this.EffectComposer=ht.default,this.Pass=dt.default,this.PassMacro=_t.default,this.PassBlur=pt.default,this.PassVBlur=xt.default,this.PassHBlur=Et.default,this.PassFxaa=yt.default,this.MultisampleFrameBuffer=D.default,this.TransformFeedbackObject=w.default;for(var e in l.default)l.default[e]&&(window[e]=l.default[e])}return(0,o.default)(t,[{key:"log",value:function(){navigator.userAgent.indexOf("Chrome");for(var t in this)this[t]}}]),t}(),Qt=new Zt;e.default=Qt,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=r(56),h=n(f),c=void 0,d=function(){function t(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(0,i.default)(this,t),c=l.default.gl,this._size=e,this.magFilter=r.magFilter||c.LINEAR,this.minFilter=r.minFilter||c.LINEAR,this.wrapS=r.wrapS||c.CLAMP_TO_EDGE,this.wrapT=r.wrapT||c.CLAMP_TO_EDGE,this._init()}return(0,o.default)(t,[{key:"_init",value:function(){this.texture=c.createTexture(),this.glTexture=new h.default(this.texture,{},!0),c.bindTexture(c.TEXTURE_CUBE_MAP,this.texture),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MAG_FILTER,this.magFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_MIN_FILTER,this.minFilter),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_S,this.wrapS),c.texParameteri(c.TEXTURE_CUBE_MAP,c.TEXTURE_WRAP_T,this.wrapT);for(var t=[c.TEXTURE_CUBE_MAP_POSITIVE_X,c.TEXTURE_CUBE_MAP_NEGATIVE_X,c.TEXTURE_CUBE_MAP_POSITIVE_Y,c.TEXTURE_CUBE_MAP_NEGATIVE_Y,c.TEXTURE_CUBE_MAP_POSITIVE_Z,c.TEXTURE_CUBE_MAP_NEGATIVE_Z],e=0;e<t.length;e++)c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1),c.texImage2D(t[e],0,c.RGBA,this.width,this.height,0,c.RGBA,c.FLOAT,null);this._frameBuffers=[];for(var r=0;r<t.length;r++){var n=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,n),c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,t[r],this.texture,0);c.checkFramebufferStatus(c.FRAMEBUFFER);c.FRAMEBUFFER_COMPLETE,this._frameBuffers.push(n)}c.bindFramebuffer(c.FRAMEBUFFER,null),c.bindRenderbuffer(c.RENDERBUFFER,null),c.bindTexture(c.TEXTURE_CUBE_MAP,null)}},{key:"bind",value:function(t){l.default.viewport(0,0,this.width,this.height),c.bindFramebuffer(c.FRAMEBUFFER,this._frameBuffers[t])}},{key:"unbind",value:function(){c.bindFramebuffer(c.FRAMEBUFFER,null),l.default.viewport(0,0,l.default.width,l.default.height)}},{key:"getTexture",value:function(){return this.glTexture}},{key:"width",get:function(){return this._size}},{key:"height",get:function(){return this._size}}]),t}();e.default=d,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t){return 0!==t&&!(t&t-1)}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),u=n(i),o=r(2),s=n(o),l=r(3),f=n(l),h=r(33),c=n(h),d=void 0,v=function(){function t(e,r){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];(0,u.default)(this,t),d=f.default.gl,this.width=e,this.height=r,this.magFilter=n.magFilter||d.LINEAR,this.minFilter=n.minFilter||d.LINEAR,this.wrapS=n.wrapS||d.CLAMP_TO_EDGE,this.wrapT=n.wrapT||d.CLAMP_TO_EDGE,this.useDepth=n.useDepth||!0,this.useStencil=n.useStencil||!1,this.texelType=n.type,this._numSample=n.numSample||8,a(this.width)&&a(this.height)||(this.wrapS=this.wrapT=d.CLAMP_TO_EDGE,this.minFilter===d.LINEAR_MIPMAP_NEAREST&&(this.minFilter=d.LINEAR)),this._init()}return(0,s.default)(t,[{key:"_init",value:function(){var t=d.UNSIGNED_BYTE;this.texelType&&(t=this.texelType),this.texelType=t,this.frameBuffer=d.createFramebuffer(),this.frameBufferColor=d.createFramebuffer(),this.renderBufferColor=d.createRenderbuffer(),this.renderBufferDepth=d.createRenderbuffer(),this.glTexture=this._createTexture(),this.glDepthTexture=this._createTexture(d.DEPTH_COMPONENT16,d.UNSIGNED_SHORT,d.DEPTH_COMPONENT,!0),d.bindRenderbuffer(d.RENDERBUFFER,this.renderBufferColor),d.renderbufferStorageMultisample(d.RENDERBUFFER,this._numSample,d.RGBA8,this.width,this.height),d.bindRenderbuffer(d.RENDERBUFFER,this.renderBufferDepth),d.renderbufferStorageMultisample(d.RENDERBUFFER,this._numSample,d.DEPTH_COMPONENT16,this.width,this.height),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.RENDERBUFFER,this.renderBufferColor),d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,this.renderBufferDepth),d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBufferColor),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,this.glTexture.texture,0),d.bindFramebuffer(d.FRAMEBUFFER,null)}},{key:"_createTexture",value:function(t,e,r){var n=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];void 0===t&&(t=d.RGBA),void 0===e&&(e=this.texelType),r||(r=t);var a=d.createTexture(),i=new c.default(a,!0),u=n?f.default.NEAREST:this.magFilter,o=n?f.default.NEAREST:this.minFilter;return d.bindTexture(d.TEXTURE_2D,a),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,u),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,o),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,this.wrapS),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,this.wrapT),d.texImage2D(d.TEXTURE_2D,0,t,this.width,this.height,0,r,e,null),d.bindTexture(d.TEXTURE_2D,null),i}},{key:"bind",value:function(){(arguments.length<=0||void 0===arguments[0]||arguments[0])&&f.default.viewport(0,0,this.width,this.height),d.bindFramebuffer(d.FRAMEBUFFER,this.frameBuffer)}},{key:"unbind",value:function(){(arguments.length<=0||void 0===arguments[0]||arguments[0])&&f.default.viewport(0,0,f.default.width,f.default.height);var e=this.width,r=this.height;d.bindFramebuffer(d.FRAMEBUFFER,null),d.bindFramebuffer(d.READ_FRAMEBUFFER,this.frameBuffer),d.bindFramebuffer(d.DRAW_FRAMEBUFFER,this.frameBufferColor),d.clearBufferfv(d.COLOR,0,[0,0,0,0]),d.blitFramebuffer(0,0,e,r,0,0,e,r,d.COLOR_BUFFER_BIT,f.default.NEAREST),d.bindFramebuffer(d.FRAMEBUFFER,null)}},{key:"getTexture",value:function(){return arguments.length<=0||void 0===arguments[0]||arguments[0],this.glTexture}},{key:"getDepthTexture",value:function(){return this.glDepthTexture}}]),t}();e.default=v,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(3),l=n(s),f=r(7),h=n(f),c=r(12),d=n(c),v=void 0,_=function(){function t(e,r){(0,i.default)(this,t),v=l.default.gl,this._vs=e,this._fs=r,this._init()}return(0,o.default)(t,[{key:"_init",value:function(){this._meshCurrent=new d.default,this._meshTarget=new d.default,this._numPoints=-1,this._varyings=[],this.transformFeedback=v.createTransformFeedback()}},{key:"bufferData",value:function(t,e,r){var n=!!r;this._meshCurrent.bufferData(t,e,null,v.STREAM_COPY,!1),this._meshTarget.bufferData(t,e,null,v.STREAM_COPY,!1),n&&(this._varyings.push(r),this._numPoints<0&&(this._numPoints=t.length))}},{key:"bufferIndex",value:function(t){this._meshCurrent.bufferIndex(t),this._meshTarget.bufferIndex(t)}},{key:"uniform",value:function(t,e,r){this.shader&&this.shader.uniform(t,e,r)}},{key:"generate",value:function(){this.shader=new h.default(this._vs,this._fs,this._varyings)}},{key:"render",value:function(){this.shader||this.generate(),this.shader.bind(),l.default.drawTransformFeedback(this),this._swap()}},{key:"_swap",value:function(){var t=this._meshCurrent;this._meshCurrent=this._meshTarget,this._meshTarget=t}},{key:"numPoints",get:function(){return this._numPoints}},{key:"meshCurrent",get:function(){return this._meshCurrent}},{key:"meshTarget",get:function(){return this._meshTarget}},{key:"meshSource",get:function(){return this._meshCurrent}},{key:"meshDestination",get:function(){return this._meshTarget}}]),t}();e.default=_,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),v=r(35),_=n(v),m=r(8),p=n(m),M=p.default.vec3,x=[[M.fromValues(0,0,0),M.fromValues(1,0,0),M.fromValues(0,-1,0)],[M.fromValues(0,0,0),M.fromValues(-1,0,0),M.fromValues(0,-1,0)],[M.fromValues(0,0,0),M.fromValues(0,1,0),M.fromValues(0,0,1)],[M.fromValues(0,0,0),M.fromValues(0,-1,0),M.fromValues(0,0,-1)],[M.fromValues(0,0,0),M.fromValues(0,0,1),M.fromValues(0,-1,0)],[M.fromValues(0,0,0),M.fromValues(0,0,-1),M.fromValues(0,-1,0)]],g=function(t){function e(){(0,o.default)(this,e);var t=(0,h.default)(this,(0,i.default)(e).call(this));return t.setPerspective(Math.PI/2,1,.1,1e3),t}return(0,d.default)(e,t),(0,l.default)(e,[{key:"face",value:function(t){var e=x[t];this.lookAt(e[0],e[1],e[2])}}]),e}(_.default);e.default=g,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(6),l=n(s),f=r(5),h=n(f),c=r(3),d=n(c),v=r(12),_=n(v),m=r(7),p=n(m),M=r(9),x=n(M),g=r(169),E=r(168),b=function(t){function e(){(0,o.default)(this,e);var t=[],r=[],n=[0,1,2,3,4,5],a=9999;t.push([-a,0,0]),t.push([a,0,0]),t.push([0,-a,0]),t.push([0,a,0]),t.push([0,0,-a]),t.push([0,0,a]),r.push([1,0,0]),r.push([1,0,0]),r.push([0,1,0]),r.push([0,1,0]),r.push([0,0,1]),r.push([0,0,1]);var u=new _.default(d.default.LINES);u.bufferVertex(t),u.bufferIndex(n),u.bufferData(r,"aColor",3);var s=new p.default(g,E);return(0,l.default)(this,(0,i.default)(e).call(this,u,s))}return(0,h.default)(e,t),e}(x.default);e.default=b,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(13),d=n(c),v=r(5),_=n(v),m=r(16),p=n(m),M=r(7),x=n(M),g=r(9),E=n(g),b=r(83),y=r(31),S=function(t){function e(){(0,o.default)(this,e);var t=p.default.sphere(1,24),r=new x.default(b,y);return(0,h.default)(this,(0,i.default)(e).call(this,t,r))}return(0,_.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(){var t=arguments.length<=0||void 0===arguments[0]?[0,0,0]:arguments[0],r=arguments.length<=1||void 0===arguments[1]?[1,1,1]:arguments[1],n=arguments.length<=2||void 0===arguments[2]?[1,1,1]:arguments[2],a=arguments.length<=3||void 0===arguments[3]?1:arguments[3];this.shader.bind(),this.shader.uniform("position","uniform3fv",t),this.shader.uniform("scale","uniform3fv",r),this.shader.uniform("color","uniform3fv",n),this.shader.uniform("opacity","uniform1f",a),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(E.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(13),d=n(c),v=r(5),_=n(v),m=r(16),p=n(m),M=r(7),x=n(M),g=r(9),E=n(g),b=r(54),y=r(55),S=function(t){function e(){(0,o.default)(this,e);var t=p.default.bigTriangle(),r=new x.default(b,y),n=(0,h.default)(this,(0,i.default)(e).call(this,t,r));return r.bind(),r.uniform("texture","uniform1i",0),n}return(0,_.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(E.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(13),d=n(c),v=r(5),_=n(v),m=r(3),p=n(m),M=r(12),x=n(M),g=r(7),E=n(g),b=r(9),y=n(b),S=r(174),T=r(31),I=function(t){function e(){(0,o.default)(this,e);var t=[],r=[],n=0,a=100,u=void 0,s=void 0;for(u=-a;a>u;u+=1)for(s=-a;a>s;s+=1)t.push([u,s,0]),r.push(n),n++,t.push([u,0,s]),r.push(n),n++;var l=new x.default(p.default.POINTS);l.bufferVertex(t),l.bufferIndex(r);var f=new E.default(S,T),c=(0,h.default)(this,(0,i.default)(e).call(this,l,f));return c.color=[1,1,1],c.opacity=.5,c}return(0,_.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(){this.shader.bind(),this.shader.uniform("color","uniform3fv",this.color),this.shader.uniform("opacity","uniform1f",this.opacity),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(y.default);e.default=I,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(13),d=n(c),v=r(5),_=n(v),m=r(3),p=n(m),M=r(16),x=n(M),g=r(7),E=n(g),b=r(9),y=n(b),S=r(54),T=r(82),I=function(t){function e(){(0,o.default)(this,e);var t=x.default.bigTriangle(),r=new E.default(S,T),n=(0,h.default)(this,(0,i.default)(e).call(this,t,r));return r.bind(),r.uniform("texture","uniform1i",0),n}return(0,_.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),this.shader.uniform("uResolution","vec2",[1/p.default.width,1/p.default.height]),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(y.default);e.default=I,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(13),d=n(c),v=r(5),_=n(v),m=r(3),p=n(m),M=r(12),x=n(M),g=r(7),E=n(g),b=r(9),y=n(b),S=r(53),T=r(31),I=function(t){function e(){(0,o.default)(this,e);var t=[],r=[0,1],n=[[0,0],[1,1]];t.push([0,0,0]),t.push([0,0,0]);var a=new x.default(p.default.LINES);a.bufferVertex(t),a.bufferTexCoord(n),a.bufferIndex(r);var u=new E.default(S,T);return(0,h.default)(this,(0,i.default)(e).call(this,a,u))}return(0,_.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?[1,1,1]:arguments[2],a=arguments.length<=3||void 0===arguments[3]?1:arguments[3];this._mesh.bufferVertex([t,r]),this._shader.bind(),this._shader.uniform("color","vec3",n),this._shader.uniform("opacity","float",a),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(y.default);e.default=I,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(13),d=n(c),v=r(5),_=n(v),m=r(16),p=n(m),M=r(7),x=n(M),g=r(9),E=n(g),b=r(175),y=r(55),S=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?50:arguments[0],r=arguments.length<=1||void 0===arguments[1]?24:arguments[1];(0,o.default)(this,e);var n=p.default.sphere(t,r,!0),a=new x.default(b,y);return(0,h.default)(this,(0,i.default)(e).call(this,n,a))}return(0,_.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(E.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(13),d=n(c),v=r(5),_=n(v),m=r(16),p=n(m),M=r(7),x=n(M),g=r(9),E=n(g),b=r(85),y=r(84),S=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?20:arguments[0];(0,o.default)(this,e);var r=p.default.skybox(t),n=new x.default(b,y);return(0,h.default)(this,(0,i.default)(e).call(this,r,n))}return(0,_.default)(e,t),(0,l.default)(e,[{key:"draw",value:function(t){this.shader.bind(),t.bind(0),(0,d.default)((0,i.default)(e.prototype),"draw",this).call(this)}}]),e}(E.default);e.default=S,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(23),l=n(s),f=r(3),h=n(f),c=r(35),d=n(c),v=r(57),_=n(v),m=r(64),p=n(m),M=function(){function t(){var e=this;(0,i.default)(this,t),this._children=[],this._matrixIdentity=mat4.create(),h.default.enableAlphaBlending(),this._init(),this._initTextures(),this._initViews(),this._efIndex=l.default.addEF(function(){return e._loop()}),window.addEventListener("resize",function(){return e.resize()})}return(0,o.default)(t,[{key:"update",value:function(){}},{key:"render",value:function(){}},{key:"stop",value:function(){-1!==this._efIndex&&(this._efIndex=l.default.removeEF(this._efIndex))}},{key:"start",value:function(){var t=this;-1===this._efIndex&&(this._efIndex=l.default.addEF(function(){return t._loop()}))}},{key:"resize",value:function(){h.default.setSize(window.innerWidth,window.innerHeight),this.camera.setAspectRatio(h.default.aspectRatio)}},{key:"addChild",value:function(t){this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return-1==e?void 0:void this._children.splice(e,1)}},{key:"_initTextures",value:function(){}},{key:"_initViews",value:function(){}},{key:"_renderChildren",value:function(){for(var t=void 0,e=0;e<this._children.length;e++)t=this._children[e],t.toRender();h.default.rotate(this._matrixIdentity)}},{key:"_init",value:function(){this.camera=new d.default,this.camera.setPerspective(45*Math.PI/180,h.default.aspectRatio,.1,100),this.orbitalControl=new p.default(this.camera,window,15),this.orbitalControl.radius.value=10,this.cameraOrtho=new _.default}},{key:"_loop",value:function(){h.default.viewport(0,0,h.default.width,h.default.height),h.default.setMatrices(this.camera),this.update(),this._renderChildren(),this.render()}}]),t}();e.default=M,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(7),l=n(s),f=function(){function t(e,r){(0,i.default)(this,t),this.shader=new l.default(e,r),this._init()}return(0,o.default)(t,[{key:"_init",value:function(){}},{key:"render",value:function(){}}]),t}();e.default=f,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),v=r(59),_=n(v),m=r(7),p=n(m),M=r(3),x=n(M),g=function(t){function e(t,r){(0,o.default)(this,e);var n=(0,h.default)(this,(0,i.default)(e).call(this));return n._children=[],n.shader=new p.default(t,r),n._init(),n._matrixTemp=mat4.create(),n}return(0,d.default)(e,t),(0,l.default)(e,[{key:"_init",value:function(){}},{key:"addChild",value:function(t){this._children.push(t)}},{key:"removeChild",value:function(t){var e=this._children.indexOf(t);return-1==e?void 0:void this._children.splice(e,1)}},{key:"toRender",value:function(t){void 0===t&&(t=mat4.create()),mat4.mul(this._matrixTemp,t,this.matrix),x.default.rotate(this._matrixTemp),this.render();for(var e=0;e<this._children.length;e++){this._children[e].toRender(this.matrix)}}},{key:"render",value:function(){}}]),e}(_.default);e.default=g,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(124),i=n(a),u=r(12),o=n(u),s=function(t){var e={};t.forEach(function(t){var r=t.mesh,n=r.vertices,a=r.normals,i=r.coords,u=r.triangles,s=r.name;if(!e[s]){var l=(new o.default).bufferFlattenData(n,"aVertexPosition",3).bufferFlattenData(i,"aTextureCoord",2).bufferFlattenData(a,"aNormal",3).bufferIndex(u);e[s]=l}t.glMesh=e[s]})},l=function(t){var e=i.default.parse(t);return s(e),e},f=function(t,e){i.default.load(t,function(t){s(t),e(t)})},h={parse:l,load:f};e.default=h,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(5),d=n(c),v=r(36),_=n(v),m=r(110),p=n(m),M=function(t){function e(){return(0,o.default)(this,e),(0,h.default)(this,(0,i.default)(e).call(this,!0))}return(0,d.default)(e,t),(0,l.default)(e,[{key:"parse",value:function(t){return(0,p.default)(t)}},{key:"_onLoaded",value:function(){var t=this.parse(this._req.response);this._callback&&this._callback(t)}}]),e}(_.default);M.parse=function(t){return(0,p.default)(t)},e.default=M,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(2),l=n(s),f=r(6),h=n(f),c=r(13),d=n(c),v=r(5),_=n(v),m=r(36),p=n(m),M=r(12),x=n(M),g=function(t){function e(){return(0,o.default)(this,e),(0,h.default)(this,(0,i.default)(e).apply(this,arguments))}return(0,_.default)(e,t),(0,l.default)(e,[{key:"load",value:function(t,r){var n=arguments.length<=2||void 0===arguments[2]?4:arguments[2];this._drawType=n,(0,d.default)((0,i.default)(e.prototype),"load",this).call(this,t,r)}},{key:"_onLoaded",value:function(){this.parseObj(this._req.response)}},{key:"parseObj",value:function(t){function e(t){var e=parseInt(t);return 3*(e>=0?e-1:e+c.length/3)}function r(t){var e=parseInt(t);return 3*(e>=0?e-1:e+d.length/3)}function n(t){var e=parseInt(t);return 2*(e>=0?e-1:e+v.length/2)}function a(t,e,r){l.push([c[t],c[t+1],c[t+2]]),l.push([c[e],c[e+1],c[e+2]]),l.push([c[r],c[r+1],c[r+2]]),_.push(3*m+0),_.push(3*m+1),_.push(3*m+2),m++}function i(t,e,r){f.push([v[t],v[t+1]]),f.push([v[e],v[e+1]]),f.push([v[r],v[r+1]])}function u(t,e,r){h.push([d[t],d[t+1],d[t+2]]),h.push([d[e],d[e+1],d[e+2]]),h.push([d[r],d[r+1],d[r+2]])}function o(t,o,s,l,f,h,c,d,v,_,m,p){var M=e(t),x=e(o),g=e(s),E=void 0;void 0===l?a(M,x,g):(E=e(l),a(M,x,E),a(x,g,E)),void 0!==f&&(M=n(f),x=n(h),g=n(c),void 0===l?i(M,x,g):(E=n(d),i(M,x,E),i(x,g,E))),void 0!==v&&(M=r(v),x=r(_),g=r(m),void 0===l?u(M,x,g):(E=r(p),u(M,x,E),u(x,g,E)))}for(var s=t.split("\n"),l=[],f=[],h=[],c=[],d=[],v=[],_=[],m=0,p=void 0,M=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,x=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,g=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,E=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,b=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,y=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,S=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/,T=0;T<s.length;T++){var I=s[T];I=I.trim(),0!==I.length&&"#"!==I.charAt(0)&&(null!==(p=M.exec(I))?c.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])):null!==(p=x.exec(I))?d.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])):null!==(p=g.exec(I))?v.push(parseFloat(p[1]),parseFloat(p[2])):null!==(p=E.exec(I))?o(p[1],p[2],p[3],p[4]):null!==(p=b.exec(I))?o(p[2],p[5],p[8],p[11],p[3],p[6],p[9],p[12]):null!==(p=y.exec(I))?o(p[2],p[6],p[10],p[14],p[3],p[7],p[11],p[15],p[4],p[8],p[12],p[16]):null!==(p=S.exec(I))&&o(p[2],p[5],p[8],p[11],void 0,void 0,void 0,void 0,p[3],p[6],p[9],p[12]))}return this._generateMeshes({positions:l,coords:f,normals:h,indices:_})}},{key:"_generateMeshes",value:function(t){var r=t.normals.length>0,n=t.coords.length>0,a=void 0;if(t.positions.length>65535){var i=[],u=0,o={};for(o.positions=t.positions.concat(),o.coords=t.coords.concat(),o.indices=t.indices.concat(),o.normals=t.normals.concat();t.indices.length>0;){for(var s=Math.min(65535,t.positions.length),l=t.indices.splice(0,s),f=[],h=[],c=[],d=void 0,v=0,_=0;_<l.length;_++)l[_]>v&&(v=l[_]),d=l[_],f.push(o.positions[d]),n&&h.push(o.coords[d]),r&&c.push(o.normals[d]),l[_]-=u;u=v+1,a=new x.default(this._drawType),a.bufferVertex(f),n&&a.bufferTexCoord(h),a.bufferIndex(l),r&&a.bufferNormal(c),i.push(a)}return this._callback&&this._callback(i,o),i}return a=new x.default(this._drawType),a.bufferVertex(t.positions),n&&a.bufferTexCoord(t.coords),a.bufferIndex(t.indices),r&&a.bufferNormal(t.normals),this._callback&&this._callback(a,t),a}}]),e}(p.default);g.parse=function(t){return(new g).parseObj(t)},e.default=g,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(27),l=(n(s),r(3)),f=n(l),h=r(16),c=n(h),d=r(32),v=n(d),_=function(){function t(e,r){arguments.length<=2||void 0===arguments[2]||arguments[2],(0,i.default)(this,t),this._width=e||f.default.width,this._height=r||f.default.height,this._params={},this.setSize(e,r),this._mesh=c.default.bigTriangle(),this._passes=[],this._returnTexture}return(0,o.default)(t,[{key:"addPass",value:function(t){if(t.passes)return void this.addPass(t.passes);if(t.length)for(var e=0;e<t.length;e++)this._passes.push(t[e]);else this._passes.push(t)}},{key:"render",value:function(t){var e=this,r=t,n=void 0;return this._passes.forEach(function(t){n=t.hasFbo?t.fbo:e._fboTarget,n.bind(),f.default.clear(0,0,0,0),t.render(r),f.default.draw(e._mesh),n.unbind(),t.hasFbo?r=t.fbo.getTexture():(e._swap(),r=e._fboCurrent.getTexture())}),this._returnTexture=r,r}},{key:"_swap",value:function(){var t=this._fboCurrent;this._fboCurrent=this._fboTarget,this._fboTarget=t,this._current=this._fboCurrent,this._target=this._fboTarget}},{key:"setSize",value:function(t,e){this._width=t,this._height=e,this._fboCurrent=new v.default(this._width,this._height,this._params),this._fboTarget=new v.default(this._width,this._height,this._params)}},{key:"getTexture",value:function(){return this._returnTexture}},{key:"passes",get:function(){return this._passes}}]),t}();e.default=_,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(6),l=n(s),f=r(5),h=n(f),c=r(63),d=n(c),v=r(61),_=n(v),m=r(62),p=n(m),M=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?9:arguments[0],r=arguments[1],n=arguments[2],a=arguments[3];(0,o.default)(this,e);var u=(0,l.default)(this,(0,i.default)(e).call(this)),s=new d.default(t,r,n,a),f=new _.default(t,r,n,a);return u.addPass(s),u.addPass(f),u}return(0,h.default)(e,t),e}(p.default);e.default=M,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(4),i=n(a),u=r(1),o=n(u),s=r(6),l=n(s),f=r(5),h=n(f),c=r(3),d=n(c),v=r(27),_=n(v),m=r(82),p=n(m),M=function(t){function e(){(0,o.default)(this,e);var t=(0,l.default)(this,(0,i.default)(e).call(this,p.default));return t.uniform("uResolution",[1/d.default.width,1/d.default.height]),t}return(0,h.default)(e,t),e}(_.default);e.default=M,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=!0;try{document.createEvent("CustomEvent");null}catch(f){s=!1}var h=function(){function t(){(0,i.default)(this,t),this._eventListeners={}}return(0,o.default)(t,[{key:"addEventListener",value:function(t,e){return null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={}),this._eventListeners[t]||(this._eventListeners[t]=[]),this._eventListeners[t].push(e),this}},{key:"on",value:function(t,e){return this.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});var r=this._eventListeners[t];if(void 0===r)return this;for(var n=r.length,a=0;n>a;a++)r[a]===e&&(r.splice(a,1),a--,n--);return this}},{key:"off",value:function(t,e){return this.removeEventListener(t,e)}},{key:"dispatchEvent",value:function(t){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});var e=t.type;try{null===t.target&&(t.target=this),t.currentTarget=this}catch(r){var n={type:e,detail:t.detail,dispatcher:this};return this.dispatchEvent(n)}var a=this._eventListeners[e];if(null!==a&&void 0!==a)for(var i=this._copyArray(a),u=i.length,o=0;u>o;o++){var s=i[o];s.call(this,t)}return this}},{key:"dispatchCustomEvent",value:function(t,e){var r=void 0;return s?(r=document.createEvent("CustomEvent"),r.dispatcher=this,r.initCustomEvent(t,!1,!1,e)):r={type:t,detail:e,dispatcher:this},this.dispatchEvent(r)}},{key:"trigger",value:function(t,e){return this.dispatchCustomEvent(t,e)}},{key:"_destroy",value:function(){if(null!==this._eventListeners){for(var t in this._eventListeners)if(this._eventListeners.hasOwnProperty(t)){for(var e=this._eventListeners[t],r=e.length,n=0;r>n;n++)e[n]=null;delete this._eventListeners[t]}this._eventListeners=null}}},{key:"_copyArray",value:function(t){for(var e=new Array(t.length),r=e.length,n=0;r>n;n++)e[n]=t[n];return e}}]),t}();e.default=h,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","WEBGL_depth_texture","EXT_texture_filter_anisotropic","OES_vertex_array_object","ANGLE_instanced_arrays","WEBGL_draw_buffers"],t.exports=e.default},function(t,e){"use strict";function r(t,e,r,n,a,i){function u(e){var r=0;do{e[r++]=t[n]}while(++n<_&&r<e.length);return r}function o(e,r,a){var i=0;do{e[r+i++]=t[n]}while(++n<_&&a>i);return i}for(var l=new Array(4),f=null,h=void 0,c=void 0,d=void 0,v=new Array(2),_=t.length;i>0;){if(u(l)<l.length)throw new Error("Error reading bytes: expected "+l.length);if(2!==l[0]||2!==l[1]||0!=(128&l[2]))return e[r++]=l[0],e[r++]=l[1],e[r++]=l[2],e[r++]=l[3],void function(t,e,r,n){var a=4*n,i=o(e,r,a);if(a>i)throw new Error("Error reading raw pixels: got "+i+" bytes, expected "+a)}(t,e,r,a*i-1);if(((255&l[2])<<8|255&l[3])!==a)throw new Error("Wrong scanline width "+((255&l[2])<<8|255&l[3])+", expected "+a);null===f&&(f=new Array(4*a)),h=0;for(var m=0;4>m;m++)for(c=(m+1)*a;c>h;){if(u(v)<v.length)throw new Error("Error reading 2-byte buffer");if((255&v[0])>128){if(0===(d=(255&v[0])-128)||d>c-h)throw new Error("Bad scanline data");for(;d-- >0;)f[h++]=v[1]}else{if(0===(d=255&v[0])||d>c-h)throw new Error("Bad scanline data");if(f[h++]=v[1],--d>0){if(o(f,h,d)<d)throw new Error("Error reading non-run data");h+=d}}}for(var p=0;a>p;p++)e[r+0]=f[p],e[r+1]=f[p+a],e[r+2]=f[p+2*a],e[r+3]=f[p+3*a],r+=4;i--}}function n(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));for(var n=0,l=t.length,f=10,h=0,c=0,d=1,_=!1,m=0;20>m;m++){var p=function(){var e="";do{var r=t[n];if(r===f){++n;break}e+=String.fromCharCode(r)}while(++n<l);return e}(),M=void 0;if(M=p.match(a));else if(M=p.match(o))_=!0;else if(M=p.match(u))d=Number(M[1]);else if(M=p.match(i));else if(M=p.match(s)){c=Number(M[1]),h=Number(M[2]);break}}if(!_)throw new Error("File is not run length encoded!");var x=new Uint8Array(h*c*4);r(t,x,0,n,h,c);for(var b=new Float32Array(h*c*4),y=0;y<x.length;y+=4){var S=x[y+0]/255,T=x[y+1]/255,I=x[y+2]/255,A=x[y+3],F=Math.pow(2,A-128);S*=F,T*=F,I*=F;var D=y;b[D+0]=S,b[D+1]=T,b[D+2]=I,b[D+3]=1}return{shape:[h,c],exposure:d,gamma:1,data:b}}Object.defineProperty(e,"__esModule",{value:!0});var a="#\\?RADIANCE",i="#.*",u="EXPOSURE=\\s*([0-9]*[.][0-9]*)",o="FORMAT=32-bit_rle_rgbe",s="-Y ([0-9]+) \\+X ([0-9]+)";e.default=n,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=r(1),i=n(a),u=r(2),o=n(u),s=r(8),l=n(s),f=r(37),h=n(f),c=r(23),d=n(c),v=function(t,e){var r=e||{};return t.touches?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):(r.x=t.clientX,r.y=t.clientY),r},_=function(){function t(e){var r=this,n=arguments.length<=1||void 0===arguments[1]?window:arguments[1],a=arguments.length<=2||void 0===arguments[2]?.1:arguments[2];(0,i.default)(this,t),this._target=e,this._listenerTarget=n,this.matrix=l.default.mat4.create(),this.m=l.default.mat4.create(),this._vZaxis=l.default.vec3.clone([0,0,0]),this._zAxis=l.default.vec3.clone([0,0,1]),this.preMouse={x:0,y:0},this.mouse={x:0,y:0},this._isMouseDown=!1,this._rotation=l.default.quat.create(),this.tempRotation=l.default.quat.create(),this._rotateZMargin=0,this._offset=.004,this._slerp=-1,this._isLocked=!1,this._diffX=new h.default(0,a),this._diffY=new h.default(0,a),this._listenerTarget.addEventListener("mousedown",function(t){return r._onDown(t)}),this._listenerTarget.addEventListener("touchstart",function(t){return r._onDown(t)}),this._listenerTarget.addEventListener("mousemove",function(t){return r._onMove(t)}),this._listenerTarget.addEventListener("touchmove",function(t){return r._onMove(t)}),window.addEventListener("touchend",function(){return r._onUp()}),window.addEventListener("mouseup",function(){return r._onUp()}),d.default.addEF(function(){return r._loop()})}return(0,o.default)(t,[{key:"inverseControl",value:function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];this._isInvert=t}},{key:"lock",value:function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];this._isLocked=t}},{key:"setCameraPos",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?.1:arguments[1];if(this.easing=e,!(this._slerp>0)){var r=l.default.quat.clone(this._rotation);this._updateRotation(r),this._rotation=l.default.quat.clone(r),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0,this._isMouseDown=!1,this._isRotateZ=0,this._targetQuat=l.default.quat.clone(t),this._slerp=1}}},{key:"resetQuat",value:function(){this._rotation=l.default.quat.clone([0,0,1,0]),this.tempRotation=l.default.quat.clone([0,0,0,0]),this._targetQuat=void 0,this._slerp=-1}},{key:"_onDown",value:function(t){if(!this._isLocked){var e=v(t),r=l.default.quat.clone(this._rotation);this._updateRotation(r),this._rotation=r,this._isMouseDown=!0,this._isRotateZ=0,this.preMouse={x:e.x,y:e.y},e.y<this._rotateZMargin||e.y>window.innerHeight-this._rotateZMargin?this._isRotateZ=1:(e.x<this._rotateZMargin||e.x>window.innerWidth-this._rotateZMargin)&&(this._isRotateZ=2),this._diffX.setTo(0),this._diffY.setTo(0)}}},{key:"_onMove",value:function(t){this._isLocked||v(t,this.mouse)}},{key:"_onUp",value:function(){this._isLocked||(this._isMouseDown=!1)}},{key:"_updateRotation",value:function(t){this._isMouseDown&&!this._isLocked&&(this._diffX.value=-(this.mouse.x-this.preMouse.x),this._diffY.value=this.mouse.y-this.preMouse.y,this._isInvert&&(this._diffX.value=-this._diffX.targetValue,this._diffY.value=-this._diffY.targetValue));var e=void 0,r=void 0;if(this._isRotateZ>0)1===this._isRotateZ?(e=-this._diffX.value*this._offset,e*=this.preMouse.y<this._rotateZMargin?-1:1,r=l.default.quat.clone([0,0,Math.sin(e),Math.cos(e)]),l.default.quat.multiply(r,t,r)):(e=-this._diffY.value*this._offset,e*=this.preMouse.x<this._rotateZMargin?1:-1,r=l.default.quat.clone([0,0,Math.sin(e),Math.cos(e)]),l.default.quat.multiply(r,t,r));else{var n=l.default.vec3.clone([this._diffX.value,this._diffY.value,0]),a=l.default.vec3.create();l.default.vec3.cross(a,n,this._zAxis),l.default.vec3.normalize(a,a),e=l.default.vec3.length(n)*this._offset,r=l.default.quat.clone([Math.sin(e)*a[0],Math.sin(e)*a[1],Math.sin(e)*a[2],Math.cos(e)]),l.default.quat.multiply(t,r,t)}}},{key:"_loop",value:function(){l.default.mat4.identity(this.m),void 0===this._targetQuat?(l.default.quat.set(this.tempRotation,this._rotation[0],this._rotation[1],this._rotation[2],this._rotation[3]),this._updateRotation(this.tempRotation)):(this._slerp+=.1*(0-this._slerp),this._slerp<5e-4?(l.default.quat.copy(this._rotation,this._targetQuat),l.default.quat.copy(this.tempRotation,this._targetQuat),this._targetQuat=void 0,this._diffX.setTo(0),this._diffY.setTo(0),this._slerp=-1):(l.default.quat.set(this.tempRotation,0,0,0,0),l.default.quat.slerp(this.tempRotation,this._targetQuat,this._rotation,this._slerp))),l.default.vec3.transformQuat(this._vZaxis,this._vZaxis,this.tempRotation),l.default.mat4.fromQuat(this.matrix,this.tempRotation)}},{key:"easing",set:function(t){this._diffX.easing=t,this._diffY.easing=t},get:function(){return this._diffX.easing}}]),t}();e.default=_,t.exports=e.default},function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t){switch(t){default:case"linear":return h.Linear.None;case"expIn":return h.Exponential.In;case"expOut":return h.Exponential.Out;case"expInOut":return h.Exponential.InOut;case"cubicIn":return h.Cubic.In;case"cubicOut":return h.Cubic.Out;case"cubicInOut":return h.Cubic.InOut;case"quarticIn":return h.Quartic.In;case"quarticOut":return h.Quartic.Out;case"quarticInOut":return h.Quartic.InOut;case"quinticIn":return h.Quintic.In;case"quinticOut":return h.Quintic.Out;case"quinticInOut":return h.Quintic.InOut;case"sinusoidalIn":return h.Sinusoidal.In;case"sinusoidalOut":return h.Sinusoidal.Out;case"sinusoidalInOut":return h.Sinusoidal.InOut;case"circularIn":return h.Circular.In;case"circularOut":return h.Circular.Out;case"circularInOut":return h.Circular.InOut;case"elasticIn":return h.Elastic.In;case"elasticOut":return h.Elastic.Out;case"elasticInOut":return h.Elastic.InOut;case"backIn":return h.Back.In;case"backOut":return h.Back.Out;case"backInOut":return h.Back.InOut;case"bounceIn":return h.Bounce.in;case"bounceOut":return h.Bounce.out;case"bounceInOut":return h.Bounce.inOut}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(1),u=n(i),o=r(2),s=n(o),l=r(23),f=n(l),h={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e=void 0,r=.1;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},Out:function(t){var e=void 0,r=.1;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},InOut:function(t){var e=void 0,r=.1;return 0===t?0:1===t?1:(!r||1>r?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{in:function(t){return 1-h.Bounce.out(1-t)},out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},inOut:function(t){return.5>t?.5*h.Bounce.in(2*t):.5*h.Bounce.out(2*t-1)+.5}}},c=function(){function t(e){var r=this,n=arguments.length<=1||void 0===arguments[1]?"expOut":arguments[1],a=arguments.length<=2||void 0===arguments[2]?.01:arguments[2];(0,u.default)(this,t),this._value=e,this._startValue=e,this._targetValue=e,this._counter=1,this.speed=a,this.easing=n,this._needUpdate=!0,this._efIndex=f.default.addEF(function(){return r._update()})}return(0,s.default)(t,[{key:"_update",value:function(){var t=this._counter+this.speed;return t>1&&(t=1),this._counter===t?void(this._needUpdate=!1):(this._counter=t,void(this._needUpdate=!0))}},{key:"limit",value:function(t,e){return t>e?void this.limit(e,t):(this._min=t,this._max=e,void this._checkLimit())}},{key:"setTo",value:function(t){this._value=t,this._targetValue=t,this._counter=1}},{key:"_checkLimit",value:function(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}},{key:"destroy",value:function(){f.default.removeEF(this._efIndex)}},{key:"value",set:function(t){this._startValue=this._value,this._targetValue=t,this._checkLimit(),this._counter=0},get:function(){if(this._needUpdate){var t=a(this.easing),e=t(this._counter);this._value=this._startValue+e*(this._targetValue-this._startValue),this._needUpdate=!1}return this._value}},{key:"targetValue",get:function(){return this._targetValue}}]),t}();e.default=c,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(3),i=function(t){return t&&t.__esModule?t:{default:t}}(a),u=function(){i.default.VERTEX_SHADER=i.default.gl.VERTEX_SHADER,i.default.FRAGMENT_SHADER=i.default.gl.FRAGMENT_SHADER,i.default.COMPILE_STATUS=i.default.gl.COMPILE_STATUS,i.default.DEPTH_TEST=i.default.gl.DEPTH_TEST,i.default.CULL_FACE=i.default.gl.CULL_FACE,i.default.BLEND=i.default.gl.BLEND,i.default.POINTS=i.default.gl.POINTS,i.default.LINES=i.default.gl.LINES,i.default.TRIANGLES=i.default.gl.TRIANGLES,i.default.LINEAR=i.default.gl.LINEAR,i.default.NEAREST=i.default.gl.NEAREST,i.default.LINEAR_MIPMAP_NEAREST=i.default.gl.LINEAR_MIPMAP_NEAREST,i.default.NEAREST_MIPMAP_LINEAR=i.default.gl.NEAREST_MIPMAP_LINEAR,i.default.LINEAR_MIPMAP_LINEAR=i.default.gl.LINEAR_MIPMAP_LINEAR,i.default.NEAREST_MIPMAP_NEAREST=i.default.gl.NEAREST_MIPMAP_NEAREST,i.default.MIRRORED_REPEAT=i.default.gl.MIRRORED_REPEAT,i.default.CLAMP_TO_EDGE=i.default.gl.CLAMP_TO_EDGE,i.default.SCISSOR_TEST=i.default.gl.SCISSOR_TEST,i.default.UNSIGNED_BYTE=i.default.gl.UNSIGNED_BYTE};e.default=u,t.exports=e.default},function(t,e){"use strict";function r(t,e){var r=t.getExtension(e);if(!r)return!1;var n=e.split("_")[0],a=new RegExp(n+"$");for(var i in r){if("function"==typeof r[i]){var o=i.replace(a,"");i.substring&&(t[o]=r[i].bind(r))}}return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r,t.exports=e.default},function(t,e,r){"use strict";function a(){return u.default.webgl2?u.default.gl.FLOAT:u.default.getExtension("OES_texture_float")?u.default.gl.FLOAT:u.default.gl.UNSIGNED_BYTE}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return o||(s=a()),s};var i=r(3),u=function(t){return t&&t.__esModule?t:{default:t}}(i),o=!1,s=void 0;t.exports=e.default},function(t,e,r){"use strict";function a(){if(u.default.webgl2)return u.default.gl.HALF_FLOAT;var t=u.default.getExtension("OES_texture_half_float");return t?t.HALF_FLOAT_OES:u.default.gl.UNSIGNED_BYTE}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return o||(s=a()),s};var i=r(3),u=function(t){return t&&t.__esModule?t:{default:t}}(i),o=!1,s=void 0;t.exports=e.default},function(t,e,r){t.exports={default:r(125),__esModule:!0}},function(t,e,r){t.exports={default:r(126),__esModule:!0}},function(t,e,r){t.exports={default:r(127),__esModule:!0}},function(t,e,r){t.exports={default:r(129),__esModule:!0}},function(t,e,r){t.exports={default:r(130),__esModule:!0}},function(t,e,r){t.exports={default:r(131),__esModule:!0}},function(t,e,r){(function(n){"use strict";function a(t,e){var r=new XMLHttpRequest;r.onload=function(){this.response,200==this.status&&e&&e(this.response)},r.open("get",t,!0),r.send()}Object.defineProperty(e,"__esModule",{value:!0});var i=r(8),u=void 0===n.document,o=2*Math.PI/360,s=null,l=null,f=null,h=null,c=null,d={libsPath:"./",workerPath:"./",no_flip:!0,use_transferables:!0,onerror:null,verbose:!1,config:{forceParser:!1},init:function(t){t=t||{};for(var e in t)this[e]=t[e];if(this.config=t,u)try{importScripts(this.libsPath+"gl-matrix-min.js",this.libsPath+"tinyxml.js")}catch(r){d.throwException(d.LIBMISSING_ERROR)}s=i.mat4.create(),l=vec3.create(),f=vec3.create(),h=vec3.create(),c=i.quat.create()},load:function(t,e){a(t,function(t){e(t?d.parse(t):null)})},_xmlroot:null,_nodes_by_id:null,_transferables:null,_controllers_found:null,_geometries_found:null,safeString:function(t){return t?this.convertID?this.convertID(t):t.replace(/ /g,"_"):""},LIBMISSING_ERROR:"Libraries loading error, when using workers remember to pass the URL to the tinyxml.js in the options.libsPath",NOXMLPARSER_ERROR:"TinyXML not found, when using workers remember to pass the URL to the tinyxml.js in the options.libsPath (Workers do not allow to access the native XML DOMParser)",throwException:function(t){throw u?self.postMessage({action:"exception",msg:t}):d.onerror&&d.onerror(t),t},getFilename:function(t){var e=t.lastIndexOf("\\");return-1!=e&&(t=t.substr(e+1)),e=t.lastIndexOf("/"),-1!=e&&(t=t.substr(e+1)),t},last_name:0,generateName:function(t){t=t||"name_";var e=t+this.last_name;return this.last_name++,e},parse:function(t,e,r){e=e||{},r=r||"_dae_"+Date.now()+".dae";var i=null,u=null;if(this._transferables=[],this.verbose,n.DOMParser&&!this.config.forceParser)i=new DOMParser,u=i.parseFromString(t,"text/xml"),this.verbose;else{if(!n.DOMImplementation)return d.throwException(d.NOXMLPARSER_ERROR);try{i=new DOMImplementation}catch(o){return d.throwException(d.NOXMLPARSER_ERROR)}u=i.loadXML(t),this.verbose;for(var s=u._nodes_by_id={},l=0,f=u.all.length;f>l;++l){var h=u.all[l];s[h.id]=h,h.getAttribute("sid")&&(s[h.getAttribute("sid")]=h)}this.extra_functions||(this.extra_functions=!0,DOMDocument.prototype.querySelector=DOMElement.prototype.querySelector=function(t){for(var e=t.split(" "),r=this;e.length;){var n=e.shift(),a=n.split("#"),i=a[0],u=a[1],o=i?r.getElementsByTagName(i):r.childNodes;if(u){for(var s=0;s<o.length;s++)if(o.item(s).getAttribute("id")==u){if(0==e.length)return o.item(s);r=o.item(s);break}}else{if(0==e.length)return o.item(0);r=o.item(0)}}return null},DOMDocument.prototype.querySelectorAll=DOMElement.prototype.querySelectorAll=function(t){function e(t,r){if(r){var a=r.shift(),i=t.getElementsByTagName(a);if(0!=r.length)for(var u=0;u<i.length;u++)e(i.item(u),r.concat());else for(var u=0;u<i.length;u++)n.push(i.item(u))}}var r=t.split(" ");if(1==r.length)return this.getElementsByTagName(t);var n=[];e(this,r);var a=new DOMNodeList(this.documentElement);return a._nodes=n,a.length=n.length,a},Object.defineProperty(DOMElement.prototype,"textContent",{get:function(){return this.getChildNodes().item(0).toString()},set:function(){}}))}this._xmlroot=u;var c=u.querySelector("COLLADA");c&&(this._current_DAE_version=c.getAttribute("version"));var v=u.getElementsByTagName("visual_scene").item(0);if(!v)throw"visual_scene XML node not found in DAE";this._nodes_by_id={},this._controllers_found={},this._geometries_found={};var _={object_type:"SceneTree",light:null,materials:{},meshes:{},resources:{},root:{children:[]},external_files:{}},m=u.getElementsByTagName("asset")[0];m&&(_.metadata=this.readAsset(m));for(var p=v.childNodes,l=0;l<p.length;l++)if("node"==p.item(l).localName){var h=this.readNodeTree(p.item(l),_,0,!1);h&&_.root.children.push(h)}for(var l=0;l<p.length;l++)"node"==p.item(l).localName&&this.readNodeInfo(p.item(l),_,0,!1);this.readLibraryControllers(_);var M=this.readAnimations(u,_);if(M){var x="#animations_"+r.substr(0,r.indexOf("."));_.resources[x]=M,_.root.animations=x}return _.images=this.readImages(u),this._nodes_by_id={},this._controllers_found={},this._geometries_found={},this._xmlroot=null,_},readAsset:function(t){for(var e={},r=0;r<t.childNodes.length;r++){var n=t.childNodes.item(r);if(1==n.nodeType)switch(n.localName){case"contributor":var a=n.querySelector("authoring_tool");a&&(e.authoring_tool=a.textContext);break;case"unit":e.unit=n.getAttribute("name");break;default:e[n.localName]=n.textContent}}return e},readNodeTree:function(t,e,r,n){var a=this.safeString(t.getAttribute("id")),i=this.safeString(t.getAttribute("sid"));if(!a&&!i)return null;var u={id:i||a,children:[],_depth:r},o=t.getAttribute("type");o&&(u.type=o);var s=t.getAttribute("name");s&&(u.name=s),this._nodes_by_id[u.id]=u,a&&(this._nodes_by_id[a]=u),i&&(this._nodes_by_id[i]=u),u.model=this.readTransform(t,r,n);for(var l=0;l<t.childNodes.length;l++){var f=t.childNodes.item(l);if(1==f.nodeType)if("node"!=f.localName);else{var h=this.readNodeTree(f,e,r+1,n);h&&u.children.push(h)}}return u},readNodeInfo:function(t,e,r,n,a){var i,u=this.safeString(t.getAttribute("id")),o=this.safeString(t.getAttribute("sid"));if(u||o)i=this._nodes_by_id[u||o];else{if(!a)return null;i=this._nodes_by_id[a.id||a.sid]}if(!i)return null;for(var s=0;s<t.childNodes.length;s++){var l=t.childNodes.item(s);if(1==l.nodeType)if("node"!=l.localName){if("instance_geometry"==l.localName){var f=l.getAttribute("url"),h=f.toString().substr(1);if(i.mesh=h,!e.meshes[f]){var c=this.readGeometry(f,n);c&&(c.name=h,e.meshes[h]=c)}var d=l.querySelectorAll("instance_material");if(d)for(var v=0;v<d.length;++v){var _=d.item(v);if(_){var m=_.getAttribute("target").toString().substr(1);if(!e.materials[m]){var p=this.readMaterial(m);p&&(p.id=m,e.materials[p.id]=p)}0==v?i.material=m:(i.materials||(i.materials=[]),i.materials.push(m))}}}if("instance_controller"==l.localName){var f=l.getAttribute("url"),M=this._xmlroot.querySelector("controller"+f);if(M){var c=this.readController(M,n,e),x=l.querySelector("bind_material");if(x)for(var g=x.querySelectorAll("technique_common"),E=0;E<g.length;E++)for(var b=g.item(E),y=b.querySelectorAll("instance_material"),v=0;v<y.length;v++){var S=y.item(v);if(S){var m=S.getAttribute("target").toString().substr(1);if(!e.materials[m]){var p=this.readMaterial(m);p&&(p.id=m,e.materials[p.id]=p)}0==v?i.material=m:(i.materials||(i.materials=[]),i.materials.push(m))}}if(c){var T=c;"morph"==c.type&&(T=c.mesh,i.morph_targets=c.morph_targets),T.name=f.toString(),i.mesh=f.toString(),e.meshes[f]=T}}}if("instance_light"==l.localName){var f=l.getAttribute("url");this.readLight(i,f)}if("instance_camera"==l.localName){var f=l.getAttribute("url");this.readCamera(i,f)}}else this.readNodeInfo(l,e,r+1,n,t)}},material_translate_table:{},light_translate_table:{point:"omni",directional:"directional",spot:"spot"},camera_translate_table:{xfov:"fov",aspect_ratio:"aspect",znear:"near",zfar:"far"},querySelectorAndId:function(t,e,r){for(var n=t.querySelectorAll(e),a=0;a<n.length;a++){var i=n.item(a).getAttribute("id");if(i&&(i=i.toString())==r)return n.item(a)}return null},getFirstChildElement:function(t,e){for(var r=t.childNodes,n=0;n<r.length;++n){var a=r.item(n);if(a.localName&&!e||e&&e==a.localName)return a}return null},readMaterial:function(t){var e=this.querySelectorAndId(this._xmlroot,"library_materials material",t);if(!e)return null;var r=e.querySelector("instance_effect");if(!r)return null;var n=r.getAttribute("url").substr(1),a=this.querySelectorAndId(this._xmlroot,"library_effects effect",n);if(!a)return null;var i=a.querySelector("technique");if(!i)return null;for(var u=a.querySelectorAll("newparam"),o={},s=0;s<u.length;s++){var l,f=u[s].querySelector("init_from");if(f)l=f.innerHTML;else{l=u[s].querySelector("source").innerHTML}o[u[s].getAttribute("sid")]={parent:l}}var c={},d=this.readImages(this._xmlroot),v=i.querySelector("phong");if(v||(v=i.querySelector("blinn")),v||(v=i.querySelector("lambert")),!v)return null;for(var s=0;s<v.childNodes.length;++s){var _=v.childNodes.item(s);if(_.localName){var m=_.localName.toString();this.material_translate_table[m]&&(m=this.material_translate_table[m]);var p=this.getFirstChildElement(_);if(p)if("color"!=p.localName.toString())if("float"!=p.localName.toString()){if("texture"==p.localName.toString()){c.textures||(c.textures={});var M=p.getAttribute("texture");if(!M)continue;-1===M.indexOf(".")&&(M=this.getParentParam(o,M),d[M]&&(M=d[M].path));var x={map_id:M},g=p.getAttribute("texcoord");x.uvs=g,c.textures[m]=x}}else c[m]=this.readContentAsFloats(p)[0];else{var E=this.readContentAsFloats(p);"RGB_ZERO"==_.getAttribute("opaque")?c[m]=E.subarray(0,4):c[m]=E.subarray(0,3)}}}return c.object_type="Material",c},getParentParam:function(t,e){return t[e]&&t[e].parent?this.getParentParam(t,t[e].parent):e},readLight:function(t,e){function r(t,e){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes.item(r);if(n&&1==n.nodeType)switch(n.localName){case"color":t.color=d.readContentAsFloats(n);break;case"falloff_angle":t.angle_end=d.readContentAsFloats(n)[0],t.angle=t.angle_end-10}}}var n={},a=null;if(e.length>1)a=this._xmlroot.querySelector("library_lights "+e);else{var i=this._xmlroot.querySelector("library_lights");a=this.getFirstChildElement(i,"light")}if(!a)return null;var u=[],o=a.querySelector("technique_common");if(o)for(var s=0;s<o.childNodes.length;s++)1==o.childNodes.item(s).nodeType&&u.push(o.childNodes.item(s));for(var l=a.querySelectorAll("technique"),s=0;s<l.length;s++)for(var f=l.item(s),h=0;h<f.childNodes.length;h++)1==f.childNodes.item(h).nodeType&&u.push(f.childNodes.item(h));for(var s=0;s<u.length;s++){var o=u[s];switch(o.localName){case"point":case"directional":case"spot":n.type=this.light_translate_table[o.localName],r(n,o);break;case"intensity":n.intensity=this.readContentAsFloats(o)[0]}}if(t.model){n.position=[t.model[12],t.model[13],t.model[14]];var c=[-t.model[8],-t.model[9],-t.model[10]];n.target=[n.position[0]+c[0],n.position[1]+c[1],n.position[2]+c[2]]}else n.position=[0,0,0],n.target=[0,-1,0];t.light=n},readCamera:function(t,e){var n={},a=this._xmlroot.querySelector("library_cameras "+e);if(!a)return null;var i=[],u=a.querySelector("technique_common");if(u)for(var o=0;o<u.childNodes.length;o++)1==u.childNodes.item(o).nodeType&&i.push(u.childNodes.item(o));for(var o=0;o<i.length;o++){var s=i[o];!function(t,e){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes.item(r);n&&1==n.nodeType&&(t[d.camera_translate_table[n.localName]||n.localName]=parseFloat(n.textContent))}}(n,s)}n.yfov&&!n.fov&&n.aspect&&(n.fov=n.yfov*n.aspect),t.camera=n},readTransform:function(t,e,r){for(var n=i.mat4.create(),a=i.mat4.create(),u=i.quat.create(),l=0;l<t.childNodes.length;l++){var f=t.childNodes.item(l);if(f&&1==f.nodeType){if("matrix"==f.localName){var n=this.readContentAsFloats(f);return this.transformMatrix(n,0==e),n}if("translate"!=f.localName)if("rotate"!=f.localName){if("scale"==f.localName){var h=this.readContentAsFloats(f);if(r){var c=h[1];h[1]=h[2],h[2]=-c}i.mat4.scale(n,n,h)}}else{var h=this.readContentAsFloats(f);if(4==h.length){var d=f.getAttribute("sid");if("jointOrientX"==d&&(h[3]+=90,!0),r){var c=h[1];h[1]=h[2],h[2]=-c}0!=h[3]&&(i.quat.setAxisAngle(u,h.subarray(0,3),h[3]*o),i.mat4.fromQuat(a,u),i.mat4.multiply(n,n,a))}}else{var h=this.readContentAsFloats(f);if(r&&e>0){var c=h[1];h[1]=h[2],h[2]=-c}i.mat4.translate(n,n,h)}}}return n},readTransform2:function(t,e,r){for(var n=i.mat4.create(),a=i.quat.create(),u=i.mat4.create(),s=i.quat.create(),l=vec3.create(),f=vec3.fromValues(1,1,1),c=0;c<t.childNodes.length;c++){var d=t.childNodes.item(c);if("matrix"==d.localName){var n=this.readContentAsFloats(d);return this.transformMatrix(n,0==e),n}if("translate"!=d.localName)if("rotate"!=d.localName){if("scale"==d.localName){var v=this.readContentAsFloats(d);if(r){var _=v[1];v[1]=v[2],v[2]=-_}f.set(v)}}else{var v=this.readContentAsFloats(d);if(4==v.length){var m=d.getAttribute("sid");if("jointOrientX"==m&&(v[3]+=90,!0),r){var _=v[1];v[1]=v[2],v[2]=-_}0!=v[3]&&(i.quat.setAxisAngle(s,v.subarray(0,3),v[3]*o),i.quat.multiply(a,a,s))}}else{var v=this.readContentAsFloats(d);l.set(v)}}if(r&&e>0){var _=l[1];l[1]=l[2],l[2]=-_}return i.mat4.translate(n,n,l),i.mat4.fromQuat(u,a),i.mat4.multiply(n,n,u),i.mat4.scale(n,n,f),n},readGeometry:function(t,e,r){if(void 0!==this._geometries_found[t])return this._geometries_found[t];var n=this._xmlroot.getElementById(t.substr(1));if(!n)return this._geometries_found[t]=null,null;if("controller"==n.localName){var a=this.readController(n,e,r);return this._geometries_found[t]=a,a}if("geometry"!=n.localName)return this._geometries_found[t]=null,null;var i=n.querySelector("mesh");if(!i)return this._geometries_found[t]=null,null;for(var o={},s=i.querySelectorAll("source"),l=0;l<s.length;l++){var f=s.item(l);if(f.querySelector){var h=f.querySelector("float_array");if(h){var c=this.readContentAsFloats(h),d=f.querySelector("accessor"),v=parseInt(d.getAttribute("stride"));o[f.getAttribute("id")]={stride:v,data:c}}}}var _=i.querySelector("vertices input"),m=o[_.getAttribute("source").substr(1)];o[i.querySelector("vertices").getAttribute("id")]=m;var p=null,M=i.querySelector("polygons");if(M&&(p=this.readTriangles(M,o)),!p){var x=i.querySelectorAll("triangles");x&&x.length&&(p=this.readTriangles(x,o))}if(!p){var g=i.querySelector("polylist");g&&(p=this.readPolylist(g,o))}if(!p){var E=i.querySelector("linestrips");E&&(p=this.readLineStrip(o,E))}if(!p)return this._geometries_found[t]=null,null;if(e&&!this.no_flip){for(var b=0,y=p.vertices,l=0,S=y.length;S>l;l+=3)b=y[l+1],y[l+1]=y[l+2],y[l+2]=-b;y=p.normals;for(var l=0,S=y.length;S>l;l+=3)b=y[l+1],y[l+1]=y[l+2],y[l+2]=-b}if(u&&this.use_transferables)for(var l in p){var T=p[l];T&&T.buffer&&T.length>100&&this._transferables.push(T.buffer)}return p.filename=t,p.object_type="Mesh",this._geometries_found[t]=p,p},readTriangles:function(t,e){for(var r=[],n=[],a=0,i={},u=[],o=[],s=0,f="",h=0;h<t.length;h++){var c=t.item(h),d="triangles"==c.localName;f=c.getAttribute("material"),0==h&&(n=this.readShapeInputs(c,e));for(var v=c.querySelectorAll("p"),_=(n.length,0);_<v.length;_++){var m=v.item(_);if(!m||!m.textContent)break;var p=m.textContent.trim().split(" "),M=-1,x=-1,g=-1,E=1;for(var b in n)E=Math.max(E,n[b][4]+1);for(var y=0,S=p.length;S>y;y+=E){var T=p.slice(y,y+E).join(" ");if(g=x,i.hasOwnProperty(T))x=i[T];else{for(var I=0;I<n.length;++I){var A=n[I],F=A[1],D=A[3],R=parseInt(p[y+A[4]]);0==I&&(u[F.length/A[2]]=R),R*=A[2];for(var w=0;w<A[2];++w){if(void 0===D[R+w])throw"UNDEFINED!";F.push(D[R+w])}}x=a,a+=1,i[T]=x}d||(0==y&&(M=x),y>2&&(o.push(M),o.push(g))),o.push(x)}}var P={name:"group"+h,start:s,length:o.length-s,material:f||""};s=o.length,r.push(P)}var N={vertices:new Float32Array(n[0][1]),info:{groups:r},_remap:new Uint32Array(u)};return this.transformMeshInfo(N,n,o),N},readPolylist:function(t,e){var r=[],n=0,a={},i=[],u=[];t.getAttribute("material"),r=this.readShapeInputs(t,e);for(var s=t.querySelector("vcount"),l=this.readContentAsUInt32(s),f=t.querySelector("p"),h=this.readContentAsUInt32(f),c=r.length,d=0,v=0,_=l.length;_>v;++v)for(var m=l[v],p=-1,M=-1,x=-1,g=0;m>g;++g){var E=h.subarray(d,d+c).join(" ");if(x=M,a.hasOwnProperty(E))M=a[E];else{for(var b=0;b<r.length;++b){var y=r[b],S=parseInt(h[d+b]),T=y[1],I=y[3];0==b&&(i[T.length/c]=S),S*=y[2];for(var A=0;A<y[2];++A)T.push(I[S+A])}M=n,n+=1,a[E]=M}m>3&&(0==g&&(p=M),g>2&&(u.push(p),u.push(x))),u.push(M),d+=c}var F={vertices:new Float32Array(r[0][1]),info:{},_remap:new Uint32Array(i)};return this.transformMeshInfo(F,r,u),F},readShapeInputs:function(t,e){for(var r=[],n=t.querySelectorAll("input"),a=0;a<n.length;a++){var i=n.item(a);if(i.getAttribute){var u=i.getAttribute("semantic").toUpperCase(),o=e[i.getAttribute("source").substr(1)],s=parseInt(i.getAttribute("offset")),l=0;i.getAttribute("set")&&(l=parseInt(i.getAttribute("set"))),r.push([u,[],o.stride,o.data,s,l])}}return r},transformMeshInfo:function(t,e,r){for(var n={normal:"normals",texcoord:"coords"},a=1;a<e.length;++a){var i=e[a][0].toLowerCase(),u=e[a][1];u.length&&(n[i]&&(i=n[i]),t[i]&&(i+=e[a][5]),t[i]=new Float32Array(u))}return r&&r.length&&(t.vertices.length>65536?t.triangles=new Uint32Array(r):t.triangles=new Uint16Array(r)),t},readLineStrip:function(t,e){for(var r=[],n=0,a={},i=[],u=[],s=e.querySelectorAll("input"),l=0;l<s.length;l++){var f=s.item(l);if(f.getAttribute){var h=f.getAttribute("semantic").toUpperCase(),c=t[f.getAttribute("source").substr(1)],d=parseInt(f.getAttribute("offset")),v=0;f.getAttribute("set")&&(v=parseInt(f.getAttribute("set"))),r.push([h,[],c.stride,c.data,d,v])}}for(var _=e.querySelectorAll("p"),m=r.length,l=0;l<_.length;l++){var p=_.item(l);if(!p||!p.textContent)break;for(var M=p.textContent.trim().split(" "),x=-1,E=0,b=M.length;b>E;E+=m){var y=M.slice(E,E+m).join(" ");if(x,a.hasOwnProperty(y))x=a[y];else{for(var S=0;S<r.length;++S){var T=r[S],I=parseInt(M[E+S]),A=T[1],F=T[3];0==S&&(i[A.length/m]=I),I*=T[2];for(var D=0;D<T[2];++D)A.push(F[I+D])}x=n,n+=1,a[y]=x}u.push(x)}}var R={primitive:"line_strip",vertices:new Float32Array(r[0][1]),info:{}};return this.transformMeshInfo(R,r,u)},findXMLNodeById:function(t,e,r){if(this._xmlroot._nodes_by_id){var n=this._xmlroot._nodes_by_id[r];if(n&&n.localName==e)return n}else{var n=this._xmlroot.getElementById(r);if(n)return n}for(var a=t.childNodes,i=0;i<a.length;++i){var u=a.item(i);if(1==u.nodeType&&u.localName==e){if(u.getAttribute("id")==r)return u}}return null},readImages:function(t){var e=t.querySelector("library_images");if(!e)return null;for(var r={},n=e.childNodes,a=0;a<n.length;++a){var i=n.item(a);if(1==i.nodeType){var u=i.querySelector("init_from");if(u&&u.textContent){var o=this.getFilename(u.textContent),s=i.getAttribute("id");r[s]={filename:o,map:s,name:i.getAttribute("name"),path:u.textContent}}}}return r},readAnimations:function(t,e){var r=t.querySelector("library_animations");if(!r)return null;for(var n=r.childNodes,a={object_type:"Animation",takes:{}},i={tracks:[]},u=i.tracks,o=0;o<n.length;++o){var s=n.item(o);if(1==s.nodeType&&"animation"==s.localName){if(s.getAttribute("id"))this.readAnimation(s,u);else{var f=s.querySelectorAll("animation");if(f.length)for(var h=0;h<f.length;++h){var c=f.item(h);this.readAnimation(c,u)}else this.readAnimation(s,u)}}}if(!u.length)return null;for(var d=0,o=0;o<u.length;++o)d<u[o].duration&&(d=u[o].duration);return i.name="default",i.duration=d,a.takes[i.name]=i,a},readAnimation:function(t,e){if("animation"!=t.localName)return null;var r=(t.getAttribute("id"),t.querySelectorAll("channel"));if(!r.length)return null;for(var n=e||[],a=0;a<r.length;++a){var i=this.readChannel(r.item(a),t);i&&n.push(i)}return n},readChannel:function(t,e){if("channel"!=t.localName||"animation"!=e.localName)return null;var r=t.getAttribute("source"),n=t.getAttribute("target"),a=this.findXMLNodeById(e,"sampler",r.substr(1));if(!a)return null;for(var i={},o={},s={},l=a.querySelectorAll("input"),f=null,h=0;h<l.length;h++){var c=l.item(h),d=c.getAttribute("source"),v=c.getAttribute("semantic"),_=this.findXMLNodeById(e,"source",d.substr(1));if(_){var m=_.querySelector("param");if(m){var p=m.getAttribute("type");i[v]={source:d,type:p};var M=null;if("float"==p||"float4x4"==p){var x=_.querySelector("float_array"),g=this.readContentAsFloats(x);s[d]=g,M=g;var E=m.getAttribute("name");"TIME"==E&&(f=M),"OUTPUT"==v&&(E=v),E&&(o[E]=p)}}}}if(!f)return null;var b=n.split("/"),y={},S=b[0],T=this._nodes_by_id[S],I=T.id+"/"+b[1];y.name=b[1],y.property=I;var p="number",A=1,F=o.OUTPUT;switch(F){case"float":A=1;break;case"float3x3":A=9,p="mat3";break;case"float4x4":A=16,p="mat4"}y.type=p,y.value_size=A,y.duration=f[f.length-1];var D=s[i.OUTPUT.source];if(!D)return null;for(var R=f.length,w=A+1,P=new Float32Array(R*w),h=0;h<f.length;++h){P[h*w]=f[h];var N=D.subarray(h*A,(h+1)*A);"float4x4"==F&&this.transformMatrix(N,T?0==T._depth:0),P.set(N,h*w+1)}if(u&&this.use_transferables){var O=P;O&&O.buffer&&O.length>100&&this._transferables.push(O.buffer)}return y.data=P,y},findNode:function(t,e){if(t.id==e)return t;if(t.children)for(var r in t.children){var n=this.findNode(t.children[r],e);if(n)return n}return null},readLibraryControllers:function(t){var e=this._xmlroot.querySelector("library_controllers");if(!e)return null;for(var r=e.childNodes,n=0;n<r.length;++n){var a=r.item(n);if(1==a.nodeType&&"controller"==a.localName){var i=a.getAttribute("id");this._controllers_found[i]||this.readController(a,null,t)}}},readController:function(t,e,r){if("controller"==!t.localName)return null;var n=t.getAttribute("id");if(this._controllers_found[n])return this._controllers_found[n];var a=null,i=t.querySelector("skin");i&&(a=this.readSkinController(i,e,r));var u=t.querySelector("morph");return u&&(a=this.readMorphController(u,e,r,a)),this._controllers_found[n]?n+="_1blah":this._controllers_found[n]=a,a},readSkinController:function(t,e,r){var n=t.getAttribute("source"),a=this.readGeometry(n,e,r);if(!a)return null;var u=this.readSources(t,e);if(!u)return null;var o=null,s=t.querySelector("bind_shape_matrix");s?(o=this.readContentAsFloats(s),this.transformMatrix(o,!0,!0)):o=i.mat4.create();var l=[],f=t.querySelector("joints");if(f){for(var h=null,c=null,d=f.querySelectorAll("input"),v=0;v<d.length;v++){var _=d[v],m=_.getAttribute("semantic").toUpperCase(),p=_.getAttribute("source"),M=u[p.substr(1)];"JOINT"==m?h=M:"INV_BIND_MATRIX"==m&&(c=M)}if(!c||!h)return null;for(var v in h){var x=c.subarray(16*v,16*v+16),g=h[v],E=this._nodes_by_id[g];E&&(this.transformMatrix(x,0==E._depth,!0),l.push([g,x]))}}var b=t.querySelector("vertex_weights");if(b){for(var y=null,d=b.querySelectorAll("input"),v=0;v<d.length;v++)"WEIGHT"==d[v].getAttribute("semantic").toUpperCase()&&(y=u[d.item(v).getAttribute("source").substr(1)]);if(!y)throw"no weights found";for(var S=b.querySelector("vcount"),T=this.readContentAsUInt32(S),I=b.querySelector("v"),A=this.readContentAsUInt32(I),F=a.vertices.length/3,D=new Float32Array(4*F),R=new Uint8Array(4*F),w=0,P=a._remap,N=0,v=0,O=T.length;O>v;++v){for(var L=T[v],k=w,C=R.subarray(4*v,4*v+4),U=D.subarray(4*v,4*v+4),B=0,X=0;L>X&&4>X;++X)C[X]=A[k+2*X],C[X]>N&&(N=C[X]),U[X]=y[A[k+2*X+1]],B+=U[X];if(L>4&&1>B)for(var q=1/B,X=0;4>X;++X)U[X]*=q;w+=2*L}for(var V=new Float32Array(4*F),z=new Uint8Array(4*F),j=[],v=0;F>v;++v){for(var G=4*P[v],U=D.subarray(G,G+4),C=R.subarray(G,G+4),Y=0;3>Y;++Y){for(var W=Y,H=U[Y],X=Y+1;4>X;++X)U[X]<=H||(W=X,H=U[X]);if(W!=Y){var Z=U[Y];U[Y]=U[W],U[W]=Z,Z=C[Y],C[Y]=C[W],C[W]=Z}}V.set(U,4*v),z.set(C,4*v),U[0]&&(j[C[0]]=!0),U[1]&&(j[C[1]]=!0),U[2]&&(j[C[2]]=!0),U[3]&&(j[C[3]]=!0)}l.length;for(var Q=[],K={},v=0;v<j.length;++v)j[v]&&(K[v]=Q.length,Q.push(l[v]));if(Q.length<l.length){for(var v=0;v<z.length;v++)z[v]=K[z[v]];l=Q}a.weights=V,a.bone_indices=z,a.bones=l,a.bind_matrix=o}return a},readMorphController:function(t,e,r,n){var a=t.getAttribute("source"),i=this.readGeometry(a,e,r);if(!i)return null;var u=this.readSources(t,e),o=[],s=t.querySelector("targets");if(!s)return null;for(var l=s.querySelectorAll("input"),f=null,h=null,c=0;c<l.length;c++){var d=l.item(c),v=d.getAttribute("semantic").toUpperCase(),_=u[d.getAttribute("source").substr(1)];"MORPH_TARGET"==v?f=_:"MORPH_WEIGHT"==v&&(h=_)}if(!f||!h)return null;for(var c in f){var m="#"+f[c],p=this.readGeometry(m,e,r);r.meshes[m]=p,o.push({mesh:m,weight:h[c]})}return i.morph_targets=o,i},readBindMaterials:function(t,e){for(var r=[],n=t.querySelectorAll("technique_common"),a=0;a<n.length;a++)for(var i=n.item(a),u=i.querySelectorAll("instance_material"),o=0;o<u.length;o++){var s=u.item(o);s&&r.push(s.getAttribute("symbol"))}return r},readSources:function(t,e){for(var r={},n=t.querySelectorAll("source"),a=0;a<n.length;a++){var i=n.item(a);if(i.querySelector){if(i.querySelector("float_array")){var o=this.readContentAsFloats(i);r[i.getAttribute("id")]=o}else{var s=i.querySelector("Name_array");if(s){var l=this.readContentAsStringsArray(s);if(!l)continue;r[i.getAttribute("id")]=l}else{var f=i.querySelector("IDREF_array");if(f){var l=this.readContentAsStringsArray(f);if(!l)continue;r[i.getAttribute("id")]=l}}}}}return r},readContentAsUInt32:function(t){if(!t)return null;var e=t.textContent;if(e=e.replace(/\n/gi," "),e=e.trim(),0==e.length)return null;for(var r=e.split(" "),n=new Uint32Array(r.length),a=0;a<r.length;a++)n[a]=parseInt(r[a]);return n},readContentAsFloats:function(t){if(!t)return null;var e=t.textContent;e=e.replace(/\n/gi," "),e=e.replace(/\s\s+/gi," "),e=e.replace(/\t/gi,""),e=e.trim();for(var r=e.split(" "),n=t.getAttribute("count"),a=n?parseInt(n):r.length,i=new Float32Array(a),u=0;u<r.length;u++)i[u]=parseFloat(r[u]);return i},readContentAsStringsArray:function(t){if(!t)return null;var e=t.textContent;e=e.replace(/\n/gi," "),e=e.replace(/\s\s/gi," "),e=e.trim();for(var r=e.split(" "),n=0;n<r.length;n++)r[n]=r[n].trim();if(t.getAttribute("count")&&parseInt(t.getAttribute("count"))!=r.length){var a=[],i="";for(var u in r)i?i+=" "+r[u]:i=r[u],this._nodes_by_id[this.safeString(i)]&&(a.push(this.safeString(i)),i="");var o=parseInt(t.getAttribute("count"));return a.length==o?a:null}return r},max3d_matrix_0:new Float32Array([0,-1,0,0,0,0,-1,0,1,0,0,-0,0,0,0,1]),transformMatrix:function(t,e,r){if(i.mat4.transpose(t,t),this.no_flip)return t;if(e){var n=new Float32Array(t.subarray(4,8));t.set(t.subarray(8,12),4),t.set(n,8),n=t.subarray(8,12),vec4.scale(n,n,-1)}else{var a=i.mat4.create(),u=t;a.set([u[0],u[2],-u[1]],0),a.set([u[8],u[10],-u[9]],4),a.set([-u[4],-u[6],u[5]],8),a.set([u[12],u[14],-u[13]],12),u.set(a)}return t}};e.default=d,t.exports=e.default}).call(e,function(){return this}())},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(123),i=function(t){return t&&t.__esModule?t:{default:t}}(a),u=r(8),o=function(t){function e(t){var e=void 0;for(var r in n)r===t&&(e=n[r]);var a={};return e.diffuse&&(a.diffuseColor=e.diffuse),a.diffuseColor=e.diffuse||[0,0,0],a.shininess=e.shininess||0,e.textures&&(e.textures.diffuse&&(a.diffuseMapID=e.textures.diffuse.map_id),e.textures.normal&&(a.normalMapID=e.textures.normal.map_id)),a}function r(t,n){var o=u.mat4.create();if(t.model?u.mat4.multiply(o,n,t.model):u.mat4.copy(o,n),t.children.length>0&&t.children.forEach(function(t){r(t,o)}),t.mesh){var s={};s.modelMatrix=o,s.mesh=a[t.mesh],s.id=t.id,s.name=t.name,s.material=e(t.material),i.push(s)}}var n=t.materials,a=t.meshes,i=[],o=[];for(var s in a){var l=a[s],f=l.vertices,h=l.normals,c=l.coords,d=l.triangles,v={vertices:f,normals:h,coords:c,triangles:d};o.push({id:s,buffers:v})}var _=u.mat4.create();return r(t.root,_),i},s=function(t){var e=i.default.parse(t);return o(e)},l=function(t,e){i.default.load(t,function(t){e(o(t))})},f={load:l,parse:s};e.default=f,t.exports=e.default},function(t,e,r){r(150);var n=r(10).Object;t.exports=function(t,e){return n.create(t,e)}},function(t,e,r){r(151);var n=r(10).Object;t.exports=function(t,e,r){return n.defineProperty(t,e,r)}},function(t,e,r){r(152);var n=r(10).Object;t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)}},function(t,e,r){r(153),t.exports=r(10).Object.getPrototypeOf},function(t,e,r){r(154),t.exports=r(10).Object.setPrototypeOf},function(t,e,r){r(157),r(155),r(158),r(159),t.exports=r(10).Symbol},function(t,e,r){r(156),r(160),t.exports=r(52).f("iterator")},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(){}},function(t,e,r){var n=r(15),a=r(148),i=r(147);t.exports=function(t){return function(e,r,u){var o,s=n(e),l=a(s.length),f=i(u,l);if(t&&r!=r){for(;l>f;)if((o=s[f++])!=o)return!0}else for(;l>f;f++)if((t||f in s)&&s[f]===r)return t||f||0;return!t&&-1}}},function(t,e,r){var n=r(28),a=r(73),i=r(45);t.exports=function(t){var e=n(t),r=a.f;if(r)for(var u,o=r(t),s=i.f,l=0;o.length>l;)s.call(t,u=o[l++])&&e.push(u);return e}},function(t,e,r){t.exports=r(14).document&&document.documentElement},function(t,e,r){var n=r(67);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e,r){var n=r(67);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){"use strict";var n=r(43),a=r(29),i=r(46),u={};r(21)(u,r(22)("iterator"),function(){return this}),t.exports=function(t,e,r){t.prototype=n(u,{next:a(1,r)}),i(t,e+" Iterator")}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){var n=r(28),a=r(15);t.exports=function(t,e){for(var r,i=a(t),u=n(i),o=u.length,s=0;o>s;)if(i[r=u[s++]]===e)return r}},function(t,e,r){var n=r(30)("meta"),a=r(26),i=r(18),u=r(19).f,o=0,s=Object.isExtensible||function(){return!0},l=!r(25)(function(){return s(Object.preventExtensions({}))}),f=function(t){u(t,n,{value:{i:"O"+ ++o,w:{}}})},h=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,n)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[n].i},c=function(t,e){if(!i(t,n)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[n].w},d=function(t){return l&&v.NEED&&s(t)&&!i(t,n)&&f(t),t},v=t.exports={KEY:n,NEED:!1,fastKey:h,getWeak:c,onFreeze:d}},function(t,e,r){var n=r(19),a=r(24),i=r(28);t.exports=r(17)?Object.defineProperties:function(t,e){a(t);for(var r,u=i(e),o=u.length,s=0;o>s;)n.f(t,r=u[s++],e[r]);return t}},function(t,e,r){var n=r(15),a=r(72).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return a(t)}catch(e){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?o(t):a(n(t))}},function(t,e,r){var n=r(26),a=r(24),i=function(t,e){if(a(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{n=r(68)(Function.call,r(44).f(Object.prototype,"__proto__").set,2),n(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,r){return i(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:i}},function(t,e,r){var n=r(49),a=r(39);t.exports=function(t){return function(e,r){var i,u,o=String(a(e)),s=n(r),l=o.length;return 0>s||s>=l?t?"":void 0:(i=o.charCodeAt(s),55296>i||i>56319||s+1===l||(u=o.charCodeAt(s+1))<56320||u>57343?t?o.charAt(s):i:t?o.slice(s,s+2):u-56320+(i-55296<<10)+65536)}}},function(t,e,r){var n=r(49),a=Math.max,i=Math.min;t.exports=function(t,e){return t=n(t),0>t?a(t+e,0):i(t,e)}},function(t,e,r){var n=r(49),a=Math.min;t.exports=function(t){return t>0?a(n(t),9007199254740991):0}},function(t,e,r){"use strict";var n=r(133),a=r(140),i=r(41),u=r(15);t.exports=r(71)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,r):"values"==e?a(0,t[r]):a(0,[r,t[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},function(t,e,r){var n=r(20);n(n.S,"Object",{create:r(43)})},function(t,e,r){var n=r(20);n(n.S+n.F*!r(17),"Object",{defineProperty:r(19).f})},function(t,e,r){var n=r(15),a=r(44).f;r(76)("getOwnPropertyDescriptor",function(){return function(t,e){return a(n(t),e)}})},function(t,e,r){var n=r(78),a=r(74);r(76)("getPrototypeOf",function(){return function(t){return a(n(t))}})},function(t,e,r){var n=r(20);n(n.S,"Object",{setPrototypeOf:r(145).set})},function(t,e){},function(t,e,r){"use strict";var n=r(146)(!0);r(71)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})})},function(t,e,r){"use strict";var n=r(14),a=r(18),i=r(17),u=r(20),o=r(77),s=r(142).KEY,l=r(25),f=r(48),h=r(46),c=r(30),d=r(22),v=r(52),_=r(51),m=r(141),p=r(135),M=r(138),x=r(24),g=r(15),E=r(50),b=r(29),y=r(43),S=r(144),T=r(44),I=r(19),A=r(28),F=T.f,D=I.f,R=S.f,w=n.Symbol,P=n.JSON,N=P&&P.stringify,O="prototype",L=d("_hidden"),k=d("toPrimitive"),C={}.propertyIsEnumerable,U=f("symbol-registry"),B=f("symbols"),X=f("op-symbols"),q=Object[O],V="function"==typeof w,z=n.QObject,j=!z||!z[O]||!z[O].findChild,G=i&&l(function(){return 7!=y(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=F(q,e);n&&delete q[e],D(t,e,r),n&&t!==q&&D(q,e,n)}:D,Y=function(t){var e=B[t]=y(w[O]);return e._k=t,e},W=V&&"symbol"==typeof w.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof w},H=function(t,e,r){return t===q&&H(X,e,r),x(t),e=E(e,!0),x(r),a(B,e)?(r.enumerable?(a(t,L)&&t[L][e]&&(t[L][e]=!1),r=y(r,{enumerable:b(0,!1)})):(a(t,L)||D(t,L,b(1,{})),t[L][e]=!0),G(t,e,r)):D(t,e,r)},Z=function(t,e){x(t);for(var r,n=p(e=g(e)),a=0,i=n.length;i>a;)H(t,r=n[a++],e[r]);return t},Q=function(t,e){return void 0===e?y(t):Z(y(t),e)},K=function(t){var e=C.call(this,t=E(t,!0));return!(this===q&&a(B,t)&&!a(X,t))&&(!(e||!a(this,t)||!a(B,t)||a(this,L)&&this[L][t])||e)},J=function(t,e){if(t=g(t),e=E(e,!0),t!==q||!a(B,e)||a(X,e)){var r=F(t,e);return!r||!a(B,e)||a(t,L)&&t[L][e]||(r.enumerable=!0),r}},$=function(t){for(var e,r=R(g(t)),n=[],i=0;r.length>i;)a(B,e=r[i++])||e==L||e==s||n.push(e);return n},tt=function(t){for(var e,r=t===q,n=R(r?X:g(t)),i=[],u=0;n.length>u;)a(B,e=n[u++])&&(!r||a(q,e))&&i.push(B[e]);return i};V||(w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor!");var t=c(arguments.length>0?arguments[0]:void 0),e=function(r){this===q&&e.call(X,r),a(this,L)&&a(this[L],t)&&(this[L][t]=!1),G(this,t,b(1,r))};return i&&j&&G(q,t,{configurable:!0,set:e}),Y(t)},o(w[O],"toString",function(){return this._k}),T.f=J,I.f=H,r(72).f=S.f=$,r(45).f=K,r(73).f=tt,i&&!r(42)&&o(q,"propertyIsEnumerable",K,!0),v.f=function(t){return Y(d(t))}),u(u.G+u.W+u.F*!V,{Symbol:w});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)d(et[rt++]);for(var et=A(d.store),rt=0;et.length>rt;)_(et[rt++]);u(u.S+u.F*!V,"Symbol",{for:function(t){return a(U,t+="")?U[t]:U[t]=w(t)},keyFor:function(t){if(W(t))return m(U,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){j=!0},useSimple:function(){j=!1}}),u(u.S+u.F*!V,"Object",{create:Q,defineProperty:H,defineProperties:Z,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:tt}),P&&u(u.S+u.F*(!V||l(function(){var t=w();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!W(t)){for(var e,r,n=[t],a=1;arguments.length>a;)n.push(arguments[a++]);return e=n[1],"function"==typeof e&&(r=e),!r&&M(e)||(e=function(t,e){return r&&(e=r.call(this,t,e)),W(e)?void 0:e}),n[1]=e,N.apply(P,n)}}}),w[O][k]||r(21)(w[O],k,w[O].valueOf),h(w,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e,r){r(51)("asyncIterator")},function(t,e,r){r(51)("observable")},function(t,e,r){r(149);for(var n=r(14),a=r(21),i=r(41),u=r(22)("toStringTag"),o=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],s=0;5>s;s++){var l=o[s],f=n[l],h=f&&f.prototype;h&&!h[u]&&a(h,u,l),i[l]=i.Array}},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.fromValues=function(t,e,r,a){var i=new n.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=a,i},a.set=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},a.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r*i-a*n;return u?(u=1/u,t[0]=i*u,t[1]=-n*u,t[2]=-a*u,t[3]=r*u,t):null},a.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},a.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},a.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=r[0],s=r[1],l=r[2],f=r[3];return t[0]=n*o+i*s,t[1]=a*o+u*s,t[2]=n*l+i*f,t[3]=a*l+u*f,t},a.mul=a.multiply,a.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(r),s=Math.cos(r);return t[0]=n*s+i*o,t[1]=a*s+u*o,t[2]=n*-o+i*s,t[3]=a*-o+u*s,t},a.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=r[0],s=r[1];return t[0]=n*o,t[1]=a*o,t[2]=i*s,t[3]=u*s,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},a.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},a.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},a.sub=a.subtract,a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=e[0],s=e[1],l=e[2],f=e[3];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-l)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(u-f)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(f))},a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},t.exports=a},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.fromValues=function(t,e,r,a,i,u){var o=new n.ARRAY_TYPE(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=a,o[4]=i,o[5]=u,o},a.set=function(t,e,r,n,a,i,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=u,t},a.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=r*i-n*a;return s?(s=1/s,t[0]=i*s,t[1]=-n*s,t[2]=-a*s,t[3]=r*s,t[4]=(a*o-i*u)*s,t[5]=(n*u-r*o)*s,t):null},a.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},a.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=r[0],f=r[1],h=r[2],c=r[3],d=r[4],v=r[5];return t[0]=n*l+i*f,t[1]=a*l+u*f,t[2]=n*h+i*c,t[3]=a*h+u*c,t[4]=n*d+i*v+o,t[5]=a*d+u*v+s,t},a.mul=a.multiply,a.rotate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=Math.sin(r),f=Math.cos(r);return t[0]=n*f+i*l,t[1]=a*f+u*l,t[2]=n*-l+i*f,t[3]=a*-l+u*f,t[4]=o,t[5]=s,t},a.scale=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=r[0],f=r[1];return t[0]=n*l,t[1]=a*l,t[2]=i*f,t[3]=u*f,t[4]=o,t[5]=s,t},a.translate=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=r[0],f=r[1];return t[0]=n,t[1]=a,t[2]=i,t[3]=u,t[4]=n*l+i*f+o,t[5]=a*l+u*f+s,t},a.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},a.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],l=e[0],f=e[1],h=e[2],c=e[3],d=e[4],v=e[5];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-c)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(c))&&Math.abs(o-d)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(s-v)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))},t.exports=a},function(t,e,r){var n=r(11),a={scalar:{},SIMD:{}};a.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.clone=function(t){var e=new n.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.fromValues=function(t,e,r,a,i,u,o,s,l,f,h,c,d,v,_,m){var p=new n.ARRAY_TYPE(16);return p[0]=t,p[1]=e,p[2]=r,p[3]=a,p[4]=i,p[5]=u,p[6]=o,p[7]=s,p[8]=l,p[9]=f,p[10]=h,p[11]=c,p[12]=d,p[13]=v,p[14]=_,p[15]=m,p},a.set=function(t,e,r,n,a,i,u,o,s,l,f,h,c,d,v,_,m){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=s,t[8]=l,t[9]=f,t[10]=h,t[11]=c,t[12]=d,t[13]=v,t[14]=_,t[15]=m,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.scalar.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],a=e[3],i=e[6],u=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=a,t[13]=u,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},a.SIMD.transpose=function(t,e){var r,n,a,i,u,o,s,l,f,h;return r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.shuffle(r,n,0,1,4,5),o=SIMD.Float32x4.shuffle(a,i,0,1,4,5),s=SIMD.Float32x4.shuffle(u,o,0,2,4,6),l=SIMD.Float32x4.shuffle(u,o,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),u=SIMD.Float32x4.shuffle(r,n,2,3,6,7),o=SIMD.Float32x4.shuffle(a,i,2,3,6,7),f=SIMD.Float32x4.shuffle(u,o,0,2,4,6),h=SIMD.Float32x4.shuffle(u,o,1,3,5,7),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,h),t},a.transpose=n.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8],h=e[9],c=e[10],d=e[11],v=e[12],_=e[13],m=e[14],p=e[15],M=r*o-n*u,x=r*s-a*u,g=r*l-i*u,E=n*s-a*o,b=n*l-i*o,y=a*l-i*s,S=f*_-h*v,T=f*m-c*v,I=f*p-d*v,A=h*m-c*_,F=h*p-d*_,D=c*p-d*m,R=M*D-x*F+g*A+E*I-b*T+y*S;return R?(R=1/R,t[0]=(o*D-s*F+l*A)*R,t[1]=(a*F-n*D-i*A)*R,t[2]=(_*y-m*b+p*E)*R,t[3]=(c*b-h*y-d*E)*R,t[4]=(s*I-u*D-l*T)*R,t[5]=(r*D-a*I+i*T)*R,t[6]=(m*g-v*y-p*x)*R,t[7]=(f*y-c*g+d*x)*R,t[8]=(u*F-o*I+l*S)*R,t[9]=(n*I-r*F-i*S)*R,t[10]=(v*b-_*g+p*M)*R,t[11]=(h*g-f*b-d*M)*R,t[12]=(o*T-u*A-s*S)*R,t[13]=(r*A-n*T+a*S)*R,t[14]=(_*x-v*E-m*M)*R,t[15]=(f*E-h*x+c*M)*R,t):null},a.SIMD.invert=function(t,e){var r,n,a,i,u,o,s,l,f,h,c=SIMD.Float32x4.load(e,0),d=SIMD.Float32x4.load(e,4),v=SIMD.Float32x4.load(e,8),_=SIMD.Float32x4.load(e,12);return u=SIMD.Float32x4.shuffle(c,d,0,1,4,5),n=SIMD.Float32x4.shuffle(v,_,0,1,4,5),r=SIMD.Float32x4.shuffle(u,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,u,1,3,5,7),u=SIMD.Float32x4.shuffle(c,d,2,3,6,7),i=SIMD.Float32x4.shuffle(v,_,2,3,6,7),a=SIMD.Float32x4.shuffle(u,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,u,1,3,5,7),u=SIMD.Float32x4.mul(a,i),u=SIMD.Float32x4.swizzle(u,1,0,3,2),o=SIMD.Float32x4.mul(n,u),s=SIMD.Float32x4.mul(r,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,u),o),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),u=SIMD.Float32x4.mul(n,a),u=SIMD.Float32x4.swizzle(u,1,0,3,2),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,u),o),f=SIMD.Float32x4.mul(r,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(i,u)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),u=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),i),u=SIMD.Float32x4.swizzle(u,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),o=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,u),o),l=SIMD.Float32x4.mul(r,u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),o=SIMD.Float32x4.sub(o,SIMD.Float32x4.mul(a,u)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,u),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.mul(r,n),u=SIMD.Float32x4.swizzle(u,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,u),l),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,u),f),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,u),l),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(a,u)),u=SIMD.Float32x4.mul(r,i),u=SIMD.Float32x4.swizzle(u,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,u)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,u),l),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,u),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(n,u)),u=SIMD.Float32x4.mul(r,a),u=SIMD.Float32x4.swizzle(u,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,u),s),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(n,u)),u=SIMD.Float32x4.swizzle(u,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,u)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,u),f),h=SIMD.Float32x4.mul(r,o),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,2,3,0,1),h),h=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(h,1,0,3,2),h),u=SIMD.Float32x4.reciprocalApproximation(h),h=SIMD.Float32x4.sub(SIMD.Float32x4.add(u,u),SIMD.Float32x4.mul(h,SIMD.Float32x4.mul(u,u))),(h=SIMD.Float32x4.swizzle(h,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(h,o)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(h,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(h,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(h,f)),t):null},a.invert=n.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],s=e[6],l=e[7],f=e[8],h=e[9],c=e[10],d=e[11],v=e[12],_=e[13],m=e[14],p=e[15];return t[0]=o*(c*p-d*m)-h*(s*p-l*m)+_*(s*d-l*c),t[1]=-(n*(c*p-d*m)-h*(a*p-i*m)+_*(a*d-i*c)),t[2]=n*(s*p-l*m)-o*(a*p-i*m)+_*(a*l-i*s),t[3]=-(n*(s*d-l*c)-o*(a*d-i*c)+h*(a*l-i*s)),t[4]=-(u*(c*p-d*m)-f*(s*p-l*m)+v*(s*d-l*c)),t[5]=r*(c*p-d*m)-f*(a*p-i*m)+v*(a*d-i*c),t[6]=-(r*(s*p-l*m)-u*(a*p-i*m)+v*(a*l-i*s)),t[7]=r*(s*d-l*c)-u*(a*d-i*c)+f*(a*l-i*s),t[8]=u*(h*p-d*_)-f*(o*p-l*_)+v*(o*d-l*h),t[9]=-(r*(h*p-d*_)-f*(n*p-i*_)+v*(n*d-i*h)),t[10]=r*(o*p-l*_)-u*(n*p-i*_)+v*(n*l-i*o),t[11]=-(r*(o*d-l*h)-u*(n*d-i*h)+f*(n*l-i*o)),t[12]=-(u*(h*m-c*_)-f*(o*m-s*_)+v*(o*c-s*h)),t[13]=r*(h*m-c*_)-f*(n*m-a*_)+v*(n*c-a*h),t[14]=-(r*(o*m-s*_)-u*(n*m-a*_)+v*(n*s-a*o)),t[15]=r*(o*c-s*h)-u*(n*c-a*h)+f*(n*s-a*o),t},a.SIMD.adjoint=function(t,e){var r,n,a,i,u,o,s,l,f,h,c,d,v,r=SIMD.Float32x4.load(e,0),n=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12);return f=SIMD.Float32x4.shuffle(r,n,0,1,4,5),o=SIMD.Float32x4.shuffle(a,i,0,1,4,5),u=SIMD.Float32x4.shuffle(f,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,f,1,3,5,7),f=SIMD.Float32x4.shuffle(r,n,2,3,6,7),l=SIMD.Float32x4.shuffle(a,i,2,3,6,7),s=SIMD.Float32x4.shuffle(f,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,f,1,3,5,7),f=SIMD.Float32x4.mul(s,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.mul(o,f),c=SIMD.Float32x4.mul(u,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,f),h),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.mul(o,s),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),h),v=SIMD.Float32x4.mul(u,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,f)),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),v),v=SIMD.Float32x4.swizzle(v,2,3,0,1),f=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,2,3,0,1),l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),h),d=SIMD.Float32x4.mul(u,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,f)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),f=SIMD.Float32x4.mul(u,o),f=SIMD.Float32x4.swizzle(f,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),d),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,f),v),f=SIMD.Float32x4.swizzle(f,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,f),d),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(s,f)),f=SIMD.Float32x4.mul(u,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,f)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,f),d),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),c),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(o,f)),f=SIMD.Float32x4.mul(u,s),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),c),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(o,f)),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,f)),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,f),v),SIMD.Float32x4.store(t,0,h),SIMD.Float32x4.store(t,4,c),SIMD.Float32x4.store(t,8,d),SIMD.Float32x4.store(t,12,v),t},a.adjoint=n.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(t){var e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],u=t[5],o=t[6],s=t[7],l=t[8],f=t[9],h=t[10],c=t[11],d=t[12],v=t[13],_=t[14],m=t[15];return(e*u-r*i)*(h*m-c*_)-(e*o-n*i)*(f*m-c*v)+(e*s-a*i)*(f*_-h*v)+(r*o-n*u)*(l*m-c*d)-(r*s-a*u)*(l*_-h*d)+(n*s-a*o)*(l*v-f*d)},a.SIMD.multiply=function(t,e,r){var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),u=SIMD.Float32x4.load(e,12),o=SIMD.Float32x4.load(r,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(o,3,3,3,3),u))));SIMD.Float32x4.store(t,0,s);var l=SIMD.Float32x4.load(r,4),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),u))));SIMD.Float32x4.store(t,4,f);var h=SIMD.Float32x4.load(r,8),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),u))));SIMD.Float32x4.store(t,8,c);var d=SIMD.Float32x4.load(r,12),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),u))));return SIMD.Float32x4.store(t,12,v),t},a.scalar.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=e[9],d=e[10],v=e[11],_=e[12],m=e[13],p=e[14],M=e[15],x=r[0],g=r[1],E=r[2],b=r[3];return t[0]=x*n+g*o+E*h+b*_,t[1]=x*a+g*s+E*c+b*m,t[2]=x*i+g*l+E*d+b*p,t[3]=x*u+g*f+E*v+b*M,x=r[4],g=r[5],E=r[6],b=r[7],t[4]=x*n+g*o+E*h+b*_,t[5]=x*a+g*s+E*c+b*m,t[6]=x*i+g*l+E*d+b*p,t[7]=x*u+g*f+E*v+b*M,x=r[8],g=r[9],E=r[10],b=r[11],t[8]=x*n+g*o+E*h+b*_,t[9]=x*a+g*s+E*c+b*m,t[10]=x*i+g*l+E*d+b*p,t[11]=x*u+g*f+E*v+b*M,x=r[12],g=r[13],E=r[14],b=r[15],t[12]=x*n+g*o+E*h+b*_,t[13]=x*a+g*s+E*c+b*m,t[14]=x*i+g*l+E*d+b*p,t[15]=x*u+g*f+E*v+b*M,t},a.multiply=n.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(t,e,r){var n,a,i,u,o,s,l,f,h,c,d,v,_=r[0],m=r[1],p=r[2];return e===t?(t[12]=e[0]*_+e[4]*m+e[8]*p+e[12],t[13]=e[1]*_+e[5]*m+e[9]*p+e[13],t[14]=e[2]*_+e[6]*m+e[10]*p+e[14],t[15]=e[3]*_+e[7]*m+e[11]*p+e[15]):(n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],s=e[5],l=e[6],f=e[7],h=e[8],c=e[9],d=e[10],v=e[11],t[0]=n,t[1]=a,t[2]=i,t[3]=u,t[4]=o,t[5]=s,t[6]=l,t[7]=f,t[8]=h,t[9]=c,t[10]=d,t[11]=v,t[12]=n*_+o*m+h*p+e[12],t[13]=a*_+s*m+c*p+e[13],t[14]=i*_+l*m+d*p+e[14],t[15]=u*_+f*m+v*p+e[15]),t},a.SIMD.translate=function(t,e,r){var n=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),u=SIMD.Float32x4.load(e,12),o=SIMD.Float32x4(r[0],r[1],r[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(o,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(o,1,1,1,1)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(o,2,2,2,2));var s=SIMD.Float32x4.add(n,SIMD.Float32x4.add(a,SIMD.Float32x4.add(i,u)));return SIMD.Float32x4.store(t,12,s),t},a.translate=n.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(t,e,r){var n=r[0],a=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.SIMD.scale=function(t,e,r){var n,a,i,u=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(u,0,0,0,0))),a=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,1,1,1,1))),i=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(u,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.scale=n.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(t,e,r,a){var i,u,o,s,l,f,h,c,d,v,_,m,p,M,x,g,E,b,y,S,T,I,A,F,D=a[0],R=a[1],w=a[2],P=Math.sqrt(D*D+R*R+w*w);return Math.abs(P)<n.EPSILON?null:(P=1/P,D*=P,R*=P,w*=P,i=Math.sin(r),u=Math.cos(r),o=1-u,s=e[0],l=e[1],f=e[2],h=e[3],c=e[4],d=e[5],v=e[6],_=e[7],m=e[8],p=e[9],M=e[10],x=e[11],g=D*D*o+u,E=R*D*o+w*i,b=w*D*o-R*i,y=D*R*o-w*i,S=R*R*o+u,T=w*R*o+D*i,I=D*w*o+R*i,A=R*w*o-D*i,F=w*w*o+u,t[0]=s*g+c*E+m*b,t[1]=l*g+d*E+p*b,t[2]=f*g+v*E+M*b,t[3]=h*g+_*E+x*b,t[4]=s*y+c*S+m*T,t[5]=l*y+d*S+p*T,t[6]=f*y+v*S+M*T,t[7]=h*y+_*S+x*T,t[8]=s*I+c*A+m*F,t[9]=l*I+d*A+p*F,t[10]=f*I+v*A+M*F,t[11]=h*I+_*A+x*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},a.scalar.rotateX=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[4],u=e[5],o=e[6],s=e[7],l=e[8],f=e[9],h=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+l*n,t[5]=u*a+f*n,t[6]=o*a+h*n,t[7]=s*a+c*n,t[8]=l*a-i*n,t[9]=f*a-u*n,t[10]=h*a-o*n,t[11]=c*a-s*n,t},a.SIMD.rotateX=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,4),u=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(u,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,a),SIMD.Float32x4.mul(i,n))),t},a.rotateX=n.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],u=e[1],o=e[2],s=e[3],l=e[8],f=e[9],h=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-l*n,t[1]=u*a-f*n,t[2]=o*a-h*n,t[3]=s*a-c*n,t[8]=i*n+l*a,t[9]=u*n+f*a,t[10]=o*n+h*a,t[11]=s*n+c*a,t},a.SIMD.rotateY=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),u=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(u,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,n),SIMD.Float32x4.mul(u,a))),t},a.rotateY=n.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(t,e,r){var n=Math.sin(r),a=Math.cos(r),i=e[0],u=e[1],o=e[2],s=e[3],l=e[4],f=e[5],h=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+l*n,t[1]=u*a+f*n,t[2]=o*a+h*n,t[3]=s*a+c*n,t[4]=l*a-i*n,t[5]=f*a-u*n,t[6]=h*a-o*n,t[7]=c*a-s*n,t},a.SIMD.rotateZ=function(t,e,r){var n=SIMD.Float32x4.splat(Math.sin(r)),a=SIMD.Float32x4.splat(Math.cos(r));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var i=SIMD.Float32x4.load(e,0),u=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(u,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,a),SIMD.Float32x4.mul(i,n))),t},a.rotateZ=n.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,e,r){var a,i,u,o=r[0],s=r[1],l=r[2],f=Math.sqrt(o*o+s*s+l*l);return Math.abs(f)<n.EPSILON?null:(f=1/f,o*=f,s*=f,l*=f,a=Math.sin(e),i=Math.cos(e),u=1-i,t[0]=o*o*u+i,t[1]=s*o*u+l*a,t[2]=l*o*u-s*a,t[3]=0,t[4]=o*s*u-l*a,t[5]=s*s*u+i,t[6]=l*s*u+o*a,t[7]=0,t[8]=o*l*u+s*a,t[9]=s*l*u-o*a,t[10]=l*l*u+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},a.fromXRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromYRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromZRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotationTranslation=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=n+n,s=a+a,l=i+i,f=n*o,h=n*s,c=n*l,d=a*s,v=a*l,_=i*l,m=u*o,p=u*s,M=u*l;return t[0]=1-(d+_),t[1]=h+M,t[2]=c-p,t[3]=0,t[4]=h-M,t[5]=1-(f+_),t[6]=v+m,t[7]=0,t[8]=c+p,t[9]=v-m,t[10]=1-(f+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},a.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},a.getRotation=function(t,e){var r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},a.fromRotationTranslationScale=function(t,e,r,n){var a=e[0],i=e[1],u=e[2],o=e[3],s=a+a,l=i+i,f=u+u,h=a*s,c=a*l,d=a*f,v=i*l,_=i*f,m=u*f,p=o*s,M=o*l,x=o*f,g=n[0],E=n[1],b=n[2];return t[0]=(1-(v+m))*g,t[1]=(c+x)*g,t[2]=(d-M)*g,t[3]=0,t[4]=(c-x)*E,t[5]=(1-(h+m))*E,t[6]=(_+p)*E,t[7]=0,t[8]=(d+M)*b,t[9]=(_-p)*b,t[10]=(1-(h+v))*b,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},a.fromRotationTranslationScaleOrigin=function(t,e,r,n,a){var i=e[0],u=e[1],o=e[2],s=e[3],l=i+i,f=u+u,h=o+o,c=i*l,d=i*f,v=i*h,_=u*f,m=u*h,p=o*h,M=s*l,x=s*f,g=s*h,E=n[0],b=n[1],y=n[2],S=a[0],T=a[1],I=a[2];return t[0]=(1-(_+p))*E,t[1]=(d+g)*E,t[2]=(v-x)*E,t[3]=0,t[4]=(d-g)*b,t[5]=(1-(c+p))*b,t[6]=(m+M)*b,t[7]=0,t[8]=(v+x)*y,t[9]=(m-M)*y,t[10]=(1-(c+_))*y,t[11]=0,t[12]=r[0]+S-(t[0]*S+t[4]*T+t[8]*I),t[13]=r[1]+T-(t[1]*S+t[5]*T+t[9]*I),t[14]=r[2]+I-(t[2]*S+t[6]*T+t[10]*I),t[15]=1,t},a.fromQuat=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r+r,o=n+n,s=a+a,l=r*u,f=n*u,h=n*o,c=a*u,d=a*o,v=a*s,_=i*u,m=i*o,p=i*s;return t[0]=1-h-v,t[1]=f+p,t[2]=c-m,t[3]=0,t[4]=f-p,t[5]=1-l-v,t[6]=d+_,t[7]=0,t[8]=c+m,t[9]=d-_,t[10]=1-l-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.frustum=function(t,e,r,n,a,i,u){var o=1/(r-e),s=1/(a-n),l=1/(i-u);return t[0]=2*i*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*s,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(a+n)*s,t[10]=(u+i)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*i*2*l,t[15]=0,t},a.perspective=function(t,e,r,n,a){var i=1/Math.tan(e/2),u=1/(n-a);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*u,t[15]=0,t},a.perspectiveFromFieldOfView=function(t,e,r,n){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),s=2/(u+o),l=2/(a+i);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(u-o)*s*.5,t[9]=(a-i)*l*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},a.ortho=function(t,e,r,n,a,i,u){var o=1/(e-r),s=1/(n-a),l=1/(i-u);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+r)*o,t[13]=(a+n)*s,t[14]=(u+i)*l,t[15]=1,t},a.lookAt=function(t,e,r,i){var u,o,s,l,f,h,c,d,v,_,m=e[0],p=e[1],M=e[2],x=i[0],g=i[1],E=i[2],b=r[0],y=r[1],S=r[2];return Math.abs(m-b)<n.EPSILON&&Math.abs(p-y)<n.EPSILON&&Math.abs(M-S)<n.EPSILON?a.identity(t):(c=m-b,d=p-y,v=M-S,_=1/Math.sqrt(c*c+d*d+v*v),c*=_,d*=_,v*=_,u=g*v-E*d,o=E*c-x*v,s=x*d-g*c,_=Math.sqrt(u*u+o*o+s*s),_?(_=1/_,u*=_,o*=_,s*=_):(u=0,o=0,s=0),l=d*s-v*o,f=v*u-c*s,h=c*o-d*u,_=Math.sqrt(l*l+f*f+h*h),_?(_=1/_,l*=_,f*=_,h*=_):(l=0,f=0,h=0),t[0]=u,t[1]=l,t[2]=c,t[3]=0,t[4]=o,t[5]=f,t[6]=d,t[7]=0,t[8]=s,t[9]=h,t[10]=v,t[11]=0,t[12]=-(u*m+o*p+s*M),t[13]=-(l*m+f*p+h*M),t[14]=-(c*m+d*p+v*M),t[15]=1,t)},a.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},a.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},a.equals=function(t,e){var r=t[0],a=t[1],i=t[2],u=t[3],o=t[4],s=t[5],l=t[6],f=t[7],h=t[8],c=t[9],d=t[10],v=t[11],_=t[12],m=t[13],p=t[14],M=t[15],x=e[0],g=e[1],E=e[2],b=e[3],y=e[4],S=e[5],T=e[6],I=e[7],A=e[8],F=e[9],D=e[10],R=e[11],w=e[12],P=e[13],N=e[14],O=e[15];return Math.abs(r-x)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-g)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(i-E)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(u-b)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(o-y)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(s-S)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-T)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(f-I)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(h-A)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(c-F)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(d-D)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(v-R)<=n.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))&&Math.abs(_-w)<=n.EPSILON*Math.max(1,Math.abs(_),Math.abs(w))&&Math.abs(m-P)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(p-N)<=n.EPSILON*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(M-O)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(O))},t.exports=a},function(t,e,r){var n=r(11),a=r(79),i=r(80),u=r(81),o={};o.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},o.rotationTo=function(){var t=i.create(),e=i.fromValues(1,0,0),r=i.fromValues(0,1,0);return function(n,a,u){var s=i.dot(a,u);return-.999999>s?(i.cross(t,e,a),i.length(t)<1e-6&&i.cross(t,r,a),i.normalize(t,t),o.setAxisAngle(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(i.cross(t,a,u),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,o.normalize(n,n))}}(),o.setAxes=function(){var t=a.create();return function(e,r,n,a){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],o.normalize(e,o.fromMat3(e,t))}}(),o.clone=u.clone,o.fromValues=u.fromValues,o.copy=u.copy,o.set=u.set,o.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},o.setAxisAngle=function(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t},o.getAxisAngle=function(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return 0!=n?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},o.add=u.add,o.multiply=function(t,e,r){var n=e[0],a=e[1],i=e[2],u=e[3],o=r[0],s=r[1],l=r[2],f=r[3];return t[0]=n*f+u*o+a*l-i*s,t[1]=a*f+u*s+i*o-n*l,t[2]=i*f+u*l+n*s-a*o,t[3]=u*f-n*o-a*s-i*l,t},o.mul=o.multiply,o.scale=u.scale,o.rotateX=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(r),s=Math.cos(r);return t[0]=n*s+u*o,t[1]=a*s+i*o,t[2]=i*s-a*o,t[3]=u*s-n*o,t},o.rotateY=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(r),s=Math.cos(r);return t[0]=n*s-i*o,t[1]=a*s+u*o,t[2]=i*s+n*o,t[3]=u*s-a*o,t},o.rotateZ=function(t,e,r){r*=.5;var n=e[0],a=e[1],i=e[2],u=e[3],o=Math.sin(r),s=Math.cos(r);return t[0]=n*s+a*o,t[1]=a*s-n*o,t[2]=i*s+u*o,t[3]=u*s-i*o,t},o.calculateW=function(t,e){var r=e[0],n=e[1],a=e[2];return t[0]=r,t[1]=n,t[2]=a,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-a*a)),t},o.dot=u.dot,o.lerp=u.lerp,o.slerp=function(t,e,r,n){var a,i,u,o,s,l=e[0],f=e[1],h=e[2],c=e[3],d=r[0],v=r[1],_=r[2],m=r[3];return i=l*d+f*v+h*_+c*m,0>i&&(i=-i,d=-d,v=-v,_=-_,m=-m),1-i>1e-6?(a=Math.acos(i),u=Math.sin(a),o=Math.sin((1-n)*a)/u,s=Math.sin(n*a)/u):(o=1-n,s=n),t[0]=o*l+s*d,t[1]=o*f+s*v,t[2]=o*h+s*_,t[3]=o*c+s*m,t},o.sqlerp=function(){var t=o.create(),e=o.create();return function(r,n,a,i,u,s){return o.slerp(t,n,u,s),o.slerp(e,a,i,s),o.slerp(r,t,e,2*s*(1-s)),r}}(),o.invert=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],u=r*r+n*n+a*a+i*i,o=u?1/u:0;return t[0]=-r*o,t[1]=-n*o,t[2]=-a*o,t[3]=i*o,t},o.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},o.length=u.length,o.len=o.length,o.squaredLength=u.squaredLength,o.sqrLen=o.squaredLength,o.normalize=u.normalize,o.fromMat3=function(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,u=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*u+u]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*i+u]-e[3*u+i])*r,t[i]=(e[3*i+a]+e[3*a+i])*r,t[u]=(e[3*u+a]+e[3*a+u])*r}return t},o.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},o.exactEquals=u.exactEquals,o.equals=u.equals,t.exports=o},function(t,e,r){var n=r(11),a={};a.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,r){return t[0]=e,t[1]=r,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},a.normalize=function(t,e){var r=e[0],n=e[1],a=r*r+n*n;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},a.lerp=function(t,e,r,n){var a=e[0],i=e[1];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t},a.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},a.transformMat2=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a,t[1]=r[1]*n+r[3]*a,t},a.transformMat2d=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[2]*a+r[4],t[1]=r[1]*n+r[3]*a+r[5],t},a.transformMat3=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[3]*a+r[6],t[1]=r[1]*n+r[4]*a+r[7],t},a.transformMat4=function(t,e,r){var n=e[0],a=e[1];return t[0]=r[0]*n+r[4]*a+r[12],t[1]=r[1]*n+r[5]*a+r[13],t},a.forEach=function(){var t=a.create();return function(e,r,n,a,i,u){var o,s;for(r||(r=2),n||(n=0),s=a?Math.min(a*r+n,e.length):e.length,o=n;s>o;o+=r)t[0]=e[o],t[1]=e[o+1],i(t,t,u),e[o]=t[0],e[o+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a.equals=function(t,e){var r=t[0],a=t[1],i=e[0],u=e[1];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))},t.exports=a},function(t,e){t.exports=function(){throw new Error("It appears that you're using glslify in browserify without its transform applied. Make sure that you've set up glslify as a source transform: https://github.com/substack/node-browserify#browserifytransform")}},function(t,e){function r(t){var e=new Int32Array(t,0,m);if(e[p]!==i)throw new Error("Invalid magic number in DDS header");if(!e[y]&o)throw new Error("Unsupported format, must contain a FourCC code");var r,n,I=e[S];switch(I){case s:r=8,n="dxt1";break;case l:r=16,n="dxt3";break;case f:r=16,n="dxt5";break;case c:n="rgba32f";break;case h:var A=new Uint32Array(t.slice(128,148));n=A[0];var F=A[1];if(A[2],A[3],A[4],F!==v||n!==_)throw new Error("Unsupported DX10 texture format "+n);n="rgba32f";break;default:throw new Error("Unsupported FourCC code: "+a(I))}var D=e[x],R=1;D&u&&(R=Math.max(1,e[b]));var w=!1;e[T]&d&&(w=!0);var N,O=e[E],L=e[g],k=e[M]+4,C=O,U=L,B=[];if(I===h&&(k+=20),w)for(var X=0;6>X;X++){if("rgba32f"!==n)throw new Error("Only RGBA32f cubemaps are supported");O=C,L=U;for(var V=Math.log(O)/Math.log(2)+1,z=0;V>z;z++)N=O*L*16,B.push({offset:k,length:N,shape:[O,L]}),R>z&&(k+=N),O=Math.floor(O/2),L=Math.floor(L/2)}else for(var z=0;R>z;z++)N=Math.max(4,O)/4*Math.max(4,L)/4*r,B.push({offset:k,length:N,shape:[O,L]}),k+=N,O=Math.floor(O/2),L=Math.floor(L/2);return{shape:[C,U],images:B,format:n,flags:D,cubemap:w}}function n(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}function a(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)}var i=542327876,u=131072,o=4,s=n("DXT1"),l=n("DXT3"),f=n("DXT5"),h=n("DX10"),c=116,d=512,v=3,_=2,m=31,p=0,M=1,x=2,g=3,E=4,b=7,y=20,S=21,T=28;t.exports=r},function(t,e){t.exports="// axis.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\t// vec3 color = vNormal;\n\tvec3 color = vColor + vNormal * 0.0001;\n    gl_FragColor = vec4(color, 1.0);\n}"},function(t,e){t.exports="// axis.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aColor;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vColor = aColor;\n    vNormal = aNormal;\n}"},function(t,e){t.exports="// basic.frag\n\n#define SHADER_NAME BASIC_FRAGMENT\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform float time;\n// uniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(vTextureCoord, sin(time) * .5 + .5, 1.0);\n}"},function(t,e){t.exports="// blur13.frag\n// source  : https://github.com/Jam3/glsl-fast-gaussian-blur\n\n#define SHADER_NAME BLUR_13\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform vec2 uDirection;\nuniform vec2 uResolution;\n\nvec4 blur13(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n\tvec4 color = vec4(0.0);\n\tvec2 off1 = vec2(1.411764705882353) * direction;\n\tvec2 off2 = vec2(3.2941176470588234) * direction;\n\tvec2 off3 = vec2(5.176470588235294) * direction;\n\tcolor += texture2D(image, uv) * 0.1964825501511404;\n\tcolor += texture2D(image, uv + (off1 / resolution)) * 0.2969069646728344;\n\tcolor += texture2D(image, uv - (off1 / resolution)) * 0.2969069646728344;\n\tcolor += texture2D(image, uv + (off2 / resolution)) * 0.09447039785044732;\n\tcolor += texture2D(image, uv - (off2 / resolution)) * 0.09447039785044732;\n\tcolor += texture2D(image, uv + (off3 / resolution)) * 0.010381362401148057;\n\tcolor += texture2D(image, uv - (off3 / resolution)) * 0.010381362401148057;\n\treturn color;\n}\n\n\nvoid main(void) {\n    gl_FragColor = blur13(texture, vTextureCoord, uResolution, uDirection);\n}"},function(t,e){t.exports="// blur5.frag\n// source  : https://github.com/Jam3/glsl-fast-gaussian-blur\n\n#define SHADER_NAME BLUR_5\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform vec2 uDirection;\nuniform vec2 uResolution;\n\nvec4 blur5(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n\tvec4 color = vec4(0.0);\n\tvec2 off1 = vec2(1.3333333333333333) * direction;\n\tcolor += texture2D(image, uv) * 0.29411764705882354;\n\tcolor += texture2D(image, uv + (off1 / resolution)) * 0.35294117647058826;\n\tcolor += texture2D(image, uv - (off1 / resolution)) * 0.35294117647058826;\n\treturn color; \n}\n\n\nvoid main(void) {\n    gl_FragColor = blur5(texture, vTextureCoord, uResolution, uDirection);\n}"},function(t,e){t.exports="// blur9.frag\n// source  : https://github.com/Jam3/glsl-fast-gaussian-blur\n\n#define SHADER_NAME BLUR_9\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform vec2 uDirection;\nuniform vec2 uResolution;\n\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n\tvec4 color = vec4(0.0);\n\tvec2 off1 = vec2(1.3846153846) * direction;\n\tvec2 off2 = vec2(3.2307692308) * direction;\n\tcolor += texture2D(image, uv) * 0.2270270270;\n\tcolor += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n\tcolor += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n\tcolor += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n\tcolor += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n\treturn color;\n}\n\n\nvoid main(void) {\n    gl_FragColor = blur9(texture, vTextureCoord, uResolution, uDirection);\n}"},function(t,e){t.exports="// basic.vert\n\n#define SHADER_NAME DOTS_PLANE_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition + aNormal * 0.000001, 1.0);\n    gl_PointSize = 1.0;\n    vNormal = aNormal;\n}"},function(t,e){t.exports="// sky.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n    gl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}"}])})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _assetList=__webpack_require__(2),_assetList2=_interopRequireDefault(_assetList),_alfrid=__webpack_require__(0),_alfrid2=_interopRequireDefault(_alfrid),Assets={},_assets=[],getAsset=function(id){return assets.find(function(a){return a.id===id}).file},getExtension=function(mFile){var ary=mFile.split(".");return ary[ary.length-1]};Assets.init=function(){var hdrCubemaps={};_assets=_assetList2.default.map(function(o){var ext=getExtension(o.url),file=getAsset(o.id),texture=void 0;switch(ext){case"jpg":case"png":return texture=new _alfrid.GLTexture(file),{id:o.id,file:texture};case"hdr":var cubemapName=o.id.split("_")[0];texture=_alfrid2.default.HDRLoader.parse(file);var oAsset={id:o.id,file:texture};return hdrCubemaps[cubemapName]||(hdrCubemaps[cubemapName]=[]),hdrCubemaps[cubemapName].push(oAsset),oAsset;case"dds":return texture=_alfrid.GLCubeTexture.parseDDS(file),{id:o.id,file:texture};case"obj":var mesh=_alfrid.ObjLoader.parse(file);return{id:o.id,file:mesh}}});for(var s in hdrCubemaps)if(6==hdrCubemaps[s].length){var ary=[Assets.get(s+"_posx"),Assets.get(s+"_negx"),Assets.get(s+"_posy"),Assets.get(s+"_negy"),Assets.get(s+"_posz"),Assets.get(s+"_negz")],texture=new _alfrid2.default.GLCubeTexture(ary);_assets.push({id:s,file:texture})}_assets.length},Assets.get=function(mId){return _assets.find(function(a){return a.id===mId}).file},exports.default=Assets},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var assetsToLoad=[{id:"p01",url:"assets/img/p01.jpg",type:"jpg"},{id:"p02",url:"assets/img/p02.jpg",type:"jpg"},{id:"cylinder",url:"assets/obj/cylinder.obj",type:"text"}];exports.default=assetsToLoad},function(module,exports,__webpack_require__){"use strict";function Emitter(){EventEmitter.call(this),this.setMaxListeners(20)}var EventEmitter=__webpack_require__(17).EventEmitter;Emitter.prototype=Object.create(EventEmitter.prototype),Emitter.prototype.constructor=Emitter,Emitter.prototype.off=function(type,listener){return listener?this.removeListener(type,listener):type?this.removeAllListeners(type):this.removeAllListeners()},module.exports=Emitter},function(module,exports,__webpack_require__){"use strict";module.exports={mbs:0,secs:0,update:function(request,startTime,url,log){var length,headers=request.getAllResponseHeaders();if(headers){var match=headers.match(/content-length: (\d+)/i);match&&match.length&&(length=match[1])}if(length){length=parseInt(length,10);var mbs=length/1024/1024,secs=(Date.now()-startTime)/1e3;this.secs+=secs,this.mbs+=mbs,log&&this.log(url,mbs,secs)}},log:function(url,mbs,secs){if(url){url.substr(url.lastIndexOf("/")+1),mbs.toFixed(2),secs.toFixed(2),(mbs/secs).toFixed(2)}this.mbs.toFixed(2),this.secs.toFixed(2),this.getMbps().toFixed(2)},getMbps:function(){return this.mbs/this.secs}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _init(){if(_assetList2.default.length>0){document.body.classList.add("isLoading");new _assetsLoader2.default({assets:_assetList2.default}).on("error",function(error){}).on("progress",function(p){var loader=document.body.querySelector(".Loading-Bar");loader&&(loader.style.width=100*p+"%")}).on("complete",_onImageLoaded).start()}else _init3D()}function _onImageLoaded(o){window.assets=o;var loader=document.body.querySelector(".Loading-Bar");loader.style.width="100%",_init3D(),setTimeout(function(){document.body.classList.remove("isLoading")},250)}function _init3D(){var canvas=document.createElement("canvas");canvas.className="Main-Canvas",document.body.appendChild(canvas),_alfrid.GL.init(canvas,{ignoreWebgl2:!0}),_Assets2.default.init();new _SceneApp2.default}__webpack_require__(6);var _debugPolyfill=__webpack_require__(7),_alfrid=(_interopRequireDefault(_debugPolyfill),__webpack_require__(0)),_SceneApp=(_interopRequireDefault(_alfrid),__webpack_require__(8)),_SceneApp2=_interopRequireDefault(_SceneApp),_assetsLoader=__webpack_require__(15),_assetsLoader2=_interopRequireDefault(_assetsLoader),_assetList=__webpack_require__(2),_assetList2=_interopRequireDefault(_assetList),_Assets=__webpack_require__(1),_Assets2=_interopRequireDefault(_Assets);document.body?_init():window.addEventListener("DOMContentLoaded",_init),window.params={gamma:2.2,exposure:5}},function(module,exports){},function(module,exports,__webpack_require__){"use strict";window.gui={add:function(){}}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_alfrid=__webpack_require__(0),_alfrid2=_interopRequireDefault(_alfrid),_Assets=__webpack_require__(1),_ViewCylinders=(_interopRequireDefault(_Assets),__webpack_require__(9)),_ViewCylinders2=_interopRequireDefault(_ViewCylinders),_ViewFloor=__webpack_require__(12),_ViewFloor2=_interopRequireDefault(_ViewFloor),RAD=Math.PI/180,FOV=55,radius=10,ratio=.66625,SceneApp=function(_Scene){function SceneApp(){_classCallCheck(this,SceneApp);var _this=_possibleConstructorReturn(this,(SceneApp.__proto__||Object.getPrototypeOf(SceneApp)).call(this));return _this.resize(),_alfrid.GL.enableAlphaBlending(),_this.orbitalControl.rx.value=_this.orbitalControl.ry.value=.3,_this.orbitalControl.radius.value=radius,_this.camera.setPerspective(FOV*RAD,_alfrid.GL.aspectRatio,.1,50),_this.cameraPortrait=new _alfrid2.default.CameraPerspective,_this.cameraPortrait.setPerspective(FOV*RAD,ratio,.1,50),_this.pointSource=vec3.fromValues(0,0,-radius),_this.cameraPortrait.lookAt(_this.pointSource,[0,-1,0],[0,1,0]),_this.biasMatrix=mat4.fromValues(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1),_this.portraitMatrix=mat4.create(),mat4.multiply(_this.portraitMatrix,_this.cameraPortrait.projection,_this.cameraPortrait.viewMatrix),mat4.multiply(_this.portraitMatrix,_this.biasMatrix,_this.portraitMatrix),_this._hasShadowMap=!1,_this.step=0,window.addEventListener("keydown",function(e){32===e.keyCode||39===e.keyCode?_this.step++:37===e.keyCode?--_this.step<0&&(_this.step=0):40===e.keyCode&&(_this.orbitalControl.rx.value=0,_this.orbitalControl.ry.value=Math.PI,_this.orbitalControl.radius.value=radius)}),_this}return _inherits(SceneApp,_Scene),_createClass(SceneApp,[{key:"_initTextures",value:function(){this.fboDepth=new _alfrid2.default.FrameBuffer(1024,1024,{minFilter:_alfrid.GL.NEAREST,magFilter:_alfrid.GL.NEAREST})}},{key:"_initViews",value:function(){this._vCylinder=new _ViewCylinders2.default,this._vFloor=new _ViewFloor2.default,this._bBall=new _alfrid2.default.BatchBall}},{key:"render",value:function(){_alfrid.GL.clear(0,0,0,0);this._bBall.draw(this.pointSource,[.1,.1,.1],[1,1,1]),this._vCylinder.render(this.portraitMatrix,this.step)}},{key:"resize",value:function(){var _window=window,innerWidth=_window.innerWidth,innerHeight=_window.innerHeight,devicePixelRatio=_window.devicePixelRatio,scale=devicePixelRatio;_alfrid.GL.isMobile||(scale=1),_alfrid.GL.setSize(innerWidth*scale,innerHeight*scale),this.camera.setAspectRatio(_alfrid.GL.aspectRatio)}}]),SceneApp}(_alfrid.Scene);exports.default=SceneApp},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_alfrid=__webpack_require__(0),_alfrid2=_interopRequireDefault(_alfrid),_cylinder=__webpack_require__(10),_cylinder2=_interopRequireDefault(_cylinder),_cylinder3=__webpack_require__(11),_cylinder4=_interopRequireDefault(_cylinder3),_Assets=__webpack_require__(1),_Assets2=_interopRequireDefault(_Assets),ViewCylinders=function(_alfrid$View){function ViewCylinders(){_classCallCheck(this,ViewCylinders);var _this=_possibleConstructorReturn(this,(ViewCylinders.__proto__||Object.getPrototypeOf(ViewCylinders)).call(this,_cylinder2.default,_cylinder4.default));return _this.shaderColor=new _alfrid2.default.GLShader(_cylinder2.default,_alfrid2.default.ShaderLibs.simpleColorFrag),_this}return _inherits(ViewCylinders,_alfrid$View),_createClass(ViewCylinders,[{key:"_init",value:function(){this.mesh=_Assets2.default.get("cylinder");for(var positions=[],extras=[],sin=Math.sin,cos=Math.cos,random=Math.random,PI=Math.PI,i=0;i<80;i++)positions.push(function(){var t=2*PI*random(),u=random()+random(),r=u>1?2-u:u;return r*=3,[r*cos(t),0,r*sin(t)]}()),extras.push([Math.random(),Math.random(),Math.random()]);this.mesh.bufferInstance(positions,"aPosOffset"),this.mesh.bufferInstance(extras,"aExtra"),this.texturePortrait=_Assets2.default.get("p01")}},{key:"render",value:function(mShadowMatrix,mStep){if(!mShadowMatrix)return this.shaderColor.bind(),this.shaderColor.uniform("color","vec3",[1,1,1]),this.shaderColor.uniform("opacity","float",1),void _alfrid.GL.draw(this.mesh);this.shader.bind(),this.shader.uniform("uShadowMatrix","mat4",mShadowMatrix),this.shader.uniform("texturePortrait","uniform1i",1),this.texturePortrait.bind(1),this.shader.uniform("uRatio","float",.66625),0===mStep?(this.shader.uniform("uUseColor","float",1),this.shader.uniform("uScaleOffset","float",0)):1===mStep?(this.shader.uniform("uUseColor","float",0),this.shader.uniform("uScaleOffset","float",1)):2===mStep?(this.shader.uniform("uUseColor","float",1),this.shader.uniform("uScaleOffset","float",1)):3===mStep&&(this.shader.uniform("uUseColor","float",1),this.shader.uniform("uScaleOffset","float",0)),_alfrid.GL.draw(this.mesh)}}]),ViewCylinders}(_alfrid2.default.View);exports.default=ViewCylinders},function(module,exports){module.exports="// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\nattribute vec3 aPosOffset;\nattribute vec3 aExtra;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uShadowMatrix;\n\nuniform sampler2D texturePortrait;\nuniform float uRatio;\nuniform float uMultiPillars;\nuniform float uScaleOffset;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec4 vShadowCoord;\n\nvoid main(void) {\n\tvec3 position  = aVertexPosition;\n\tposition.y \t   *= 1.0 + aExtra.y * 2.0;\n\tposition.xz    *= 1.0 + aExtra.x;\n\tvec3 targetPos = position + aPosOffset;\n\t\n\tvShadowCoord   = uShadowMatrix * vec4(targetPos, 1.0);\n\tvec4 vShadowCoord1 = uShadowMatrix * vec4(aPosOffset + vec3(0.0, position.y, 0.0), 1.0);\n\tvec2 uv        = (vShadowCoord1/vShadowCoord1.w).xy;\n\t\n\tfloat t        = (uRatio - 1.0) * 0.5;\n\tuv.x           /= (1.0 + t);\n\tvec3 color     = texture2D(texturePortrait, uv).rgb;\n\tposition.xz    *= mix(color.r, 1.0, uScaleOffset);\n\tposition       += aPosOffset;\n\t\n\t\n\tgl_Position    = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(position, 1.0);\n\tvTextureCoord  = aTextureCoord;\n\tvNormal        = aNormal;\n}"},function(module,exports){module.exports="// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec3 vNormal;\nvarying vec4 vShadowCoord;\nuniform sampler2D texture;\nuniform sampler2D texturePortrait;\n\nuniform float uRatio;\nuniform float uUseColor;\nuniform float uRatioPortrail;\n\nfloat diffuse(vec3 N, vec3 L) {\n\treturn max(dot(N, normalize(L)), 0.0);\n}\n\n\nvec3 diffuse(vec3 N, vec3 L, vec3 C) {\n\treturn diffuse(N, L) * C;\n}\n\n\nconst vec3 LIGHT = vec3(1.0, .2, -.6);\n\nvoid main(void) {\n\tvec4 shadowCoord = vShadowCoord / vShadowCoord.w;\n\tvec2 uv = shadowCoord.xy;\n\n\t// vec3 color = texture2D(texturePortrait, uv).rgb;\n\tvec3 color = texture2DProj(texturePortrait, shadowCoord).rgb;\n\n\n\tfloat d = diffuse(vNormal, LIGHT);\n\td = mix(d, 1.0, .75);\n\tcolor *= d;\n\n\n\tvec3 colorDiffuse = vec3(d);\n\tcolor = mix(colorDiffuse, color, uUseColor);\n\n    gl_FragColor = vec4(color, 1.0);\n}"},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_alfrid=__webpack_require__(0),_alfrid2=_interopRequireDefault(_alfrid),_floor=__webpack_require__(13),_floor2=_interopRequireDefault(_floor),_floor3=__webpack_require__(14),_floor4=_interopRequireDefault(_floor3),ViewFloor=function(_alfrid$View){function ViewFloor(){return _classCallCheck(this,ViewFloor),_possibleConstructorReturn(this,(ViewFloor.__proto__||Object.getPrototypeOf(ViewFloor)).call(this,_floor2.default,_floor4.default))}return _inherits(ViewFloor,_alfrid$View),_createClass(ViewFloor,[{key:"_init",value:function(){this.mesh=_alfrid2.default.Geom.plane(12,12,1,"xz")}},{key:"render",value:function(mShadowMatrix,mShadowMap){this.shader.bind(),this.shader.uniform("uPosition","vec3",[0,-2,0]),this.shader.uniform("uShadowMatrix","mat4",mShadowMatrix),this.shader.uniform("textureDepth","uniform1i",0),mShadowMap.bind(0),_alfrid.GL.draw(this.mesh)}}]),ViewFloor}(_alfrid2.default.View);exports.default=ViewFloor},function(module,exports){module.exports="// basic.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uShadowMatrix;\nuniform vec3 uPosition;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\nvarying vec4 vShadowCoord;\n\nvoid main(void) {\n\tvec3 position = aVertexPosition + uPosition;\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(position, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n\n    vShadowCoord = uShadowMatrix * vec4(position, 1.0);\n}"},function(module,exports){module.exports="// copy.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nvarying vec4 vShadowCoord;\nuniform sampler2D textureDepth;\n\nvoid main(void) {\n\n\tfloat d = distance(vTextureCoord, vec2(.5));\n\td = 1.0 - smoothstep(0.0, 0.5, d);\n\td *= 0.5;\n\n\tvec4 shadowCoord = vShadowCoord / vShadowCoord.w;\n\tvec2 uv = shadowCoord.xy;\n\tfloat dd = texture2D(textureDepth, uv).r;\n\n\tfloat bias = 0.001;\n\tfloat visi = 1.0;\n\tif(dd < shadowCoord.z - bias) {\n\t\tvisi = 0.0;\n\t}\n\n\tvisi = mix(visi, 1.0, .5);\n\n    gl_FragColor = vec4(vec3(visi) * d, 1.0);\n}"},function(module,exports,__webpack_require__){"use strict";var assetsLoader=__webpack_require__(16);assetsLoader.stats=__webpack_require__(4),module.exports=assetsLoader},function(module,exports,__webpack_require__){"use strict";var Emitter=__webpack_require__(3),createLoader=__webpack_require__(18),autoId=0;module.exports=function createGroup(config){var group,map={},assets=[],queue=[],numLoaded=0,numTotal=0,loaders={},add=function(options){if(Array.isArray(options))return options.forEach(add),group;var loader,isGroup=!!options.assets&&Array.isArray(options.assets);return loader=isGroup?createGroup(configure(options,config)):createLoader(configure(options,config)),loader.once("destroy",destroyHandler),queue.push(loader),loaders[loader.id]=loader,group},get=function(id){return arguments.length?map[id]?map[id]:loaders[id]:assets},find=function(id){if(get(id))return get(id);var found=null;return Object.keys(loaders).some(function(key){return!!(found=loaders[key].find&&loaders[key].find(id))}),found},getExtension=function(url){return url&&url.split("?")[0].split(".").pop().toLowerCase()},configure=function(options,defaults){if("string"==typeof options){options={url:options}}return void 0===options.isTouchLocked&&(options.isTouchLocked=defaults.isTouchLocked),void 0===options.blob&&(options.blob=defaults.blob),void 0===options.basePath&&(options.basePath=defaults.basePath),options.id=options.id||options.url||String(++autoId),options.type=options.type||getExtension(options.url),options.crossOrigin=options.crossOrigin||defaults.crossOrigin,options.webAudioContext=options.webAudioContext||defaults.webAudioContext,options.log=defaults.log,options},start=function(){return numTotal=queue.length,queue.forEach(function(loader){loader.on("progress",progressHandler).once("complete",completeHandler).once("error",errorHandler).start()}),queue=[],group},progressHandler=function(progress){var loaded=numLoaded+progress;group.emit("progress",loaded/numTotal)},completeHandler=function(asset,id,type){Array.isArray(asset)&&(asset={id:id,file:asset,type:type}),numLoaded++,group.emit("progress",numLoaded/numTotal),map[asset.id]=asset.file,assets.push(asset),group.emit("childcomplete",asset),checkComplete()},errorHandler=function(err){numTotal--,group.listeners("error").length&&group.emit("error",err),checkComplete()},destroyHandler=function(id){loaders[id]=null,delete loaders[id],map[id]=null,delete map[id],assets.some(function(asset,i){if(asset.id===id)return assets.splice(i,1),!0})},checkComplete=function(){numLoaded>=numTotal&&group.emit("complete",assets,map,config.id,"group")},destroy=function(){for(;queue.length;)queue.pop().destroy();return group.off("error"),group.off("progress"),group.off("complete"),assets=[],map={},config.webAudioContext=null,numTotal=0,numLoaded=0,Object.keys(loaders).forEach(function(key){loaders[key].destroy()}),loaders={},group.emit("destroy",group.id),group};return group=Object.create(Emitter.prototype,{_events:{value:{}},id:{get:function(){return config.id}},add:{value:add},start:{value:start},get:{value:get},find:{value:find},getLoader:{value:function(id){return loaders[id]}},loaded:{get:function(){return numLoaded>=numTotal}},file:{get:function(){return assets}},destroy:{value:destroy}}),config=configure(config||{},{basePath:"",blob:!1,touchLocked:!1,crossOrigin:null,webAudioContext:null,log:!1}),Array.isArray(config.assets)&&add(config.assets),Object.freeze(group)}},function(module,exports){function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(arg){return"function"==typeof arg}function isNumber(arg){return"number"==typeof arg}function isObject(arg){return"object"==typeof arg&&null!==arg}function isUndefined(arg){return void 0===arg}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(this._events||(this._events={}),"error"===type&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((er=arguments[1])instanceof Error)throw er;var err=new Error('Uncaught, unspecified "error" event. ('+er+")");throw err.context=er,err}if(handler=this._events[type],isUndefined(handler))return!1;if(isFunction(handler))switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1),handler.apply(this,args)}else if(isObject(handler))for(args=Array.prototype.slice.call(arguments,1),listeners=handler.slice(),len=listeners.length,i=0;i<len;i++)listeners[i].apply(this,args);return!0},EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener),this._events[type]?isObject(this._events[type])?this._events[type].push(listener):this._events[type]=[this._events[type],listener]:this._events[type]=listener,isObject(this._events[type])&&!this._events[type].warned&&(m=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&m>0&&this._events[type].length>m&&(this._events[type].warned=!0,console.trace),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(type,listener){function g(){this.removeListener(type,g),fired||(fired=!0,listener.apply(this,arguments))}if(!isFunction(listener))throw TypeError("listener must be a function");var fired=!1;return g.listener=listener,this.on(type,g),this},EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;if(list=this._events[type],length=list.length,position=-1,list===listener||isFunction(list.listener)&&list.listener===listener)delete this._events[type],this._events.removeListener&&this.emit("removeListener",type,listener);else if(isObject(list)){for(i=length;i-- >0;)if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}if(position<0)return this;1===list.length?(list.length=0,delete this._events[type]):list.splice(position,1),this._events.removeListener&&this.emit("removeListener",type,listener)}return this},EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[type]&&delete this._events[type],this;if(0===arguments.length){for(key in this._events)"removeListener"!==key&&this.removeAllListeners(key);return this.removeAllListeners("removeListener"),this._events={},this}if(listeners=this._events[type],isFunction(listeners))this.removeListener(type,listeners);else if(listeners)for(;listeners.length;)this.removeListener(type,listeners[listeners.length-1]);return delete this._events[type],this},EventEmitter.prototype.listeners=function(type){return this._events&&this._events[type]?isFunction(this._events[type])?[this._events[type]]:this._events[type].slice():[]},EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;if(evlistener)return evlistener.length}return 0},EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)}},function(module,exports,__webpack_require__){"use strict";var Emitter=__webpack_require__(3),browserHasBlob=__webpack_require__(19),stats=__webpack_require__(4);module.exports=function(options){var loader,loadHandler,request,startTime,timeout,file,id=options.id,basePath=options.basePath||"",url=options.url,type=options.type,crossOrigin=options.crossOrigin,isTouchLocked=options.isTouchLocked,blob=options.blob&&browserHasBlob,webAudioContext=options.webAudioContext,log=options.log,start=function(){switch(startTime=Date.now(),type){case"json":loadJSON();break;case"jpg":case"png":case"gif":case"webp":loadImage();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":loadAudio();break;case"ogv":case"mp4":case"webm":case"hls":loadVideo();break;case"bin":case"binary":loadXHR("arraybuffer");break;case"txt":case"text":loadXHR("text");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+basePath+url+" ("+type+")"}},dispatchComplete=function(data){data&&(file={id:id,file:data,type:type},loader.emit("progress",1),loader.emit("complete",file,id,type),removeListeners())},loadXHR=function(responseType,customLoadHandler){loadHandler=customLoadHandler||completeHandler,request=new XMLHttpRequest,request.open("GET",basePath+url,!0),request.responseType=responseType,request.addEventListener("progress",progressHandler),request.addEventListener("load",loadHandler),request.addEventListener("error",errorHandler),request.send()},progressHandler=function(event){event.lengthComputable&&loader.emit("progress",event.loaded/event.total)},completeHandler=function(){success()&&dispatchComplete(request.response)},success=function(){return request&&request.status<400?(stats.update(request,startTime,url,log),!0):(errorHandler(request&&request.statusText),!1)},loadJSON=function(){loadXHR("json",function(){if(success()){var data=request.response;"string"==typeof data&&(data=JSON.parse(data)),dispatchComplete(data)}})},loadImage=function(){blob?loadImageBlob():loadImageElement()},loadImageElement=function(){request=new Image,crossOrigin&&(request.crossOrigin="anonymous"),request.addEventListener("error",errorHandler,!1),request.addEventListener("load",elementLoadHandler,!1),request.src=basePath+url},elementLoadHandler=function(event){if(window.clearTimeout(timeout),!event&&(request.error||!request.readyState))return void errorHandler();dispatchComplete(request)},loadImageBlob=function(){loadXHR("blob",function(){success()&&(request=new Image,request.addEventListener("error",errorHandler,!1),request.addEventListener("load",imageBlobHandler,!1),request.src=window.URL.createObjectURL(request.response))})},imageBlobHandler=function(){window.URL.revokeObjectURL(request.src),dispatchComplete(request)},loadAudio=function(){webAudioContext?loadAudioBuffer():loadMediaElement("audio")},loadVideo=function(){blob?loadXHR("blob"):loadMediaElement("video")},loadAudioBuffer=function(){loadXHR("arraybuffer",function(){success()&&webAudioContext.decodeAudioData(request.response,function(buffer){request=null,dispatchComplete(buffer)},function(e){errorHandler(e)})})},loadMediaElement=function(tagName){request=document.createElement(tagName),isTouchLocked||(window.clearTimeout(timeout),timeout=window.setTimeout(elementLoadHandler,2e3),request.addEventListener("canplaythrough",elementLoadHandler,!1)),request.addEventListener("error",errorHandler,!1),request.preload="auto",request.src=basePath+url,request.load(),isTouchLocked&&dispatchComplete(request)},errorHandler=function(err){window.clearTimeout(timeout);var message=err;if(request&&request.tagName&&request.error){message="MediaError: "+["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"][request.error.code]+" "+request.src}else request&&request.statusText?message=request.statusText:err&&err.message?message=err.message:err&&err.type&&(message=err.type);loader.emit("error",'Error loading "'+basePath+url+'" '+message),destroy()},removeListeners=function(){loader.off("error"),loader.off("progress"),loader.off("complete"),request&&(request.removeEventListener("progress",progressHandler),request.removeEventListener("load",loadHandler),request.removeEventListener("error",errorHandler),request.removeEventListener("load",elementLoadHandler),request.removeEventListener("canplaythrough",elementLoadHandler),request.removeEventListener("load",imageBlobHandler))},destroy=function(){removeListeners(),request&&request.abort&&request.readyState<4&&request.abort(),request=null,webAudioContext=null,file=null,window.clearTimeout(timeout),loader.emit("destroy",id)};return loader=Object.create(Emitter.prototype,{_events:{value:{}},id:{value:options.id},start:{value:start},loaded:{get:function(){return!!file}},file:{get:function(){return file}},destroy:{value:destroy}}),Object.freeze(loader)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(){try{return!!new Blob}catch(e){return!1}}()}]);